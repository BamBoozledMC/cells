!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).ReactMeta=e()}(function(){return function n(r,o,l){function i(a,e){if(!o[a]){if(!r[a]){var t="function"==typeof require&&require;if(!e&&t)return t(a,!0);if(u)return u(a,!0);t=new Error("Cannot find module '"+a+"'");throw t.code="MODULE_NOT_FOUND",t}t=o[a]={exports:{}};r[a][0].call(t.exports,function(e){var t=r[a][1][e];return i(t||e)},t,t.exports,n,r,o,l)}return o[a].exports}for(var u="function"==typeof require&&require,e=0;e<l.length;e++)i(l[e]);return i}({1:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=function(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),e};function r(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o,l=e("pydio"),i=(o=l)&&o.__esModule?o:{default:o},n=(n(u,null,[{key:"editMeta",value:function(){var e=i.default.getInstance();e.UI.openComponentInModal("ReactMeta","UserMetaDialog",{dialogTitleId:489,selection:e.getUserSelection()})}}]),u);function u(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u)}a.default=n,t.exports=a.default},{pydio:"pydio"}],2:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=function(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),e};function r(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(e,t,a){for(var n=!0;n;){var r=e,o=t,l=a,n=!1;null===r&&(r=Function.prototype);var i=Object.getOwnPropertyDescriptor(r,o);if(void 0!==i){if("value"in i)return i.value;var u=i.get;return void 0===u?void 0:u.call(l)}r=Object.getPrototypeOf(r);if(null===r)return;e=r,t=o,a=l,n=!0,i=void 0}};function l(e){return e&&e.__esModule?e:{default:e}}var i=l(e("react")),u=l(e("./MetaClient")),s=l(e("./UserMetaPanel")),c=e("material-ui"),n=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(f,i["default"].Component),n(f,[{key:"openEditMode",value:function(){this.setState({editMode:!0})}},{key:"reset",value:function(){this.refs.panel.resetUpdateData(),this.setState({editMode:!1})}},{key:"componentWillReceiveProps",value:function(e){this.props.node&&this.props.node.stopObserving("node_replaced",this._nodeObserver),e.node!==this.props.node&&this.refs.panel&&(this.reset(),e.node.observe("node_replaced",this._nodeObserver))}},{key:"componentWillUnmount",value:function(){this.props.node&&this.props.node.stopObserving("node_replaced",this._nodeObserver)}},{key:"saveMeta",value:function(){var e=this.refs.panel.getUpdateData();return u.default.getInstance().saveMeta(this.props.pydio.getContextHolder().getSelectedNodes(),e)}},{key:"saveAndClose",value:function(){var e=this;this.saveMeta().then(function(){e.reset()})}},{key:"onChangeUpdateData",value:function(e){this.setState({updateData:e})}},{key:"render",value:function(){var t=this,e=[],a=this.props.node,n=this.props.pydio.MessageHash,r=this.state.updateData||new Map,a="true"===a.getMetadata().get("node_readonly");return this.state.editMode?(e.push(i.default.createElement(c.FlatButton,{key:"cancel",label:r.size?n[54]:n[86],onClick:function(){t.reset()}})),!a&&0<r.size&&e.push(i.default.createElement(c.FlatButton,{key:"edit",label:this.state.editMode?n["meta.user.15"]:n["meta.user.14"],onClick:function(){t.saveAndClose()}}))):a||e.push(i.default.createElement(c.FlatButton,{key:"edit",label:this.state.editMode?n["meta.user.15"]:n["meta.user.14"],onClick:function(){t.openEditMode()}})),i.default.createElement(PydioWorkspaces.InfoPanelCard,{identifier:"meta-user",style:this.props.style,title:this.props.pydio.MessageHash["meta.user.1"],actions:e.length?e:null,icon:"tag-multiple",iconColor:"#00ACC1"},i.default.createElement(s.default,{ref:"panel",node:this.props.node,editMode:this.state.editMode,onRequestEditMode:this.openEditMode.bind(this),pydio:this.props.pydio,onChangeUpdateData:function(e){t.onChangeUpdateData(e)},autoSave:function(){t.saveMeta().then(function(){t.refs.panel.resetUpdateData()})}}))}}]),f);function f(e){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),o(Object.getPrototypeOf(f.prototype),"constructor",this).call(this,e),this.state={editMode:!1},this._nodeObserver=function(){t.refs.panel&&t.refs.panel.resetUpdateData(),t.forceUpdate()},e.node&&e.node.observe("node_replaced",this._nodeObserver)}a.default=n,t.exports=a.default},{"./MetaClient":3,"./UserMetaPanel":6,"material-ui":"material-ui",react:"react"}],3:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],n=!0,r=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(n=(l=i.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),e};function r(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l,i=e("pydio/http/api"),u=(l=i)&&l.__esModule?l:{default:l},s=e("cells-sdk"),n=(n(c,null,[{key:"getInstance",value:function(){return c.Instance=!c.Instance?new c:c.Instance}}]),n(c,[{key:"saveMeta",value:function(r,o){var e=this,l=new s.UserMetaServiceApi(this.client);return new Promise(function(a,n){e.loadConfigs().then(function(e){var t=[];r.map(function(n){var r=new s.IdmUpdateUserMetaRequest;r.MetaDatas=[],r.Operation="PUT",e.forEach(function(e,t){var a;o.has(t)&&((a=new s.IdmUserMeta).NodeUuid=n.getMetadata().get("uuid"),a.Namespace=t,a.JsonValue=JSON.stringify(o.get(t)),a.Policies=[s.ServiceResourcePolicy.constructFromObject({Action:"READ",Subject:"*",Effect:"allow"}),s.ServiceResourcePolicy.constructFromObject({Action:"WRITE",Subject:"*",Effect:"allow"})],r.MetaDatas.push(a),n.getMetadata().set(t,o.get(t)))}),t.push(l.updateUserMeta(r).then(function(e){n.notify("node_replaced")}))}),Promise.all(t).then(function(){a()}).catch(function(e){n(e)})})})}},{key:"clearConfigs",value:function(){this.configs=null}},{key:"loadConfigs",value:function(){var n=this;return this.configs?Promise.resolve(this.configs):this.promise||(this.promise=new Promise(function(t){var r={},a=new Map;new s.UserMetaServiceApi(n.client).listUserMetaNamespace().then(function(e){e.Namespaces.map(function(e){var t,a=e.Namespace,n={label:e.Label,indexable:e.Indexable,order:e.Order,visible:!0,readonly:!e.PoliciesContextEditable};e.JsonDefinition&&(t=JSON.parse(e.JsonDefinition),Object.keys(t).map(function(e){n[e]=t[e]})),r[a]=n});e=Object.entries(r).map(function(e){return e[1].ns=e[0],e[1]});e.sort(function(e,t){e=e.order||0,t=t.order||0;return t<e?1:e===t?0:-1}),e.map(function(e){var t;"choice"===e.type&&e.data&&e.data.split&&(t=e.data.split(",").map(function(e){e=e.split("|"),e=o(e,2);return{key:e[0],value:e[1]}}),e.data={items:t}),a.set(e.ns,e)}),n.configs=a,t(a),n.promise=null}).catch(function(){t(new Map),n.promise=null})}),this.promise)}},{key:"listTags",value:function(e){var a=this;return new Promise(function(t){new s.UserMetaServiceApi(a.client).listUserMetaTags(e).then(function(e){e.Tags?t(e.Tags):t([])}).catch(function(e){t([])})})}},{key:"createTag",value:function(e,t){return new s.UserMetaServiceApi(this.client).putUserMetaTag(e,s.RestPutUserMetaTagRequest.constructFromObject({Namespace:e,Tag:t}))}}]),c);function c(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),this.client=u.default.getRestClient()}a.default=n,t.exports=a.default},{"cells-sdk":"cells-sdk","pydio/http/api":"pydio/http/api"}],4:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a,n=arguments[t];for(a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=function(e,t,a){return t&&o(e.prototype,t),a&&o(e,a),e};function o(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e){return e&&e.__esModule?e:{default:e}}var i=l(e("react")),u=e("material-ui"),s=l(e("./fields/StarsField")),c=l(e("./fields/SelectorField")),f=e("./fields/CssLabelsField"),d=l(f),p=l(e("./hoc/colorsFromString")),v=l(e("./fields/StarsForm")),m=l(e("./fields/SelectorForm")),h=l(e("./MetaClient")),y=l(e("./fields/TagsCloud")),g=e("./fields/DateTime"),b=l(e("./fields/BooleanForm")),O=e("./fields/Integer"),r=(r(M,null,[{key:"renderStars",value:function(e,t){return e.getMetadata().get(t.name)?i.default.createElement(s.default,{node:e,column:t,size:"small"}):null}},{key:"renderBoolean",value:function(e,t){return e.getMetadata().get(t.name)?i.default.createElement("span",null,"Yes"):null}},{key:"renderSelector",value:function(e,t){return e.getMetadata().get(t.name)?i.default.createElement(c.default,{node:e,column:t}):null}},{key:"renderCSSLabel",value:function(e,t){return e.getMetadata().get(t.name)?i.default.createElement(d.default,{node:e,column:t}):null}},{key:"renderTagsCloud",value:function(e,t){if(!e.getMetadata().get(t.name))return null;var a={display:"inline-block",backgroundColor:"#E1BEE7",borderRadius:"1px 10px 10px 1px",height:16,lineHeight:"17px",padding:"0 7px 0 5px",color:"#9C27B0",fontWeight:500,fontSize:12,marginLeft:2,marginRight:2},t=e.getMetadata().get(t.name);return t&&t.split?i.default.createElement("span",null,t.split(",").map(function(e){return i.default.createElement("span",{style:n({},a,(0,p.default)(e))},e)})):null}},{key:"renderDate",value:function(e,t){return e.getMetadata().get(t.name)?i.default.createElement(g.DateTimeField,{node:e,column:t,type:"date"}):null}},{key:"renderInteger",value:function(e,t){return e.getMetadata().get(t.name)?i.default.createElement(O.IntegerField,{node:e,column:t,inline:!0}):null}},{key:"formPanelStars",value:function(e){return i.default.createElement(v.default,n({},e,{search:!0}))}},{key:"formPanelCssLabels",value:function(e,t){var a=Object.keys((0,f.getCssLabels)()).map(function(e){var t=(0,f.getCssLabels)()[e],t=i.default.createElement("span",null,i.default.createElement("span",{className:"mdi mdi-label",style:{color:t.color,marginRight:5}}),t.label);return i.default.createElement(u.MenuItem,{value:e,primaryText:t})}.bind(this));return i.default.createElement(m.default,n({},e,{menuItems:a,search:!t}))}},{key:"formPanelSelectorFilter",value:function(o,e){function a(e,t){var a=e.get(o.fieldname),n=[],r=[],e=void 0;a&&a.data&&a.data.items&&(n=a.data.items.map(function(e){r.push(e.key);var t=e.value;return e.color&&(t=i.default.createElement("span",null,i.default.createElement("span",{className:"mdi mdi-label",style:{color:e.color,marginRight:5}}),e.value)),i.default.createElement(u.MenuItem,{value:e.key,primaryText:t})})),a&&a.data&&a.data.steps&&(e=!0),t(n,r,e)}return i.default.createElement(m.default,n({},o,{menuItems:[],itemsLoader:function(t){e?a(e,t):h.default.getInstance().loadConfigs().then(function(e){return a(e,t)})},search:!e}))}},{key:"formPanelTags",value:function(e,t){return i.default.createElement(y.default,n({},e,{editMode:!0,search:!t}))}},{key:"formPanelDate",value:function(e){return i.default.createElement(g.DateTimeForm,n({type:"date"},e,{editMode:!0,search:!0}))}},{key:"formPanelBoolean",value:function(e){return i.default.createElement(b.default,n({},e,{search:!0}))}},{key:"formPanelInteger",value:function(e){return i.default.createElement(O.IntegerForm,n({},e,{search:!0}))}}]),M);function M(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,M)}a.default=r,t.exports=a.default},{"./MetaClient":3,"./fields/BooleanForm":7,"./fields/CssLabelsField":8,"./fields/DateTime":9,"./fields/Integer":10,"./fields/SelectorField":11,"./fields/SelectorForm":12,"./fields/StarsField":13,"./fields/StarsForm":14,"./fields/TagsCloud":15,"./hoc/colorsFromString":18,"material-ui":"material-ui",react:"react"}],5:[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var r=n(e("react")),o=n(e("pydio")),l=n(e("pydio/model/node")),i=n(e("pydio/model/data-model")),u=n(e("create-react-class")),s=n(e("prop-types")),c=n(e("./MetaClient")),f=n(e("./UserMetaPanel")),d=o.default.requireLib("boot"),e=d.ActionDialogMixin,o=d.CancelButtonProviderMixin,d=d.SubmitButtonProviderMixin;a.default=(0,u.default)({displayName:"UserMetaDialog",propsTypes:{selection:s.default.instanceOf(i.default)},mixins:[e,o,d],saveMeta:function(){var e=this.refs.panel.getUpdateData(),a={};return e.forEach(function(e,t){a[t]=e}),c.default.getInstance().saveMeta(this.props.selection.getSelectedNodes(),e)},submit:function(){var e=this;this.saveMeta().then(function(){e.dismiss()})},render:function(){return r.default.createElement(f.default,{pydio:this.props.pydio,multiple:!this.props.selection.isUnique(),ref:"panel",node:this.props.selection.isUnique()?this.props.selection.getUniqueNode():new l.default,editMode:!0})}}),t.exports=a.default},{"./MetaClient":3,"./UserMetaPanel":6,"create-react-class":"create-react-class","prop-types":"prop-types",pydio:"pydio","pydio/model/data-model":"pydio/model/data-model","pydio/model/node":"pydio/model/node",react:"react"}],6:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a,n=arguments[t];for(a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},n=function(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),e};function r(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(e,t,a){for(var n=!0;n;){var r=e,o=t,l=a,n=!1;null===r&&(r=Function.prototype);var i=Object.getOwnPropertyDescriptor(r,o);if(void 0!==i){if("value"in i)return i.value;var u=i.get;return void 0===u?void 0:u.call(l)}r=Object.getPrototypeOf(r);if(null===r)return;e=r,t=o,a=l,n=!0,i=void 0}};function l(e){return e&&e.__esModule?e:{default:e}}var M=l(e("react")),i=l(e("pydio")),u=l(e("./MetaClient")),w=l(e("./fields/StarsForm")),P=l(e("./fields/StarsField")),E=l(e("./fields/CssLabelsField")),k=l(e("./fields/SelectorField")),_=l(e("./fields/TagsCloud")),j=l(e("./Renderer")),C=e("material-ui"),x=e("./fields/DateTime"),S=l(e("./fields/BooleanForm")),F=e("./fields/Integer"),T=i.default.requireLib("hoc").ModernTextField,n=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,M["default"].Component),n(s,[{key:"componentDidMount",value:function(){var o=this;u.default.getInstance().loadConfigs().then(function(e){var t=o.props,a=t.node,t=t.loadChecks,n={},r=new Map;t&&e.forEach(function(e,t){a.getMetadata().has(t)&&(n[t]=!0,r.set(t,a.getMetadata().get(t)))}),o.setState({configs:e,fields:n,updateMeta:r})})}},{key:"updateValue",value:function(e,t){var a=!(arguments.length<=2||void 0===arguments[2])&&arguments[2];this.state.updateMeta.set(e,t),this.setState({updateMeta:this.state.updateMeta}),this.props.onChangeUpdateData&&this.props.onChangeUpdateData(this.state.updateMeta),a&&this.props.autoSave&&this.props.autoSave()}},{key:"deleteValue",value:function(e){this.state.updateMeta.delete(e),this.setState({updateMeta:this.state.updateMeta}),this.props.onChangeUpdateData&&this.props.onChangeUpdateData(this.state.updateMeta)}},{key:"getUpdateData",value:function(){return this.state.updateMeta}},{key:"resetUpdateData",value:function(){this.setState({updateMeta:new Map}),this.props.onChangeUpdateData&&this.props.onChangeUpdateData(new Map)}},{key:"onCheck",value:function(e,t){var a=this.state.fields;(a[e]=t)||this.deleteValue(e),this.setState({fields:a})}},{key:"render",value:function(){var f=this,e=this.state,d=e.configs,p=e.updateMeta,t=this.props,v=t.node,m=t.editMode,h=t.supportTemplates,y=[],g=v.getMetadata(),b=0;d.forEach(function(e,a){var t=void 0,n=e.label,r=e.type,o=e.readonly;if("json"!==r||h){var t=g.get(a),l=t=p.has(a)?p.get(a):t;if(m&&!o){var i=void 0,u={fieldname:a,label:n,value:t,onValueChange:function(e,t,a){return f.updateValue(e,t,a)}};switch(r){case"stars_rate":i=M.default.createElement(w.default,u);break;case"choice":i=j.default.formPanelSelectorFilter(u,d);break;case"css_label":i=j.default.formPanelCssLabels(u,d);break;case"tags":i=j.default.formPanelTags(u,d);break;case"date":i=M.default.createElement(x.DateTimeForm,O({type:r},u,{supportTemplates:h}));break;case"integer":i=M.default.createElement(F.IntegerForm,O({},u,{supportTemplates:h}));break;case"boolean":i=M.default.createElement(S.default,u);break;default:var s="integer"===r&&!h,i=M.default.createElement(T,{value:t,fullWidth:!0,disabled:o,hintText:n,multiLine:"textarea"===r||"json"===r,type:s?"number":null,onChange:function(e,t){s&&(t=parseInt(t)),f.updateValue(a,t)}})}f.props.multiple?(e=f.state.fields[a]||!1,y.push(M.default.createElement("div",{className:"infoPanelRow",key:a,style:{marginBottom:20}},M.default.createElement(C.Checkbox,{checked:e,label:n,onCheck:function(e,t){return f.onCheck(a,t)}}),e&&M.default.createElement("div",{className:"infoPanelValue"},i)))):y.push(M.default.createElement("div",{className:"infoPanelRow",key:a},M.default.createElement("div",{className:"infoPanelLabel"},n),M.default.createElement("div",{className:"infoPanelValue"},i)))}else{var c={name:a};switch(r){case"stars_rate":t=M.default.createElement(P.default,{node:v,column:c});break;case"choice":t=M.default.createElement(k.default,{node:v,column:c});break;case"css_label":t=M.default.createElement(E.default,{node:v,column:c});break;case"tags":t=M.default.createElement(_.default,{node:v,column:c});break;case"date":t=M.default.createElement(x.DateTimeField,{node:v,column:c,type:r});break;case"integer":t=M.default.createElement(F.IntegerField,{node:v,column:c});break;case"boolean":l=t=t?"Yes":"No"}l&&b++,y.push(M.default.createElement("div",{className:"infoPanelRow"+(l?"":" no-value"),key:a},M.default.createElement("div",{className:"infoPanelLabel"},n),M.default.createElement("div",{className:"infoPanelValue"},t)))}}});e=this.props.pydio.MessageHash;if(this.props.editMode||b){t=void 0;return this.props.multiple&&(t=M.default.createElement("div",{style:{paddingBottom:16}},M.default.createElement("em",null,e["meta.user.12"])," ",e["meta.user.13"])),M.default.createElement("div",{style:{width:"100%",overflowY:"scroll"}},t,y)}return M.default.createElement("div",null,M.default.createElement("div",{style:{color:"rgba(0,0,0,0.23)",paddingBottom:10},onClick:this.props.onRequestEditMode},e["meta.user.11"]),y)}}]),s);function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),void 0===e.editMode&&(e.editMode=!1),o(Object.getPrototypeOf(s.prototype),"constructor",this).call(this,e),this.state={updateMeta:new Map,fields:{},configs:new Map}}a.default=n,t.exports=a.default},{"./MetaClient":3,"./Renderer":4,"./fields/BooleanForm":7,"./fields/CssLabelsField":8,"./fields/DateTime":9,"./fields/Integer":10,"./fields/SelectorField":11,"./fields/StarsField":13,"./fields/StarsForm":14,"./fields/TagsCloud":15,"material-ui":"material-ui",pydio:"pydio",react:"react"}],7:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a,n=arguments[t];for(a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=function(e,t,a){return t&&o(e.prototype,t),a&&o(e,a),e};function o(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=function(e,t,a){for(var n=!0;n;){var r=e,o=t,l=a,n=!1;null===r&&(r=Function.prototype);var i=Object.getOwnPropertyDescriptor(r,o);if(void 0!==i){if("value"in i)return i.value;var u=i.get;return void 0===u?void 0:u.call(l)}r=Object.getPrototypeOf(r);if(null===r)return;e=r,t=o,a=l,n=!0,i=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}var u=i(e("react")),s=e("material-ui"),e=i(e("../hoc/asMetaForm")),c=Pydio.requireLib("hoc").ModernStyles,r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(f,u["default"].Component),r(f,[{key:"render",value:function(){var e=this.props,a=e.updateValue,e=e.value;return u.default.createElement(s.Toggle,n({toggled:e,onToggle:function(e,t){a(t)},label:e?"Yes":"No",labelPosition:"right"},c.toggleField))}}]),f);function f(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),l(Object.getPrototypeOf(f.prototype),"constructor",this).apply(this,arguments)}a.default=(0,e.default)(r),t.exports=a.default},{"../hoc/asMetaForm":17,"material-ui":"material-ui",react:"react"}],8:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=function(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),e};function r(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(e,t,a){for(var n=!0;n;){var r=e,o=t,l=a,n=!1;null===r&&(r=Function.prototype);var i=Object.getOwnPropertyDescriptor(r,o);if(void 0!==i){if("value"in i)return i.value;var u=i.get;return void 0===u?void 0:u.call(l)}r=Object.getPrototypeOf(r);if(null===r)return;e=r,t=o,a=l,n=!0,i=void 0}};function l(e){return e&&e.__esModule?e:{default:e}}function i(){var e=s.default.getMessages();return{low:{label:e["meta.user.4"],sortValue:"5",color:"#66c"},todo:{label:e["meta.user.5"],sortValue:"4",color:"#69c"},personal:{label:e["meta.user.6"],sortValue:"3",color:"#6c6"},work:{label:e["meta.user.7"],sortValue:"2",color:"#c96"},important:{label:e["meta.user.8"],sortValue:"1",color:"#c66"}}}var u=l(e("react")),s=l(e("pydio")),e=l(e("../hoc/asMetaField")),n=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,u["default"].Component),n(c,[{key:"render",value:function(){var e=(0,this.props.getRealValue)(),t=i();if(e&&t[e]){t=t[e];return u.default.createElement("span",null,u.default.createElement("span",{className:"mdi mdi-label",style:{color:t.color}})," ",t.label)}return u.default.createElement("span",null,e)}}]),c);function c(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),o(Object.getPrototypeOf(c.prototype),"constructor",this).apply(this,arguments)}a.getCssLabels=i,a.default=(0,e.default)(n)},{"../hoc/asMetaField":16,pydio:"pydio",react:"react"}],9:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a,n=arguments[t];for(a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},n=function(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),e};function r(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=function(e,t,a){for(var n=!0;n;){var r=e,o=t,l=a,n=!1;null===r&&(r=Function.prototype);var i=Object.getOwnPropertyDescriptor(r,o);if(void 0!==i){if("value"in i)return i.value;var u=i.get;return void 0===u?void 0:u.call(l)}r=Object.getPrototypeOf(r);if(null===r)return;e=r,t=o,a=l,n=!0,i=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=e("react"),f=i(c),d=i(e("pydio")),p=i(e("../hoc/asMetaField")),v=i(e("../hoc/asMetaForm")),m=e("material-ui"),h=i(e("../MetaClient")),e=d.default.requireLib("hoc"),y=e.ModernTextField,g=e.ModernStyles,b=d.default.requireLib("boot").moment,d=(s(O,c.Component),n(O,[{key:"render",value:function(){var e=this.props,t=e.getRealValue,a=e.configs,n=e.column,e=a.get(n.name),a="date",n="normal";e&&e.data&&(a=e.data.format||a,n=e.data.display||n);t=t(),t=new Date(1e3*parseFloat(t));if(isNaN(t.getTime()))return f.default.createElement(c.Fragment,null,"[Invalid Date]");var r=new b(t);if("relative"===n)return f.default.createElement(c.Fragment,null,r.fromNow());switch(a){case"date":return f.default.createElement(c.Fragment,null,r.format("ll"));case"date-time":return f.default.createElement(c.Fragment,null,r.format("llll"));case"time":return f.default.createElement(c.Fragment,null,r.format("LT"));default:return f.default.createElement(c.Fragment,null,r.format("llll"))}}}]),O);function O(){u(this,O),l(Object.getPrototypeOf(O.prototype),"constructor",this).apply(this,arguments)}a.DateTimeField=d=(0,p.default)(d),a.DateTimeField=d;s(M,c.Component),n(M,[{key:"componentDidMount",value:function(){var t=this,a=this.props.fieldname;h.default.getInstance().loadConfigs().then(function(e){e=e.get(a);t.setState(e.data)})}},{key:"getDate",value:function(){var e=this.props.value;if(!e)return null;e=new Date(1e3*parseFloat(e));return isNaN(e.getTime())?new Date(0):e}},{key:"updateDate",value:function(e){var t=this.props.updateValue,a=this.getDate()||new Date;e.setHours(a.getHours()),e.setMinutes(a.getMinutes()),e.setSeconds(a.getSeconds()),t(parseInt(e/1e3))}},{key:"updateTime",value:function(e){var t=this.props.updateValue,a=this.getDate()||new Date;a.setHours(e.getHours()),a.setMinutes(e.getMinutes()),a.setSeconds(e.getSeconds()),t(parseInt(a/1e3))}},{key:"render",value:function(){var a=this,e=this.props,t=e.supportTemplates,n=e.updateValue,r=e.value,e=e.label;if(t)return f.default.createElement(y,{value:r,fullWidth:!0,hintText:e,onChange:function(e,t){n(t)}});t=this.state.format,r=void 0===t?"date":t,e=this.getDate(),t=[];return"date"!==r&&"date-time"!==r||t.push(f.default.createElement("div",{style:{flex:3}},f.default.createElement(m.DatePicker,o({hintText:"Date"},g.textField,{fullWidth:!0,value:e,onChange:function(e,t){return a.updateDate(t)}})))),"date-time"===r&&t.push(f.default.createElement("div",{style:{width:8}})),"time"!==r&&"date-time"!==r||t.push(f.default.createElement("div",{style:{flex:2}},f.default.createElement(m.TimePicker,o({hintText:"Time"},g.textField,{fullWidth:!0,value:e,onChange:function(e,t){return a.updateTime(t)}})))),f.default.createElement("div",{style:{display:"flex",alignItems:"center"}},t)}}]),n=M;function M(e){u(this,M),l(Object.getPrototypeOf(M.prototype),"constructor",this).call(this,e),this.state={}}a.DateTimeForm=n=(0,v.default)(n),a.DateTimeForm=n},{"../MetaClient":3,"../hoc/asMetaField":16,"../hoc/asMetaForm":17,"material-ui":"material-ui",pydio:"pydio",react:"react"}],10:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=function(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),e};function r(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(e,t,a){for(var n=!0;n;){var r=e,o=t,l=a,n=!1;null===r&&(r=Function.prototype);var i=Object.getOwnPropertyDescriptor(r,o);if(void 0!==i){if("value"in i)return i.value;var u=i.get;return void 0===u?void 0:u.call(l)}r=Object.getPrototypeOf(r);if(null===r)return;e=r,t=o,a=l,n=!0,i=void 0}};function l(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=e("react"),f=l(s),c=l(e("pydio")),d=l(e("../hoc/asMetaField")),p=l(e("../hoc/asMetaForm")),v=e("material-ui"),m=l(e("../MetaClient")),h=c.default.requireLib("form").InputIntegerBytes,c=c.default.requireLib("hoc"),y=c.ModernTextField,g=c.ModernSelectField,c=(u(b,f["default"].Component),n(b,[{key:"render",value:function(){var e=this.props,t=e.getRealValue,a=e.configs,n=e.column,r=e.inline,a=a.get(n.name),n="general";a&&a.data&&(n=a.data.format||n);var o=t();switch(n){case"bytesize":var l=function(){};return f.default.createElement(h,{value:o,editMode:!1,isDisplayGrid:l,isDisplayForm:l,toggleEditMode:l,disabled:!0});case"percentage":return f.default.createElement(s.Fragment,null,o,"%");case"progress":return r?f.default.createElement(v.LinearProgress,{value:o,max:100,mode:"determinate",style:{display:"inline-block",width:60,height:6,backgroundColor:"rgba(189,189,189,.5)"}}):f.default.createElement("div",{style:{display:"flex",alignItems:"center"}},f.default.createElement(v.LinearProgress,{value:o,max:100,mode:"determinate",style:{flex:1}}),f.default.createElement("div",{style:{marginLeft:5}},o,"%"));default:return f.default.createElement(s.Fragment,null,o)}}}]),b);function b(){i(this,b),o(Object.getPrototypeOf(b.prototype),"constructor",this).apply(this,arguments)}a.IntegerField=c=(0,d.default)(c),a.IntegerField=c;u(O,f["default"].Component),n(O,[{key:"componentDidMount",value:function(){var t=this,a=this.props.fieldname;m.default.getInstance().loadConfigs().then(function(e){e=e.get(a);t.setState(e.data)})}},{key:"render",value:function(){var e=this.props,t=e.supportTemplates,a=e.search,n=e.updateValue,r=e.label,e=this.state.format,e=void 0===e?"general":e,o=this.props.value,l="=";a&&o.indexOf&&-1<["=","<",">"].indexOf(o.charAt(0))&&(l=o.charAt(0),o=parseInt(o.substr(1)));function i(e,t){var a=!(arguments.length<=2||void 0===arguments[2])&&arguments[2];return f.default.createElement(y,{value:o,fullWidth:!0,hintText:r,type:e,onChange:t,underlineShow:!a})}if(t)return i("",function(e,t){return n(t)});if(a)return f.default.createElement("div",{style:{display:"flex"}},f.default.createElement("div",{style:{width:60,marginRight:8}},f.default.createElement(g,{fullWidth:!0,value:l,onChange:function(e,t,a){return n(a+""+o)}},f.default.createElement(v.MenuItem,{value:"=",primaryText:"="}),f.default.createElement(v.MenuItem,{value:"<",primaryText:"<"}),f.default.createElement(v.MenuItem,{value:">",primaryText:">"}))),f.default.createElement("div",{style:{flex:1}},i("number",function(e,t){n(t&&l+""+t)})));function u(e,t){return n(parseInt(t))}var s="number";switch(e){case"general":return i(s,u);case"percentage":return i(s,function(e,t){n(Math.max(0,Math.min(100,t)))});case"progress":return f.default.createElement("div",null,i(s,function(e,t){n(Math.max(0,Math.min(100,t)))},!0),f.default.createElement(v.LinearProgress,{mode:"determinate",max:100,value:o,style:{marginTop:-8}}));case"bytesize":var c=function(){};return f.default.createElement(h,{value:o,editMode:!0,onChange:u,isDisplayGrid:c,isDisplayForm:c,toggleEditMode:c,attributes:{type:"integer-bytes",label:r}});default:return i(s,u)}}}]),n=O;function O(e){i(this,O),o(Object.getPrototypeOf(O.prototype),"constructor",this).call(this,e),this.state={}}a.IntegerForm=n=(0,p.default)(n),a.IntegerForm=n},{"../MetaClient":3,"../hoc/asMetaField":16,"../hoc/asMetaForm":17,"material-ui":"material-ui",pydio:"pydio",react:"react"}],11:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=function(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),e};function r(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(e,t,a){for(var n=!0;n;){var r=e,o=t,l=a,n=!1;null===r&&(r=Function.prototype);var i=Object.getOwnPropertyDescriptor(r,o);if(void 0!==i){if("value"in i)return i.value;var u=i.get;return void 0===u?void 0:u.call(l)}r=Object.getPrototypeOf(r);if(null===r)return;e=r,t=o,a=l,n=!0,i=void 0}};function l(e){return e&&e.__esModule?e:{default:e}}var i=l(e("react")),e=l(e("../hoc/asMetaField")),n=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(u,i["default"].Component),n(u,[{key:"render",value:function(){var e=this.props,t=e.configs,a=e.getRealValue,e=e.column,n=a(),a=a(),t=t.get(e.name),e=void 0;return t&&t.data&&t.data.items&&((t=t.data.items.filter(function(e){return e.key===n})).length&&(a=t[0].value,t[0].color&&(e=i.default.createElement("span",{className:"mdi mdi-label",style:{color:t[0].color,marginRight:5}})))),i.default.createElement("span",null,e,a)}}]),u);function u(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),o(Object.getPrototypeOf(u.prototype),"constructor",this).apply(this,arguments)}a.default=(0,e.default)(n),t.exports=a.default},{"../hoc/asMetaField":16,react:"react"}],12:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=function(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),e};function r(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(e,t,a){for(var n=!0;n;){var r=e,o=t,l=a,n=!1;null===r&&(r=Function.prototype);var i=Object.getOwnPropertyDescriptor(r,o);if(void 0!==i){if("value"in i)return i.value;var u=i.get;return void 0===u?void 0:u.call(l)}r=Object.getPrototypeOf(r);if(null===r)return;e=r,t=o,a=l,n=!0,i=void 0}};function l(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}var u=l(e("react")),s=l(e("pydio")),c=e("material-ui"),e=l(e("../hoc/asMetaForm")),f=s.default.requireLib("hoc").ModernSelectField,n=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(d,u["default"].Component),n(d,[{key:"changeSelector",value:function(e,t,a){this.props.updateValue(a,!0)}},{key:"componentDidMount",value:function(){var n=this,e=this.props.itemsLoader;e&&e(function(e,t,a){n.setState({menuItems:e,keys:t,stepper:a})})}},{key:"next",value:function(){}},{key:"render",value:function(){var e=this.state,t=e.stepper,a=e.keys,n=void 0===a?[]:a,r=this.props,o=r.value,e=r.label,l=r.updateValue,a=r.search,r=void 0;return(r=void 0===this.state.menuItems?[].concat(i(this.props.menuItems)):[].concat(i(this.state.menuItems))).unshift(u.default.createElement(c.MenuItem,{value:"",primaryText:""})),u.default.createElement("div",{style:{display:"flex"}},t&&!a&&u.default.createElement("div",null,u.default.createElement(c.IconButton,{iconClassName:"mdi mdi-chevron-left",tooltip:"Previous Step",onClick:function(){return l(n[n.indexOf(o)-1],!0)},disabled:n.indexOf(o)<=0,style:{width:28,padding:"12px 0"}})),u.default.createElement("div",{style:{flex:1,maxWidth:t&&!a?"75%":null}},u.default.createElement(f,{fullWidth:!0,value:o,hintText:e,onChange:this.changeSelector.bind(this)},r)),t&&!a&&u.default.createElement("div",null,u.default.createElement(c.IconButton,{iconClassName:"mdi mdi-chevron-right",tooltip:"Next Step",onClick:function(){return l(n[n.indexOf(o)+1],!0)},disabled:n.indexOf(o)>=n.length-1,style:{width:28,padding:"12px 0"}})))}}]),d);function d(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),o(Object.getPrototypeOf(d.prototype),"constructor",this).call(this,e),this.state={}}a.default=(0,e.default)(n),t.exports=a.default},{"../hoc/asMetaForm":17,"material-ui":"material-ui",pydio:"pydio",react:"react"}],13:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=function(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),e};function r(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(e,t,a){for(var n=!0;n;){var r=e,o=t,l=a,n=!1;null===r&&(r=Function.prototype);var i=Object.getOwnPropertyDescriptor(r,o);if(void 0!==i){if("value"in i)return i.value;var u=i.get;return void 0===u?void 0:u.call(l)}r=Object.getPrototypeOf(r);if(null===r)return;e=r,t=o,a=l,n=!0,i=void 0}};function l(e){return e&&e.__esModule?e:{default:e}}var i=l(e("react")),e=l(e("../hoc/asMetaField")),u={fontSize:20,color:"#FBC02D",marginTop:6,marginBottom:6},n=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,i["default"].Component),n(s,[{key:"render",value:function(){var e=this.props,t=e.getRealValue,e=e.size,a=t()||0,t=[0,1,2,3,4].map(function(e){return i.default.createElement("span",{key:"star-"+e,className:"mdi mdi-star"+(e<a?"":"-outline")})}),e="small"===e?{color:u.color}:u;return i.default.createElement("span",{style:e},t)}}]),s);function s(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),o(Object.getPrototypeOf(s.prototype),"constructor",this).apply(this,arguments)}a.starsStyle=u,a.default=(0,e.default)(n)},{"../hoc/asMetaField":16,react:"react"}],14:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a,n=arguments[t];for(a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},n=function(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),e};function r(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=function(e,t,a){for(var n=!0;n;){var r=e,o=t,l=a,n=!1;null===r&&(r=Function.prototype);var i=Object.getOwnPropertyDescriptor(r,o);if(void 0!==i){if("value"in i)return i.value;var u=i.get;return void 0===u?void 0:u.call(l)}r=Object.getPrototypeOf(r);if(null===r)return;e=r,t=o,a=l,n=!0,i=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}var u=i(e("react")),s=i(e("pydio")),c=i(e("../hoc/asMetaForm")),f=e("./StarsField"),d=s.default.requireLib("hoc").ModernStyles,n=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(p,u["default"].Component),n(p,[{key:"render",value:function(){var e=this.props,n=e.updateValue,e=e.value,r=void 0===e?0:e,e=[-1,0,1,2,3,4].map(function(e){var t="star"+(-1===e?"-off":e<r?"":"-outline"),a=-1===e?{marginRight:5,cursor:"pointer"}:{cursor:"pointer"};return u.default.createElement("span",{key:"star-"+e,onClick:function(){return n(e+1,!0)},className:"mdi mdi-"+t,style:a})});return u.default.createElement("div",{className:"advanced-search-stars",style:o({},d.div,f.starsStyle)},u.default.createElement("div",null,e))}}]),p);function p(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),l(Object.getPrototypeOf(p.prototype),"constructor",this).apply(this,arguments)}a.default=(0,c.default)(n),t.exports=a.default},{"../hoc/asMetaForm":17,"./StarsField":13,pydio:"pydio",react:"react"}],15:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a,n=arguments[t];for(a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},n=function(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),e};function r(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(e,t,a){for(var n=!0;n;){var r=e,o=t,l=a,n=!1;null===r&&(r=Function.prototype);var i=Object.getOwnPropertyDescriptor(r,o);if(void 0!==i){if("value"in i)return i.value;var u=i.get;return void 0===u?void 0:u.call(l)}r=Object.getPrototypeOf(r);if(null===r)return;e=r,t=o,a=l,n=!0,i=void 0}};function l(e){return e&&e.__esModule?e:{default:e}}var u=l(e("react")),s=l(e("pydio")),c=l(e("pydio/util/lang")),f=l(e("../hoc/colorsFromString")),d=l(e("../hoc/asMetaForm")),p=l(e("../MetaClient")),v=e("material-ui"),m=s.default.requireLib("hoc").ModernStyles,n=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(h,u["default"].Component),n(h,[{key:"componentDidMount",value:function(){this.getRealValue(),this.props.editMode&&this.load()}},{key:"componentWillReceiveProps",value:function(e){var t=e.node,a=e.value,n=e.column;t&&t!==this.props.node?this.setState({tags:t.getMetadata().get(n.name)}):a&&this.setState({tags:a}),e.editMode&&!this.state.loaded&&this.load()}},{key:"getRealValue",value:function(){var e=this.props,t=e.node,a=e.value,e=e.column;null==t?this.setState({tags:a}):this.setState({tags:t.getMetadata().get(e.name)})}},{key:"suggestionLoader",value:function(t){var a=this;this.setState({loading:this.state.loading+1}),p.default.getInstance().listTags(this.props.fieldname||this.props.column.name).then(function(e){a.setState({loading:a.state.loading-1}),t(e)})}},{key:"load",value:function(){this.setState({loading:!0}),this.suggestionLoader(function(e){e=e.filter(function(e){return!!e}).map(function(e){return{text:e,value:u.default.createElement(v.MenuItem,null,e)}});this.setState({dataSource:e,loading:!1,loaded:!0})}.bind(this))}},{key:"handleRequestDelete",value:function(e){var t=this,a=this.props.updateValue,n=this.state.tags.split(","),e=n.indexOf(e);n.splice(e,1),this.setState({tags:n.toString()},function(){a(t.state.tags,!0)})}},{key:"handleUpdateInput",value:function(e){this.setState({searchText:e})}},{key:"handleNewRequest",value:function(){var e=this,t=this.state,a=t.searchText,n=t.tags;a&&(t=[],-1<(t=n&&n.split?n.split(","):t).indexOf(a)?this.setState({searchText:""}):(t.push(a),this.setState({searchText:"",tags:t.toString()},function(){(0,e.props.updateValue)(e.state.tags,!0)})))}},{key:"renderChip",value:function(e){var t=(0,f.default)(e),a=t.color,n=t.backgroundColor,t={margin:2,borderRadius:"4px 16px 16px 4px"},a={color:a,fontWeight:500,paddingLeft:10,paddingRight:16};return this.props.editMode?u.default.createElement(v.Chip,{key:e,backgroundColor:n,labelStyle:a,style:t,onRequestDelete:this.handleRequestDelete.bind(this,e)},e):u.default.createElement(v.Chip,{key:e,backgroundColor:n,labelStyle:a,style:t},e)}},{key:"render",value:function(){var t=this,e=this.props,a=e.editMode,n=e.search,r=this.state,o=r.tags,l=r.searchText,e=void 0,r=void 0,e=o&&o.split?o.split(",").map(function(e){return c.default.trim(e," ")}).filter(function(e){return!!e}).map(function(e){return t.renderChip(e)}):u.default.createElement("div",null),r=a?u.default.createElement(v.AutoComplete,i({fullWidth:!0,hintText:s.default.getMessages()["meta.user.10"],searchText:l,onUpdateInput:this.handleUpdateInput.bind(this),onNewRequest:this.handleNewRequest.bind(this),dataSource:this.state.dataSource,filter:function(e,t){return 0===t.toLowerCase().indexOf(e.toLowerCase())},openOnFocus:!0,menuProps:{maxHeight:200},style:{marginBottom:-8},onClose:function(){l&&t.handleNewRequest()}},m.textField)):u.default.createElement("div",null);return u.default.createElement("div",{style:{marginBottom:n?8:null}},u.default.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},e),r)}}]),h);function h(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),o(Object.getPrototypeOf(h.prototype),"constructor",this).call(this,e);var t=this.props,a=t.node,e=t.value,t=t.column;this.state={loading:!1,dataSource:[],tags:a?a.getMetadata().get(t.name):e,searchText:""}}a.default=(0,d.default)(n),t.exports=a.default},{"../MetaClient":3,"../hoc/asMetaForm":17,"../hoc/colorsFromString":18,"material-ui":"material-ui",pydio:"pydio","pydio/util/lang":"pydio/util/lang",react:"react"}],16:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a,n=arguments[t];for(a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=function(e,t,a){return t&&o(e.prototype,t),a&&o(e,a),e};function o(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e){return e&&e.__esModule?e:{default:e}}a.default=function(e){return function(){function t(e){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,a){for(var n=!0;n;){var r=e,o=t,l=a,n=!1;null===r&&(r=Function.prototype);var i=Object.getOwnPropertyDescriptor(r,o);if(void 0!==i){if("value"in i)return i.value;var u=i.get;return void 0===u?void 0:u.call(l)}r=Object.getPrototypeOf(r);if(null===r)return;e=r,t=o,a=l,n=!0,i=void 0}}(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={value:this.props.value||0,configs:new Map,getRealValue:function(){var e=a.props,t=e.node,e=e.column;return t.getMetadata().get(e.name)}}}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["default"].Component),r(t,[{key:"componentDidMount",value:function(){var t=this;u.default.getInstance().loadConfigs().then(function(e){t.setState({configs:e})})}},{key:"render",value:function(){return i.default.createElement(e,n({},this.props,this.state))}}]),t}()};var i=l(e("react")),u=l(e("../MetaClient"));t.exports=a.default},{"../MetaClient":3,react:"react"}],17:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a,n=arguments[t];for(a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=function(e,t,a){return t&&o(e.prototype,t),a&&o(e,a),e};function o(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e){return e&&e.__esModule?e:{default:e}}a.default=function(e){return function(){function t(e){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,a){for(var n=!0;n;){var r=e,o=t,l=a,n=!1;null===r&&(r=Function.prototype);var i=Object.getOwnPropertyDescriptor(r,o);if(void 0!==i){if("value"in i)return i.value;var u=i.get;return void 0===u?void 0:u.call(l)}r=Object.getPrototypeOf(r);if(null===r)return;e=r,t=o,a=l,n=!0,i=void 0}}(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={value:this.props.value||"",configs:new Map,getRealValue:function(){var e=a.props,t=e.node,e=e.column;return t.getMetadata().get(e.name)}}}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["default"].Component),r(t,[{key:"updateValue",value:function(e){var t=arguments.length<=1||void 0===arguments[1]||arguments[1];this.setState({value:e});var a=this.props,n=a.fieldname,r=a.onChange,o=a.onValueChange;r?((a={})["ajxp_meta_"+n]=e,r(a,t)):this.props.onValueChange&&o(n,e,t)}},{key:"componentDidMount",value:function(){var t=this;u.default.getInstance().loadConfigs().then(function(e){t.setState({configs:e})})}},{key:"render",value:function(){return i.default.createElement(e,n({},this.props,this.state,{updateValue:this.updateValue.bind(this)}))}}]),t}()};var i=l(e("react")),u=l(e("../MetaClient"));t.exports=a.default},{"../MetaClient":3,react:"react"}],18:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){if(0===e.length)return{};if(s[e])return s[e];var t=0,a=void 0,n=void 0,r=void 0;for(a=0,r=e.length;a<r;a++)n=1e3*e.charCodeAt(a),t=(t<<5)-t+n,t|=0;var o=(16777215&t).toString(16).toUpperCase(),l="00000".substring(0,6-o.length)+o,i=new u.default("#"+l).hsl(),o=i.hue(),l=new u.default({h:o,s:i.saturationl(),l:90}),l={color:new u.default({h:o,s:i.saturationl(),l:40}).string(),backgroundColor:l.string()};return s[e]=l};var n,r=e("color"),u=(n=r)&&n.__esModule?n:{default:n},s={};t.exports=a.default},{color:"color"}],19:[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var r=n(e("./Callbacks")),o=n(e("./Renderer")),l=n(e("./UserMetaPanel")),i=n(e("./InfoPanel")),e=n(e("./UserMetaDialog"));a.Renderer=o.default,a.InfoPanel=i.default,a.Callbacks=r.default,a.UserMetaDialog=e.default,a.UserMetaPanel=l.default},{"./Callbacks":1,"./InfoPanel":2,"./Renderer":4,"./UserMetaDialog":5,"./UserMetaPanel":6}]},{},[19])(19)});