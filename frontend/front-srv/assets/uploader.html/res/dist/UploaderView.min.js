!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).UploaderView=e()}(function(){return function o(r,a,i){function l(n,e){if(!a[n]){if(!r[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(s)return s(n,!0);t=new Error("Cannot find module '"+n+"'");throw t.code="MODULE_NOT_FOUND",t}t=a[n]={exports:{}};r[n][0].call(t.exports,function(e){var t=r[n][1][e];return l(t||e)},t,t.exports,o,r,a,i)}return a[n].exports}for(var s="function"==typeof require&&require,e=0;e<i.length;e++)l(i[e]);return l}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var a=l(e("pydio/lang/observable")),i=l(e("pydio"));function l(e){return e&&e.__esModule?e:{default:e}}function s(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(u,a.default),o(u,[{key:"getId",value:function(){return this._id}},{key:"getParent",value:function(){return this._parent}},{key:"getLabel",value:function(){return this._label.normalize?this._label.normalize("NFC"):this._label}},{key:"updateLabel",value:function(e){this._label=e}},{key:"getFullPath",value:function(){return this._parent.getFullPath()+"/"+this.getLabel()}},{key:"getProgress",value:function(){return this._progress}},{key:"setExists",value:function(){this._exists=!0}},{key:"getExists",value:function(){return this._exists}},{key:"getType",value:function(){return this._type}},{key:"getStatus",value:function(){return this._status}},{key:"setStatus",value:function(e){this._status=e,this.notify("status",e)}},{key:"updateRepositoryId",value:function(e){this._repositoryId=e}},{key:"getRepositoryId",value:function(){return this._repositoryId}},{key:"getErrorMessage",value:function(){return this._errorMessage||""}},{key:"onError",value:function(e){this._errorMessage=e,this.setStatus(u.StatusError)}},{key:"process",value:function(e){this._doProcess(e)}},{key:"abort",value:function(e){this._doAbort&&this._doAbort(e)}},{key:"pause",value:function(){var e;this._doPause&&(e=this._doPause(),this.setStatus(e))}},{key:"resume",value:function(){this._doResume&&(this._doResume(),this.setStatus(u.StatusLoading))}},{key:"addChild",value:function(t){var n=this;this.children.pg[t.getId()]=0,t.observe("progress",function(e){n.children.pg[t.getId()]=e,n.recomputeProgress()})}},{key:"recomputeProgress",value:function(){var e,t=this,n=Object.keys(this.children.pg).map(function(e){return t.children.pg[e]});n.length&&(e=n.reduce(function(e,t){return e+t}),this._progress=e/n.length,this.notify("progress",this._progress))}},{key:"removeChild",value:function(e){e.abort(),e.walk(function(e){e.abort()},function(){return!0},u.TypeFile);var t=e.getId(),n=this.children.folders.indexOf(e),o=this.children.files.indexOf(e),r=!1;-1<n?(this.children.folders=LangUtils.arrayWithout(this.children.folders,n),r=!0):-1<o&&(this.children.files=LangUtils.arrayWithout(this.children.files,o),r=!0),r&&(e.stopObserving("progress"),delete this.children.pg[t],this.recomputeProgress(),this.notify("children"))}},{key:"getChildren",value:function(){return[].concat(s(this.children.folders),s(this.children.files))}},{key:"walk",value:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){return!0},o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:u.TypeBoth,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(e){return!1},e=!1;if(o===u.TypeBoth||o===u.TypeFile)for(var a=this.children.files,i=0;i<a.length;i++){if(r(a[i])){e=!0;break}n(a[i])&&t(a[i])}e||this.children.folders.forEach(function(e){o!==u.TypeFolder&&o!==u.TypeBoth||!n(e)||t(e),r(e)||e.walk(t,n,o,r)})}},{key:"collectWithLimit",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){return!0},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"both",o=[];return this.walk(function(e){o.push(e)},e,n,function(e){return o.length>=t}),o}}]),o=u;function u(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this));o._status=u.StatusNew,o._type=e,o._id=Math.random(),o._errorMessage=null;var r=i.default.getInstance();return o._repositoryId=n?n.getRepositoryId():r.user.activeRepository,o._exists=!1,o._progress=0,o.children={folders:[],files:[],pg:{}},o._targetNode=t,n&&(o._parent=n,(e===u.TypeFolder?n.children.folders:n.children.files).push(o)),o}o.StatusNew="new",o.StatusAnalyze="analyse",o.StatusLoading="loading",o.StatusLoaded="loaded",o.StatusError="error",o.StatusPause="pause",o.StatusCannotPause="cannot-pause",o.StatusMultiPause="multi-pause",o.TypeFolder="folder",o.TypeFile="file",o.TypeBoth="both",n.default=o},{pydio:"pydio","pydio/lang/observable":"pydio/lang/observable"}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var a=s(e("react")),i=s(e("pydio")),l=e("material-ui");function s(e){return e&&e.__esModule?e:{default:e}}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(u,a.default.Component),o(u,[{key:"clear",value:function(e){var t=UploaderModel.Store.getInstance();switch(e){case"all":t.clearAll();break;case"loaded":t.clearStatus("loaded");break;case"error":t.clearStatus("error")}this.props.onDismiss()}},{key:"render",value:function(){var t=this,e=i.default.getMessages();return a.default.createElement(l.Popover,{open:this.props.open,anchorEl:this.props.anchorEl,anchorOrigin:{horizontal:"left",vertical:"bottom"},targetOrigin:{horizontal:"left",vertical:"top"},onRequestClose:function(e){t.props.onDismiss(e)}},a.default.createElement(l.Menu,{style:{width:146},desktop:!0},a.default.createElement(l.Subheader,{style:{lineHeight:"26px"}},e["html_uploader.clear-header"]),a.default.createElement(l.MenuItem,{primaryText:e["html_uploader.clear-finished"],onClick:function(){t.clear("loaded")}}),a.default.createElement(l.MenuItem,{primaryText:e["html_uploader.clear-failed"],onClick:function(){t.clear("error")}}),a.default.createElement(l.MenuItem,{primaryText:e["html_uploader.clear-all"],onClick:function(){t.clear("all")}})))}}]),o=u;function u(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}n.default=o},{"material-ui":"material-ui",pydio:"pydio",react:"react"}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var a=s(e("react")),i=s(e("pydio")),l=e("material-ui");function s(e){return e&&e.__esModule?e:{default:e}}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(u,a.default.Component),o(u,[{key:"cancel",value:function(){this.props.onCancel()}},{key:"submit",value:function(){var e=this.state,t=e.value,e=e.saveValue;this.props.onConfirm(t,e)}},{key:"checkChange",value:function(e,t){this.setState({saveValue:t})}},{key:"radioChange",value:function(e,t){this.setState({value:t})}},{key:"render",value:function(){var e=i.default.getInstance(),t=this.state,n=t.value,t=t.saveValue;return a.default.createElement("div",{style:{position:"absolute",padding:16,fontSize:14,top:49,left:0,right:0,bottom:0,display:"flex",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.7)"}},a.default.createElement(l.Paper,{style:{width:500,padding:16,fontSize:14,margin:"0 auto"},zDepth:2},a.default.createElement("div",null,a.default.createElement("h5",null,e.MessageHash[124]),a.default.createElement(l.RadioButtonGroup,{ref:"group",name:"shipSpeed",defaultSelected:n,onChange:this.radioChange.bind(this)},a.default.createElement(l.RadioButton,{value:"rename-folders",label:e.MessageHash["html_uploader.confirm.rename.all"],style:{paddingBottom:8}}),a.default.createElement(l.RadioButton,{value:"rename",label:e.MessageHash["html_uploader.confirm.rename.merge"],style:{paddingBottom:8}}),a.default.createElement(l.RadioButton,{value:"overwrite",label:e.MessageHash["html_uploader.confirm.overwrite"]}))),a.default.createElement("div",{style:{display:"flex",marginTop:30,alignItems:"center"}},a.default.createElement(l.Checkbox,{label:e.MessageHash["html_uploader.confirm.save.choice"],checked:t,onCheck:this.checkChange.bind(this)}),a.default.createElement("span",{style:{flex:1}}),a.default.createElement(l.FlatButton,{label:e.MessageHash[54],onClick:this.cancel.bind(this)}),a.default.createElement(l.RaisedButton,{primary:!0,label:e.MessageHash[48],onClick:this.submit.bind(this)}))))}}]),o=u;function u(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,e));return e.state={value:"rename-folders",saveValue:!1},e}n.default=o},{"material-ui":"material-ui",pydio:"pydio",react:"react"}],4:[function(i,e,l){!function(n){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var e=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e};function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var h=t(i("react")),m=t(i("pydio")),g=t(i("./UploadOptionsPane")),y=t(i("./ClearOptionsPane")),v=t(i("./TransfersList")),b=t(i("./ConfirmExists")),_=i("material-ui");function t(e){return e&&e.__esModule?e:{default:e}}var r=m.default.requireLib("hoc").dropProvider,E=m.default.requireLib("form").FileDropZone,e=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,h.default.Component),e(a,[{key:"componentWillReceiveProps",value:function(e){e.confirmDialog!==this.state.confirmDialog&&this.setState({confirmDialog:e.confirmDialog})}},{key:"componentWillUnmount",value:function(){this._storeObserver&&(UploaderModel.Store.getInstance().stopObserving("update",this._storeObserver),UploaderModel.Store.getInstance().stopObserving("auto_close"))}},{key:"onDrop",value:function(e){var t=m.default.getInstance().getContextHolder().getContextNode();UploaderModel.Store.getInstance().handleDropEventResults(null,e,t)}},{key:"onFolderPicked",value:function(e){var t=m.default.getInstance().getContextHolder().getContextNode();UploaderModel.Store.getInstance().handleFolderPickerResult(e,t)}},{key:"start",value:function(e){e.preventDefault(),UploaderModel.Store.getInstance().resume()}},{key:"pause",value:function(e){UploaderModel.Store.getInstance().pause()}},{key:"openClear",value:function(e){e.preventDefault(),this.setState({showClear:!0,clearAnchorEl:e.currentTarget})}},{key:"toggleOptions",value:function(e){e.preventDefault&&e.preventDefault();var t=this.state,n=t.showOptions,n=void 0!==n&&n;t.currentTarget;this.setState({showOptions:!n,optionsAnchorEl:e.currentTarget})}},{key:"openFilePicker",value:function(e){e.preventDefault(),this.refs.dropzone.open()}},{key:"openFolderPicker",value:function(e){e.preventDefault(),this.refs.dropzone.openFolderPicker()}},{key:"dialogSubmit",value:function(t,e){var n=this.state.configs;UploaderModel.Store.getInstance().getSessions().forEach(function(e){"confirm"===e.getStatus()&&e.prepare(t)}),e&&n.updateOption("upload_existing",t),this.setState({confirmDialog:!1}),m.default.getInstance().getController().fireAction("upload")}},{key:"dialogCancel",value:function(){var t=UploaderModel.Store.getInstance();t.getSessions().forEach(function(e){"confirm"===e.getStatus()&&t.removeSession(e)}),this.setState({confirmDialog:!1}),m.default.getInstance().getController().fireAction("upload")}},{key:"supportsFolder",value:function(){var e=!1,t=n.document.createElement("input");return t.setAttribute("type","file"),"webkitdirectory"in t&&(e=!0),t=null,e}},{key:"render",value:function(){var t=this,e=m.default.getInstance().MessageHash,n=this.props,o=n.showDismiss,r=n.onDismiss,a=this.props.connectDropTarget||function(e){return e},i=this.state,l=i.configs,s=i.showOptions,u=i.optionsAnchorEl,d=i.showClear,c=i.clearAnchorEl,f=i.sessions,n=(i.storeRunning,i.confirmDialog),i=UploaderModel.Store.getInstance(),p=!0;return f.forEach(function(e){e.getChildren().length&&(p=!1)}),a(h.default.createElement("div",{style:{position:"relative",backgroundColor:"#FAFAFA"}},h.default.createElement("div",{style:{position:"relative",display:"flex",alignItems:"center",paddingLeft:16,paddingRight:16,width:"100%"}},h.default.createElement("h3",{style:{marginBottom:16}},e["html_uploader.dialog.title"]),h.default.createElement(_.IconButton,{iconClassName:"mdi mdi-dots-vertical",primary:!0,iconStyle:{fontSize:18},style:{padding:14},tooltip:e["html_uploader.options"],onClick:this.toggleOptions.bind(this)}),h.default.createElement("span",{style:{flex:1}}),h.default.createElement(_.FlatButton,{icon:h.default.createElement(_.FontIcon,{style:{fontSize:16},className:"mdi mdi-play"}),label:e["html_uploader.start"],onClick:this.start.bind(this),primary:!0,disabled:i.isRunning()||!i.hasQueue()}),h.default.createElement(_.FlatButton,{icon:h.default.createElement(_.FontIcon,{style:{fontSize:16},className:"mdi mdi-pause"}),label:e["html_uploader.pause"],onClick:this.pause.bind(this),primary:!0,disabled:!i.isRunning()}),h.default.createElement(_.FlatButton,{icon:h.default.createElement(_.FontIcon,{style:{fontSize:16},className:"mdi mdi-delete"}),label:h.default.createElement("span",null,e["html_uploader.clear"],h.default.createElement("span",{className:"mdi mdi-menu-down"})),onClick:this.openClear.bind(this),primary:!0,disabled:p}),o&&h.default.createElement(_.IconButton,{iconClassName:"mdi mdi-close",style:{padding:14},onClick:function(){return r()}})),h.default.createElement(E,{className:"transparent-dropzone",ref:"dropzone",multiple:!0,enableFolders:!0,supportClick:!1,ignoreNativeDrop:!0,onDrop:this.onDrop.bind(this),onFolderPicked:this.onFolderPicked.bind(this),style:{width:"100%",height:420}},h.default.createElement(v.default,{sessions:f,autoStart:l.getOptionAsBool("DEFAULT_AUTO_START","upload_auto_send"),onDismiss:this.props.onDismiss,store:i,onPickFile:function(e){t.openFilePicker(e)},onPickFolder:this.supportsFolder()?function(e){t.openFolderPicker(e)}:null})),h.default.createElement(g.default,{configs:l,open:s,anchorEl:u,onDismiss:function(e){t.toggleOptions(e)}}),h.default.createElement(y.default,{configs:l,open:d,anchorEl:c,onDismiss:function(){t.setState({showClear:!1,clearAnchorEl:null})}}),n&&h.default.createElement(b.default,{onConfirm:this.dialogSubmit.bind(this),onCancel:this.dialogCancel.bind(this)})))}}]),a);function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e)),n=UploaderModel.Store.getInstance();return t._storeObserver=function(){t.setState({sessions:n.getSessions(),storeRunning:n.isRunning()})},n.observe("update",t._storeObserver),n.observe("auto_close",function(){t.props.onDismiss&&t.props.onDismiss()}),t.state={showOptions:!1,configs:UploaderModel.Configs.getInstance(),sessions:n.getSessions(),storeRunning:n.isRunning(),confirmDialog:e.confirmDialog},t}l.default=e=r(e),l.default=e}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ClearOptionsPane":2,"./ConfirmExists":3,"./TransfersList":6,"./UploadOptionsPane":7,"material-ui":"material-ui",pydio:"pydio",react:"react"}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,o=arguments[t];for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},o=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var P=a(e("pydio")),x=a(e("react")),M=a(e("pydio/util/path")),T=e("material-ui"),I=a(e("../model/StatusItem"));function a(e){return e&&e.__esModule?e:{default:e}}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(F,x.default.Component),o(F,[{key:"componentDidMount",value:function(){var e,t=this,n=this.props.item;this._pgObserver=function(e){t.setState({progress:e})},this._statusObserver=function(e){t.setState({status:e})},n.observe("progress",this._pgObserver),n.observe("status",this._statusObserver),n.observe("children",function(){t.forceUpdate()}),n instanceof UploaderModel.UploadItem&&/\.(jpe?g|png|gif)$/i.test(n.getFile().name)&&(n.previewUrl?this.setState({previewUrl:n.previewUrl}):((e=new FileReader).addEventListener("load",function(){n.previewUrl=e.result,t.setState({previewUrl:e.result})},!1),e.readAsDataURL(n.getFile())))}},{key:"componentWillUnmount",value:function(){var e=this.props.item;e.stopObserving("progress",this._pgObserver),e.stopObserving("status",this._statusObserver)}},{key:"remove",value:function(){var e=this.props.item;e.getParent()&&e.getParent().removeChild(e)}},{key:"abort",value:function(){this.props.item.abort()}},{key:"retry",value:function(){var e=this.props,t=e.item,e=e.store;t.setStatus(I.default.StatusNew),e.processNext()}},{key:"render",value:function(){var e=this,t=this.props,n=t.item,o=t.className,r=t.style,a=t.limit,i=t.level,l=t.extensions,s=t.store,u=this.state,d=u.open,c=u.showAll,f=u.progress,p=u.status,h=u.previewUrl,m=n.getChildren(),g=n instanceof UploaderModel.FolderItem,y=n instanceof UploaderModel.PartItem,v=n instanceof UploaderModel.Session,b=P.default.getMessages(),_={main:C({},r,{fontSize:14,color:"#424242"}),line:{paddingLeft:24*(i-1),display:"flex",alignItems:"center",paddingTop:1<i?10:16,paddingBottom:6,cursor:m.length?"pointer":"default",borderLeft:1===i?"3px solid transparent":""},secondaryLine:{display:"flex",alignItems:"center",opacity:.3,fontSize:11},leftIcon:{display:"inline-block",width:50,textAlign:"center",color:y?"#9e9e9e":"#616161",fontSize:18},previewImage:{display:"inline-block",backgroundColor:"#eee",backgroundSize:"cover",height:32,width:32,borderRadius:"50%"},label:{fontSize:15,fontWeight:g?500:400,color:y?"#9e9e9e":null,fontStyle:y?"italic":null,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",flex:1},errMessage:{color:"#e53935",fontSize:11,flex:2,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},pgBar:{position:"relative"},rightButton:{display:"inline-block",width:48,textAlign:"center",cursor:"pointer",color:"#9e9e9e",fontSize:16},toggleIcon:{color:"#bdbdbd",marginLeft:4}},E=[],w=void 0,k=void 0,O=void 0,t=void 0,u=void 0,r=void 0;m.length&&((d||v&&p!==I.default.StatusAnalyze)&&(E=(c=c?m:m.slice(0,a)).map(function(e){return x.default.createElement(F,{key:e.getId(),item:e,limit:a,level:i+1,extensions:l,store:s})}),m.length>c.length&&E.push(x.default.createElement("div",{style:C({},_.line,{cursor:"pointer",borderLeft:"",paddingLeft:20*i}),onClick:function(){e.setState({showAll:!0})}},x.default.createElement("span",{style:_.leftIcon,className:"mdi mdi-plus-box-outline"}),x.default.createElement("span",{style:{flex:1,fontStyle:"italic"}},b["html_uploader.list.show-more"].replace("%d",m.length-c.length))))),u=function(){e.setState({open:!d})},t=x.default.createElement("span",{onClick:u,style:_.toggleIcon,className:"mdi mdi-chevron-"+(d?"down":"right")})),g?(w="mdi mdi-folder",k=x.default.createElement("span",{className:"mdi mdi-close-circle-outline",onClick:function(){e.remove()}}),100===f&&(r="#4caf50")):y?(w="mdi mdi-package-up",100===f&&(r="#4caf50")):(w="mdi mdi-file",S=M.default.getFileExtension(n.getFullPath()),l.has(S)&&(w="mimefont mdi mdi-"+l.get(S).fontIcon),k=p===I.default.StatusLoading||p===I.default.StatusCannotPause||p===I.default.StatusMultiPause?x.default.createElement("span",{className:"mdi mdi-stop",onClick:function(){return e.abort()}}):p===I.default.StatusError?(r="#e53935",x.default.createElement("span",{className:"mdi mdi-restart",style:{color:"#e53935"},onClick:function(){e.retry()}})):(r="#4caf50",x.default.createElement("span",{className:"mdi mdi-close-circle-outline",onClick:function(){e.remove()}})));var S=M.default.getBasename(n.getFullPath()),f=x.default.createElement(T.LinearProgress,{style:{backgroundColor:"#eeeeee",height:3},color:r,min:0,max:100,value:f,mode:"determinate"});if(v){if(p!==I.default.StatusAnalyze)return x.default.createElement("div",null,E);S=P.default.getMessages()["html_uploader.analyze.step"],t=u=f=null,k=x.default.createElement(T.CircularProgress,{size:16,thickness:2,style:{marginTop:1}})}O=h?x.default.createElement("span",{style:C({},_.leftIcon,{marginTop:-4,marginBottom:-5})},x.default.createElement("div",{style:C({background:"url("+h+")"},_.previewImage)})):x.default.createElement("span",{style:_.leftIcon},x.default.createElement("span",{className:w,style:{display:"block",width:_.previewImage.width,height:_.previewImage.height,lineHeight:_.previewImage.width+"px",backgroundColor:"#ECEFF1",borderRadius:"50%",marginLeft:6}})),h=void 0,w=C({},_.secondaryLine),y=g?"dir":y?"part":"file";return"error"===p?(w.opacity=1,h=x.default.createElement("span",{style:_.errMessage,title:n.getErrorMessage()},n.getErrorMessage())):(h=b["html_uploader.status."+y+"."+p]||b["html_uploader.status."+p]||p,n.getSize&&(h=n.getHumanSize()+" - "+h)),x.default.createElement("div",{style:_.main,className:"upload-"+p+" "+(o||"")},x.default.createElement("div",{style:_.line},O,x.default.createElement("div",{style:{flex:1,overflow:"hidden",paddingLeft:4}},x.default.createElement("div",{onClick:u,style:_.label},S," ",t),x.default.createElement("div",{style:w},h),x.default.createElement("div",{style:_.pgBar},f)),x.default.createElement("span",{style:_.rightButton},k)),E)}}]),o=F;function F(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,F);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(F.__proto__||Object.getPrototypeOf(F)).call(this,e));return t.state={open:!1,showAll:!1,status:e.item.getStatus(),previewUrl:null,progress:e.item.getProgress()||0},t}n.default=o},{"../model/StatusItem":1,"material-ui":"material-ui",pydio:"pydio","pydio/util/path":"pydio/util/path",react:"react"}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var u=i(e("react")),d=i(e("pydio")),c=i(e("./Transfer")),a=e("material-ui/styles"),f=i(e("pydio/util/dom"));function i(e){return e&&e.__esModule?e:{default:e}}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(l,u.default.Component),o(l,[{key:"render",value:function(){var t,n,e=this.props,o=e.sessions,r=e.store,a=(e.muiTheme,e.onPickFile),i=e.onPickFolder,l=f.default.getBeziersTransition().replace("all ","color "),s=d.default.getMessages(),e=void 0;o&&(t=!0,n=d.default.getInstance().Registry.getFilesExtensions(),o=o.map(function(e){return e.getChildren().length&&(t=!1),u.default.createElement(c.default,{item:e,store:r,style:{},limit:10,level:0,extensions:n})}),t||(e=u.default.createElement("div",{style:{height:"100%",overflowY:"auto",padding:10,paddingBottom:20}},o)));s=u.default.createElement("div",{style:{display:"flex",alignItems:"center",height:"100%",width:"100%",backgroundColor:"#F5F5F5",transition:l},className:"drop-transfer-list"},u.default.createElement("div",{style:{textAlign:"center",width:"100%",fontWeight:500,fontSize:18,padding:24,lineHeight:"28px"}},u.default.createElement("div",{className:"mdi mdi-cloud-upload",style:{fontSize:110}}),u.default.createElement("div",null,s["html_uploader.drophere"]," ",s["html_uploader.drop-or"]," ",u.default.createElement("a",{onClick:a},s["html_uploader.drop-pick-file"]),i&&u.default.createElement("span",null," ",s["html_uploader.drop-or"]," ",u.default.createElement("a",{onClick:i},s["html_uploader.drop-pick-folder"])))),u.default.createElement("style",{type:"text/css",dangerouslySetInnerHTML:{__html:"\n            .drop-transfer-list{\n                color:rgba(3, 169, 244, 0.5);\n            }\n            .transparent-dropzone.active .drop-transfer-list{\n                color:rgba(3, 169, 244, 0.8);\n            }\n            .drop-transfer-list a,.drop-transfer-list a:hover {\n                color:rgba(3, 169, 244, 1);\n                cursor: pointer;\n            }\n        "}}));return u.default.createElement("div",{style:{display:"flex",height:"100%",overflow:"hidden"}},u.default.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%"}},s),e&&u.default.createElement("div",{style:{width:420,minWidth:420,maxWidth:420}},e))}}]),o=l;function l(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,e))}n.default=o=(0,a.muiThemeable)()(o),n.default=o},{"./Transfer":5,"material-ui/styles":"material-ui/styles",pydio:"pydio","pydio/util/dom":"pydio/util/dom",react:"react"}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var a=s(e("react")),i=s(e("pydio")),l=e("material-ui");function s(e){return e&&e.__esModule?e:{default:e}}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(u,a.default.Component),o(u,[{key:"updateField",value:function(e,t){var n,o=this.props.configs;"autostart"===e?(n=!(n=o.getOptionAsBool("DEFAULT_AUTO_START","upload_auto_send",!0)),o.updateOption("upload_auto_send",n,!0)):"autoclose"===e?(n=!(n=o.getOptionAsBool("DEFAULT_AUTO_CLOSE","upload_auto_close",!0)),o.updateOption("upload_auto_close",n,!0)):"existing"===e?o.updateOption("upload_existing",t.target.getSelectedValue()):"show_processed"===e&&(e=!(e=o.getOptionAsBool("UPLOAD_SHOW_PROCESSED","upload_show_processed",!1)),o.updateOption("upload_show_processed",e,!0)),this.setState({random:Math.random()})}},{key:"radioChange",value:function(e,t){this.props.configs.updateOption("upload_existing",t),this.setState({random:Math.random()})}},{key:"render",value:function(){var t=this,e=this.props.configs,n=i.default.getInstance(),o=e.getOptionAsBool("DEFAULT_AUTO_START","upload_auto_send"),r=e.getOptionAsBool("DEFAULT_AUTO_CLOSE","upload_auto_close"),e=e.getOption("DEFAULT_EXISTING","upload_existing");return a.default.createElement(l.Popover,{open:this.props.open,anchorEl:this.props.anchorEl,anchorOrigin:{horizontal:"left",vertical:"bottom"},targetOrigin:{horizontal:"left",vertical:"top"},onRequestClose:function(e){t.props.onDismiss(e)}},a.default.createElement("div",{style:{width:320,paddingBottom:6}},a.default.createElement(l.Subheader,null,"Options"),a.default.createElement("div",{style:{padding:"0 16px",marginTop:-6}},a.default.createElement(l.Checkbox,{style:{margin:"8px 0"},checked:o,labelPosition:"right",onCheck:this.updateField.bind(this,"autostart"),label:n.MessageHash[337],labelStyle:{fontSize:14}}),a.default.createElement(l.Checkbox,{style:{margin:"8px 0"},checked:r,labelPosition:"right",onCheck:this.updateField.bind(this,"autoclose"),label:n.MessageHash[338],labelStyle:{fontSize:14}})),a.default.createElement(l.Subheader,null,n.MessageHash["html_uploader.options.existing"]),a.default.createElement("div",{style:{padding:16,fontSize:14,paddingTop:0}},a.default.createElement(l.RadioButtonGroup,{ref:"group",name:"shipSpeed",defaultSelected:e,onChange:this.radioChange.bind(this)},a.default.createElement(l.RadioButton,{value:"alert",label:n.MessageHash["html_uploader.options.existing.alert"],style:{paddingBottom:8}}),a.default.createElement(l.RadioButton,{value:"rename-folders",label:n.MessageHash["html_uploader.options.existing.folders"],style:{paddingBottom:8}}),a.default.createElement(l.RadioButton,{value:"rename",label:n.MessageHash["html_uploader.options.existing.merge"],style:{paddingBottom:8}}),a.default.createElement(l.RadioButton,{value:"overwrite",label:n.MessageHash["html_uploader.options.existing.overwrite"]})))))}}]),o=u;function u(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}n.default=o},{"material-ui":"material-ui",pydio:"pydio",react:"react"}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.TransfersList=n.DropUploader=void 0;var o=r(e("./DropUploader")),e=r(e("./TransfersList"));function r(e){return e&&e.__esModule?e:{default:e}}n.DropUploader=o.default,n.TransfersList=e.default},{"./DropUploader":4,"./TransfersList":6}]},{},[8])(8)});