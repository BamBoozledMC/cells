!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).PydioLibreOffice=e()}(function(){return function n(r,i,u){function a(t,e){if(!i[t]){if(!r[t]){var o="function"==typeof require&&require;if(!e&&o)return o(t,!0);if(c)return c(t,!0);throw(o=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",o}o=i[t]={exports:{}},r[t][0].call(o.exports,function(e){return a(r[t][1][e]||e)},o,o.exports,n,r,i,u)}return i[t].exports}for(var c="function"==typeof require&&require,e=0;e<u.length;e++)a(u[e]);return a}({1:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=function(e,t,o){return t&&r(e.prototype,t),o&&r(e,o),e};function r(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var c=a(e("pydio")),l=a(e("pydio/http/api")),f=e("cells-sdk"),i=a(e("react")),u=e("react-redux");function a(e){return e&&e.__esModule?e:{default:e}}e=c.default.requireLib("hoc").EditorActions,n=(0,u.connect)(null,e)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,i.default.Component),n(s,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.editorModify;e.isActive&&t({fixedToolbar:!0})}},{key:"componentDidMount",value:function(){var t=this,e=this.props.editorModify;this.props.isActive&&e({fixedToolbar:!0}),c.default.getInstance().notify("longtask_starting");var o=c.default.getInstance().getFrontendUrl(),n=("https:"===o.protocol?"wss:":"ws:")+"//"+o.host,r=this.props.node,i=c.default.getInstance(),u=r.hasMetadataInBranch("node_readonly","true")||r.getMetadata().get("content_lock")&&r.getMetadata().get("content_lock")!==i.user.id?"readonly":"edit",e="/wopi/files/"+r.getMetadata().get("uuid"),a=encodeURIComponent(o.protocol+"//"+o.host+e),o=new f.TokenServiceApi(l.default.getRestClient()),e=new f.RestDocumentAccessTokenRequest;e.Path=i.user.getActiveRepositoryObject().getSlug()+r.getPath(),o.generateDocumentAccessToken(e).then(function(e){t.setState({url:"/loleaflet/dist/loleaflet.html?host="+n+"&WOPISrc="+a+"&access_token="+e.AccessToken+"&permission="+u})})}},{key:"componentWillUnmount",value:function(){c.default.getInstance().notify("longtask_finished")}},{key:"render",value:function(){var e=this.state.url;return i.default.createElement("iframe",{src:e,style:{backgroundColor:"white",width:"100%",height:"100%",border:0,flex:1}})}}]),n=s))||n;function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e));return e.state={},e}o.default=n},{"cells-sdk":"cells-sdk",pydio:"pydio","pydio/http/api":"pydio/http/api",react:"react","react-redux":"react-redux"}],2:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=e("./editor");Object.defineProperty(o,"Editor",{enumerable:!0,get:function(){return((e=n)&&e.__esModule?e:{default:e}).default;var e}})},{"./editor":1}]},{},[2])(2)});