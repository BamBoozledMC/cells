!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).PydioPDFJS=e()}(function(){return function r(n,i,a){function u(o,e){if(!i[o]){if(!n[o]){var t="function"==typeof require&&require;if(!e&&t)return t(o,!0);if(l)return l(o,!0);t=new Error("Cannot find module '"+o+"'");throw t.code="MODULE_NOT_FOUND",t}t=i[o]={exports:{}};n[o][0].call(t.exports,function(e){var t=n[o][1][e];return u(t||e)},t,t.exports,r,n,i,a)}return i[o].exports}for(var l="function"==typeof require&&require,e=0;e<a.length;e++)u(a[e]);return u}({1:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e};function n(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(e,t,o){for(var r=!0;r;){var n=e,i=t,a=o,r=!1;null===n&&(n=Function.prototype);var u=Object.getOwnPropertyDescriptor(n,i);if(void 0!==u){if("value"in u)return u.value;var l=u.get;return void 0===l?void 0:l.call(a)}n=Object.getPrototypeOf(n);if(null===n)return;e=n,t=i,o=a,r=!0,u=void 0}};var a,u=e("react"),l=e("pydio/http/resources-manager"),c=(a=l)&&a.__esModule?a:{default:a},r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(f,u.Component),r(f,[{key:"render",value:function(){return this.state.hasImagick?React.createElement(PydioImagick.Badge,this.props):React.createElement("div",{className:"mimefont mdi-file-pdf",style:this.props.mimeFontStyle})}}]),f);function f(e,t){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),i(Object.getPrototypeOf(f.prototype),"constructor",this).call(this,e,t),this.state={hasImagick:!1},e.pydio.Registry.findEditorById("editor.imagick")&&c.default.loadClassesAndApply(["PydioImagick"],function(){o.setState({hasImagick:!0})})}o.default=r,t.exports=o.default},{"pydio/http/resources-manager":"pydio/http/resources-manager",react:"react"}],2:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=PydioHOCs.SelectionControls;o.SelectionControls=r},{}],3:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o,r=arguments[t];for(o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},n=function(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),e};function i(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(e,t,o){for(var r=!0;r;){var n=e,i=t,a=o,r=!1;null===n&&(n=Function.prototype);var u=Object.getOwnPropertyDescriptor(n,i);if(void 0!==u){if("value"in u)return u.value;var l=u.get;return void 0===l?void 0:l.call(a)}n=Object.getPrototypeOf(n);if(null===n)return;e=n,t=i,o=a,r=!0,u=void 0}};function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=u(e("pydio/http/api")),s=u(e("pydio/util/dom")),d=e("react"),p=u(d),y=e("react-redux"),v=PydioHOCs.EditorActions,h=(c(m,d.Component),n(m,[{key:"componentDidMount",value:function(){this.loadNode(this.props)}},{key:"componentWillReceiveProps",value:function(e){e.node!==this.props.node&&this.loadNode(e)}},{key:"loadNode",value:function(e){var t=this,o=e.pydio,r=e.node,n=e.loadThumbnail,i=void 0,e=s.default.getUrlFromBase();e?(i=e).startsWith("http")||i.startsWith("https")||(window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),i=document.location.origin+i):"/"===(i=document.location.href.split("#").shift().split("?").shift())[i.length-1]?i=i.substr(0,i.length-1):-1<i.lastIndexOf("/")&&(i=i.substr(0,i.lastIndexOf("/")));var a="viewer.html";n?a="viewer-thumb.html":o.Parameters.has("MINISITE")&&(a="viewer-minisite.html"),f.default.getClient().buildPresignedGetUrl(r).then(function(e){t.setState({url:"plug/editor.pdfjs/pdfjs/web/"+a+"?file="+encodeURIComponent(e)})})}},{key:"render",value:function(){var e=(this.state||{}).url;return e?p.default.createElement("iframe",r({},this.props,{style:{flex:1,width:"100%",height:"100%",border:0},src:e})):null}}]),m);function m(){l(this,m),a(Object.getPrototypeOf(m.prototype),"constructor",this).apply(this,arguments)}function b(e){return-1<O.mimes.indexOf(e.getAjxpMime())}function g(r){return new Promise(function(e,t){var o=[];r.getParent().getChildren().forEach(function(e){return o.push(e)}),e({selection:o=o.filter(b).sort(function(e,t){return e.getLabel().localeCompare(t.getLabel(),void 0,{numeric:!0})}),currentIndex:o.reduce(function(e,t,o){return t===r&&o||e},0)})})}var O=pydio.Registry.getActiveExtensionByType("editor").filter(function(e){return"editor.pdfjs"===e.id})[0],w=PydioHOCs.withSelection;o.Panel=h;d=function(){function e(){l(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}c(e,p["default"].Component),n(e,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.editorModify;e.isActive&&t({fixedToolbar:!0})}},{key:"render",value:function(){return p.default.createElement(h,this.props)}}]);var t=e;return e=(0,y.connect)(null,v)(e)||e,e=w(g)(e)||e}();o.Editor=d},{"pydio/http/api":"pydio/http/api","pydio/util/dom":"pydio/util/dom",react:"react","react-redux":"react-redux"}],4:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r,n=e("./editor"),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(e("./controls")),a=e("./badge"),e=(r=a)&&r.__esModule?r:{default:r};o.Badge=e.default,o.Editor=n.Editor,o.Panel=n.Panel,o.Controls=i},{"./badge":1,"./controls":2,"./editor":3}]},{},[4])(4)});