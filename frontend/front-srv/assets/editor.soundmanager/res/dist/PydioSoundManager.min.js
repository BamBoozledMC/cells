!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).PydioSoundManager=e()}(function(){return function n(o,i,s){function r(a,e){if(!i[a]){if(!o[a]){var t="function"==typeof require&&require;if(!e&&t)return t(a,!0);if(l)return l(a,!0);t=new Error("Cannot find module '"+a+"'");throw t.code="MODULE_NOT_FOUND",t}t=i[a]={exports:{}};o[a][0].call(t.exports,function(e){var t=o[a][1][e];return r(t||e)},t,t.exports,n,o,i,s)}return i[a].exports}for(var l="function"==typeof require&&require,e=0;e<s.length;e++)r(s[e]);return r}({1:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=function(e,t,a){return t&&o(e.prototype,t),a&&o(e,a),e};function o(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=function(e,t,a){for(var n=!0;n;){var o=e,i=t,s=a,n=!1;null===o&&(o=Function.prototype);var r=Object.getOwnPropertyDescriptor(o,i);if(void 0!==r){if("value"in r)return r.value;var l=r.get;return void 0===l?void 0:l.call(s)}o=Object.getPrototypeOf(o);if(null===o)return;e=o,t=i,a=s,n=!0,r=void 0}};function s(e){return e&&e.__esModule?e:{default:e}}var r=s(e("react")),l=s(e("prop-types")),u=e("soundmanager2"),d=e("../../../sm/360-player/script/360player");u.soundManager.setup({url:"plugins/editor.soundmanager/sm/swf/",debugMode:!0});(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(c,r.default.Component),n(c,[{key:"componentDidMount",value:function(){u.soundManager.onready(d.threeSixtyPlayer.init)}},{key:"componentWillUnmount",value:function(){this.props.onFinish&&(d.threeSixtyPlayer.config.onfinish=null),u.soundManager.stopAll()}},{key:"componentWillReceiveProps",value:function(e){this.props.onFinish&&(d.threeSixtyPlayer.config.onfinish=this.props.onFinish),u.soundManager.onready(d.threeSixtyPlayer.init)}},{key:"render",value:function(){var e="ui360";return this.props.rich&&(e+=" ui360-vis"),r.default.createElement("div",{className:e,style:this.props.style},this.props.children)}}]),n=c;function c(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),i(Object.getPrototypeOf(c.prototype),"constructor",this).call(this,e),d.threeSixtyPlayer.config.autoPlay=e.autoPlay,d.threeSixtyPlayer.config.scaleFont=!navigator.userAgent.match(/msie/i),d.threeSixtyPlayer.config.showHMSTime=!0,d.threeSixtyPlayer.config.useWaveformData=!0,d.threeSixtyPlayer.config.useEQData=!0;e=e.onFinish;e&&(d.threeSixtyPlayer.config.onfinish=e),d.threeSixtyPlayer.config.useWaveformData&&(u.soundManager.flash9Options.useWaveformData=!0),d.threeSixtyPlayer.config.useEQData&&(u.soundManager.flash9Options.useEQData=!0),d.threeSixtyPlayer.config.usePeakData&&(u.soundManager.flash9Options.usePeakData=!0),(d.threeSixtyPlayer.config.useWaveformData||d.threeSixtyPlayer.flash9Options.useEQData||d.threeSixtyPlayer.flash9Options.usePeakData)&&(u.soundManager.preferFlash=!0),window.location.href.match(/hifi/i)&&(d.threeSixtyPlayer.config.useFavIcon=!0),window.location.href.match(/html5/i)&&(u.soundManager.useHTML5Audio=!0)}n.propTypes={threeSixtyPlayer:l.default.object,autoPlay:l.default.bool,rich:l.default.bool.isRequired,onReady:l.default.func},n.defaultProps={autoPlay:!1,rich:!0},a.default=n,t.exports=a.default},{"../../../sm/360-player/script/360player":6,"prop-types":"prop-types",react:"react",soundmanager2:7}],2:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=function(e,t,a){return t&&o(e.prototype,t),a&&o(e,a),e};function o(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=function(e,t,a){for(var n=!0;n;){var o=e,i=t,s=a,n=!1;null===o&&(o=Function.prototype);var r=Object.getOwnPropertyDescriptor(o,i);if(void 0!==r){if("value"in r)return r.value;var l=r.get;return void 0===l?void 0:l.call(s)}o=Object.getPrototypeOf(o);if(null===o)return;e=o,t=i,a=s,n=!0,r=void 0}};function s(e){return e&&e.__esModule?e:{default:e}}var r=e("react"),l=s(r),u=s(e("./Player")),d=s(e("pydio/http/api")),c=new ThreeSixtyPlayer,n=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(f,r.Component),n(f,[{key:"componentDidMount",value:function(){this.loadNode(this.props),c.init()}},{key:"componentWillReceiveProps",value:function(e){e.node!==this.props.node&&this.loadNode(e)}},{key:"loadNode",value:function(e){var t=this,a=e.node;d.default.getClient().buildPresignedGetUrl(a,function(e){t.setState({url:e,mimeType:"audio/"+a.getAjxpMime()})},"audio/"+a.getAjxpMime())}},{key:"render",value:function(){var e=this.state||{},t=e.mimeType,e=e.url;return e?l.default.createElement(u.default,{rich:!1,style:{width:40,height:40,margin:"auto"},onReady:function(){}},l.default.createElement("a",{type:t,href:e})):null}}]),f);function f(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),i(Object.getPrototypeOf(f.prototype),"constructor",this).apply(this,arguments)}a.default=n,t.exports=a.default},{"./Player":1,"pydio/http/api":"pydio/http/api",react:"react"}],3:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=function(e,t,a){return t&&o(e.prototype,t),a&&o(e,a),e};function o(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e){return e&&e.__esModule?e:{default:e}}function s(e){return-1<y.mimes.indexOf(e.getAjxpMime())}function r(n){return new Promise(function(e,t){var a=[];n.getParent().getChildren().forEach(function(e){return a.push(e)}),e({selection:a=a.filter(s).sort(function(e,t){return e.getLabel().localeCompare(t.getLabel(),void 0,{numeric:!0})}),currentIndex:a.reduce(function(e,t,a){return t===n&&a||e},0)})})}var l=i(e("pydio")),u=e("react"),d=i(u),c=e("react-redux"),f=(e("redux"),e("material-ui")),h=i(e("./Player")),p=e("pydio/http/api"),e=l.default.requireLib("hoc"),m=e.withSelection,g=e.EditorActions,y=(e.withMenu,e.withLoader,e.withErrors,e.withControls,l.default.getInstance().Registry.getActiveExtensionByType("editor").filter(function(e){return"editor.soundmanager"===e.id})[0]),_={container:{margin:"auto",display:"flex",flexDirection:"column",justifyContent:"space-between",flex:1},player:{margin:"auto"},table:{width:320}},l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,a){for(var n=!0;n;){var o=e,i=t,s=a,n=!1;null===o&&(o=Function.prototype);var r=Object.getOwnPropertyDescriptor(o,i);if(void 0!==r){if("value"in r)return r.value;var l=r.get;return void 0===l?void 0:l.call(s)}o=Object.getPrototypeOf(o);if(null===o)return;e=o,t=i,a=s,n=!0,r=void 0}}(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,u.Component),n(e,[{key:"componentDidMount",value:function(){this.loadNode(this.props);var e=this.props.editorModify;this.props.isActive&&e({fixedToolbar:!1})}},{key:"componentWillReceiveProps",value:function(e){var t=this,a=this.props.editorModify;e.isActive&&a({fixedToolbar:!1}),e.node!==this.props.node&&this.setState({url:""},function(){t.loadNode(e)})}},{key:"loadNode",value:function(e){var t=this,a=e.node;p.getClient().buildPresignedGetUrl(a,function(e){t.setState({node:a,url:e,mimeType:"audio/"+a.getAjxpMime()})},"audio/"+a.getAjxpMime())}},{key:"playNext",value:function(){var e=this.props.selection,t=this.state.node,t=e.selection.indexOf(t);t<e.selection.length-1&&this.onRowSelection([t+1])}},{key:"onRowSelection",value:function(e){var t,a=this;!e.length||(t=this.props.selection)&&this.setState({url:null},function(){a.loadNode({node:t.selection[e[0]]})})}},{key:"render",value:function(){var t=this,e=this.state||{},a=e.mimeType,n=e.url,o=e.node;return d.default.createElement("div",{style:_.container},d.default.createElement(f.Paper,{zDepth:3,style:_.player},d.default.createElement("div",{style:{padding:"0 60px"}},n&&d.default.createElement(h.default,{autoPlay:!0,rich:!this.props.icon&&this.props.rich,onReady:this.props.onLoad,onFinish:function(){t.playNext()}},d.default.createElement("a",{type:a,href:n}))),d.default.createElement("div",{style:{clear:"both"}},d.default.createElement(f.Table,{style:_.table,selectable:!0,multiSelectable:!1,height:250,onRowSelection:function(e){t.onRowSelection(e)}},d.default.createElement(f.TableBody,{displayRowCheckbox:!1,stripedRows:!1,deselectOnClickaway:!1},this.props.selection&&this.props.selection.selection.map(function(e,t){return d.default.createElement(f.TableRow,{key:t},d.default.createElement(f.TableRowColumn,{style:{width:16,backgroundColor:"white"}},o&&e.getPath()===o.getPath()?d.default.createElement("span",{className:"mdi mdi-play"}):t),d.default.createElement(f.TableRowColumn,{style:{backgroundColor:"white"}},e.getLabel()))}))))))}}]);var t=e;return e=(0,c.connect)(null,g)(e)||e,e=m(r)(e)||e}();a.default=l,t.exports=a.default},{"./Player":1,"material-ui":"material-ui",pydio:"pydio","pydio/http/api":"pydio/http/api",react:"react","react-redux":"react-redux",redux:"redux"}],4:[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e.default:e}Object.defineProperty(a,"__esModule",{value:!0});var o=e("./badge");a.Badge=n(o);o=e("./preview");a.Panel=n(o);e=e("./editor");a.Editor=n(e)},{"./badge":2,"./editor":3,"./preview":5}],5:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=function(e,t,a){return t&&o(e.prototype,t),a&&o(e,a),e};function o(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=function(e,t,a){for(var n=!0;n;){var o=e,i=t,s=a,n=!1;null===o&&(o=Function.prototype);var r=Object.getOwnPropertyDescriptor(o,i);if(void 0!==r){if("value"in r)return r.value;var l=r.get;return void 0===l?void 0:l.call(s)}o=Object.getPrototypeOf(o);if(null===o)return;e=o,t=i,a=s,n=!0,r=void 0}};function s(e){return e&&e.__esModule?e:{default:e}}var r=e("react"),l=s(r),u=s(e("./Player")),d=e("pydio/http/api"),n=(new ThreeSixtyPlayer,function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,r.Component),n(c,[{key:"componentDidMount",value:function(){this.loadNode(this.props)}},{key:"componentWillReceiveProps",value:function(e){e.node!==this.props.node&&this.loadNode(e)}},{key:"loadNode",value:function(e){var t=this,e=e.node,a="audio/"+e.getAjxpMime();d.getClient().buildPresignedGetUrl(e,function(e){t.setState({url:e,mimeType:a})},a),this.setState({url:e.getPath(),mimeType:"audio/"+e.getAjxpMime()})}},{key:"render",value:function(){var e=this.state||{},t=e.mimeType,e=e.url;return e?l.default.createElement(u.default,{rich:!0,style:{margin:"auto"},onReady:function(){}},l.default.createElement("a",{type:t,href:e})):null}}]),c);function c(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),i(Object.getPrototypeOf(c.prototype),"constructor",this).apply(this,arguments)}a.default=n,t.exports=a.default},{"./Player":1,"pydio/http/api":"pydio/http/api",react:"react"}],6:[function(e,t,a){var n,y;function o(){var m=this,t=this,g=soundManager,e=navigator.userAgent,h=e.match(/msie/i),u=e.match(/opera/i),d=e.match(/safari/i),a=e.match(/chrome/i),p=(e.match(/firefox/i),e.match(/ipad|iphone/i)),n=void 0===y.G_vmlCanvasManager&&void 0!==document.createElement("canvas").getContext("2d"),o=u||a?359.9:360;this.excludeClass="threesixty-exclude",this.links=[],this.sounds=[],this.soundsByURL={},this.indexByURL={},this.lastSound=null,this.lastTouchedSound=null,this.soundCount=0,this.oUITemplate=null,this.oUIImageMap=null,this.vuMeter=null,this.callbackCount=0,this.peakDataHistory=[],this.config={playNext:!1,autoPlay:!1,allowMultiple:!1,loadRingColor:"#ccc",playRingColor:"#000",backgroundRingColor:"#eee",segmentRingColor:"rgba(255,255,255,0.33)",segmentRingColorAlt:"rgba(0,0,0,0.1)",loadRingColorMetadata:"#ddd",playRingColorMetadata:"rgba(128,192,256,0.9)",circleDiameter:null,circleRadius:null,animDuration:500,animTransition:y.Animator.tx.bouncy,showHMSTime:!1,scaleFont:!0,useWaveformData:!1,waveformDataColor:"#0099ff",waveformDataDownsample:3,waveformDataOutside:!1,waveformDataConstrain:!1,waveformDataLineRatio:.64,useEQData:!1,eqDataColor:"#339933",eqDataDownsample:4,eqDataOutside:!0,eqDataLineRatio:.54,usePeakData:!0,peakDataColor:"#ff33ff",peakDataOutside:!0,peakDataLineRatio:.5,useAmplifier:!0,fontSizeMax:null,useFavIcon:!1},this.css={sDefault:"sm2_link",sBuffering:"sm2_buffering",sPlaying:"sm2_playing",sPaused:"sm2_paused"},this.addEventHandler=void 0!==y.addEventListener?function(e,t,a){return e.addEventListener(t,a,!1)}:function(e,t,a){e.attachEvent("on"+t,a)},this.removeEventHandler=void 0!==y.removeEventListener?function(e,t,a){return e.removeEventListener(t,a,!1)}:function(e,t,a){return e.detachEvent("on"+t,a)},this.hasClass=function(e,t){return void 0!==e.className&&e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},this.addClass=function(e,t){if(!e||!t||m.hasClass(e,t))return!1;e.className=(e.className?e.className+" ":"")+t},this.removeClass=function(e,t){if(!e||!t||!m.hasClass(e,t))return!1;e.className=e.className.replace(new RegExp("( "+t+")|("+t+")","g"),"")},this.getElementsByClassName=function(e,t,a){var n,o,i=a||document,s=[],r=[];if(void 0!==t&&"string"!=typeof t)for(n=t.length;n--;)r&&r[t[n]]||(r[t[n]]=i.getElementsByTagName(t[n]));else r=t?i.getElementsByTagName(t):i.all||i.getElementsByTagName("*");if("string"!=typeof t)for(n=t.length;n--;)for(o=r[t[n]].length;o--;)m.hasClass(r[t[n]][o],e)&&s.push(r[t[n]][o]);else for(n=0;n<r.length;n++)m.hasClass(r[n],e)&&s.push(r[n]);return s},this.getParentByNodeName=function(e,t){if(!e||!t)return!1;for(t=t.toLowerCase();e.parentNode&&t!==e.parentNode.nodeName.toLowerCase();)e=e.parentNode;return e.parentNode&&t===e.parentNode.nodeName.toLowerCase()?e.parentNode:null},this.getParentByClassName=function(e,t){if(!e||!t)return!1;for(;e.parentNode&&!m.hasClass(e.parentNode,t);)e=e.parentNode;return e.parentNode&&m.hasClass(e.parentNode,t)?e.parentNode:null},this.getSoundByURL=function(e){return void 0!==m.soundsByURL[e]?m.soundsByURL[e]:null},this.isChildOfNode=function(e,t){if(!e||!e.parentNode)return!1;for(t=t.toLowerCase();e=e.parentNode,e&&e.parentNode&&e.nodeName.toLowerCase()!==t;);return e&&e.nodeName.toLowerCase()===t?e:null},this.isChildOfClass=function(e,t){if(!e||!t)return!1;for(;e.parentNode&&!m.hasClass(e,t);)e=m.findParent(e);return m.hasClass(e,t)},this.findParent=function(e){if(!e||!e.parentNode)return!1;if(2===(e=e.parentNode).nodeType)for(;e&&e.parentNode&&2===e.parentNode.nodeType;)e=e.parentNode;return e},this.getStyle=function(e,t){try{if(e.currentStyle)return e.currentStyle[t];if(y.getComputedStyle)return document.defaultView.getComputedStyle(e,null).getPropertyValue(t)}catch(e){}return null},this.findXY=function(e){for(var t=0,a=0;t+=e.offsetLeft,a+=e.offsetTop,e=e.offsetParent;);return[t,a]},this.getMouseXY=function(e){return e=e||y.event,(e=p&&e.touches?e.touches[0]:e).pageX||e.pageY?[e.pageX,e.pageY]:e.clientX||e.clientY?[e.clientX+m.getScrollLeft(),e.clientY+m.getScrollTop()]:void 0},this.getScrollLeft=function(){return document.body.scrollLeft+document.documentElement.scrollLeft},this.getScrollTop=function(){return document.body.scrollTop+document.documentElement.scrollTop},this.events={play:function(){t.config.onplay&&t.config.onplay(this),t.removeClass(this._360data.oUIBox,this._360data.className),this._360data.className=t.css.sPlaying,t.addClass(this._360data.oUIBox,this._360data.className),m.fanOut(this)},stop:function(){t.config.onstop&&t.config.onstop(this),t.removeClass(this._360data.oUIBox,this._360data.className),this._360data.className="",m.fanIn(this)},pause:function(){t.config.onpause&&t.config.onpause(this),t.removeClass(this._360data.oUIBox,this._360data.className),this._360data.className=t.css.sPaused,t.addClass(this._360data.oUIBox,this._360data.className)},resume:function(){t.config.onresume&&t.config.onresume(this),t.removeClass(this._360data.oUIBox,this._360data.className),this._360data.className=t.css.sPlaying,t.addClass(this._360data.oUIBox,this._360data.className)},finish:function(){var e;t.config.onfinish&&t.config.onfinish(this),t.removeClass(this._360data.oUIBox,this._360data.className),this._360data.className="",this._360data.didFinish=!0,m.fanIn(this),t.config.playNext&&(e=t.indexByURL[this._360data.oLink.href]+1)<t.links.length&&t.handleClick({target:t.links[e]})},whileloading:function(){this.paused&&m.updatePlaying.apply(this)},whileplaying:function(){m.updatePlaying.apply(this),this._360data.fps++},bufferchange:function(){this.isBuffering?t.addClass(this._360data.oUIBox,t.css.sBuffering):t.removeClass(this._360data.oUIBox,t.css.sBuffering)}},this.stopEvent=function(e){return void 0!==e&&void 0!==e.preventDefault?e.preventDefault():void 0!==y.event&&void 0!==y.event.returnValue&&(y.event.returnValue=!1),!1},this.getTheDamnLink=h?function(e){return e&&e.target?e.target:y.event.srcElement}:function(e){return e.target},this.handleClick=function(e){if(1<e.button)return!0;var t,a,n,o,i,s=m.getTheDamnLink(e);return"a"!==s.nodeName.toLowerCase()&&!(s=m.isChildOfNode(s,"a"))||(!m.isChildOfClass(s,"ui360")||(s.getAttribute("href"),!(s.href&&g.canPlayLink(s)&&!m.hasClass(s,m.excludeClass))||(g._writeDebug("handleClick()"),t=s.href,(a=m.getSoundByURL(t))?a===m.lastSound?a.togglePause():(a.togglePause(),g._writeDebug("sound different than last sound: "+m.lastSound.sID),!m.config.allowMultiple&&m.lastSound&&m.stopSound(m.lastSound)):(n=s.parentNode,o=m.getElementsByClassName("ui360-vis","div",n.parentNode).length,a=g.createSound({id:"ui360Sound_"+parseInt(1e7*Math.random()),url:t,onplay:m.events.play,onstop:m.events.stop,onpause:m.events.pause,onresume:m.events.resume,onfinish:m.events.finish,onbufferchange:m.events.bufferchange,whileloading:m.events.whileloading,whileplaying:m.events.whileplaying,useWaveformData:o&&m.config.useWaveformData,useEQData:o&&m.config.useEQData,usePeakData:o&&m.config.usePeakData}),i=parseInt(m.getElementsByClassName("sm2-360ui","div",n)[0].offsetWidth,10),a._360data={oUI360:m.getParentByClassName(s,"ui360"),oLink:s,className:m.css.sPlaying,oUIBox:m.getElementsByClassName("sm2-360ui","div",n)[0],oCanvas:m.getElementsByClassName("sm2-canvas","canvas",n)[0],oButton:m.getElementsByClassName("sm2-360btn","span",n)[0],oTiming:m.getElementsByClassName("sm2-timing","div",n)[0],oCover:m.getElementsByClassName("sm2-cover","div",n)[0],circleDiameter:i,circleRadius:i/2,lastTime:null,didFinish:null,pauseCount:0,radius:0,fontSize:1,fontSizeMax:m.config.fontSizeMax,scaleFont:o&&m.config.scaleFont,showHMSTime:o,amplifier:o&&m.config.usePeakData?.9:1,radiusMax:.175*i,width:0,widthMax:.4*i,lastValues:{bytesLoaded:0,bytesTotal:0,position:0,durationEstimate:0},animating:!1,oAnim:new y.Animator({duration:m.config.animDuration,transition:m.config.animTransition,onComplete:function(){}}),oAnimProgress:function(e){var t=this;t._360data.radius=parseInt(t._360data.radiusMax*t._360data.amplifier*e,10),t._360data.width=parseInt(t._360data.widthMax*t._360data.amplifier*e,10),t._360data.scaleFont&&null!==t._360data.fontSizeMax&&(t._360data.oTiming.style.fontSize=parseInt(Math.max(1,t._360data.fontSizeMax*e),10)+"px",t._360data.oTiming.style.opacity=e),!t.paused&&0!==t.playState&&0!==t._360data.lastValues.bytesLoaded&&0!==t._360data.lastValues.position||m.updatePlaying.apply(t)},fps:0},void 0!==m.Metadata&&m.getElementsByClassName("metadata","div",a._360data.oUI360).length&&(a._360data.metadata=new m.Metadata(a,m)),a._360data.scaleFont&&null!==a._360data.fontSizeMax&&(a._360data.oTiming.style.fontSize="1px"),a._360data.oAnim.addSubject(a._360data.oAnimProgress,a),m.refreshCoords(a),m.updatePlaying.apply(a),m.soundsByURL[t]=a,m.sounds.push(a),!m.config.allowMultiple&&m.lastSound&&m.stopSound(m.lastSound),a.play()),m.lastSound=a,void 0!==e&&void 0!==e.preventDefault?e.preventDefault():void 0!==y.event&&(y.event.returnValue=!1),!1)))},this.fanOut=function(e){var t=e;if(1===t._360data.animating)return!1;t._360data.animating=0,soundManager._writeDebug("fanOut: "+t.sID+": "+t._360data.oLink.href),t._360data.oAnim.seekTo(1),y.setTimeout(function(){t._360data.animating=0},m.config.animDuration+20)},this.fanIn=function(e){var t=e;if(-1===t._360data.animating)return!1;t._360data.animating=-1,soundManager._writeDebug("fanIn: "+t.sID+": "+t._360data.oLink.href),t._360data.oAnim.seekTo(0),y.setTimeout(function(){t._360data.didFinish=!1,t._360data.animating=0,m.resetLastValues(t)},m.config.animDuration+20)},this.resetLastValues=function(e){e._360data.lastValues.position=0},this.refreshCoords=function(e){e._360data.canvasXY=m.findXY(e._360data.oCanvas),e._360data.canvasMid=[e._360data.circleRadius,e._360data.circleRadius],e._360data.canvasMidXY=[e._360data.canvasXY[0]+e._360data.canvasMid[0],e._360data.canvasXY[1]+e._360data.canvasMid[1]]},this.stopSound=function(e){soundManager._writeDebug("stopSound: "+e.sID),soundManager.stop(e.sID),p||soundManager.unload(e.sID)},this.buttonClick=function(e){e=e?e.target||e.srcElement:y.event.srcElement;return m.handleClick({target:m.getParentByClassName(e,"sm2-360ui").nextSibling}),!1},this.buttonMouseDown=function(e){return p?m.addEventHandler(document,"touchmove",m.mouseDown):document.onmousemove=function(e){m.mouseDown(e)},m.stopEvent(e),!1},this.mouseDown=function(e){if(!p&&1<e.button)return!0;if(!m.lastSound)return m.stopEvent(e),!1;var t=e||y.event,t=(t=p&&t.touches?t.touches[0]:t).target||t.srcElement,t=m.getSoundByURL(m.getElementsByClassName("sm2_link","a",m.getParentByClassName(t,"ui360"))[0].href);return m.lastTouchedSound=t,m.refreshCoords(t),t=t._360data,m.addClass(t.oUIBox,"sm2_dragging"),t.pauseCount=m.lastTouchedSound.paused?1:0,m.mmh(e||y.event),p?(m.removeEventHandler(document,"touchmove",m.mouseDown),m.addEventHandler(document,"touchmove",m.mmh),m.addEventHandler(document,"touchend",m.mouseUp)):(document.onmousemove=m.mmh,document.onmouseup=m.mouseUp),m.stopEvent(e),!1},this.mouseUp=function(e){var t=m.lastTouchedSound._360data;m.removeClass(t.oUIBox,"sm2_dragging"),0===t.pauseCount&&m.lastTouchedSound.resume(),p?(m.removeEventHandler(document,"touchmove",m.mmh),m.removeEventHandler(document,"touchend",m.mouseUP)):(document.onmousemove=null,document.onmouseup=null)},this.mmh=function(e){void 0===e&&(e=y.event);var t=m.lastTouchedSound,a=m.getMouseXY(e),n=a[0],a=a[1],n=n-t._360data.canvasMidXY[0],a=a-t._360data.canvasMidXY[1],a=Math.floor(o-(m.rad2deg(Math.atan2(n,a))+180));return t.setPosition(t.durationEstimate*(a/o)),m.stopEvent(e),!1},this.drawSolidArc=function(e,t,a,n,o,i,s){var r,l=e;e=r=l.getContext?l.getContext("2d"):r,s||m.clearCanvas(l),t&&(r.fillStyle=t),e.beginPath(),isNaN(o)&&(o=0),t=a-n,(!(n=u||d)||n&&0<a)&&(e.arc(0,0,a,i,o,!1),a=m.getArcEndpointCoords(t,o),e.lineTo(a.x,a.y),e.arc(0,0,t,o,i,!0),e.closePath(),e.fill())},this.getArcEndpointCoords=function(e,t){return{x:e*Math.cos(t),y:e*Math.sin(t)}},this.deg2rad=function(e){return e*Math.PI/180},this.rad2deg=function(e){return 180*e/Math.PI},this.getTime=function(e,t){var a=Math.floor(e/1e3),e=Math.floor(a/60),a=a-60*e;return t?e+":"+(a<10?"0"+a:a):{min:e,sec:a}},this.clearCanvas=function(e){var t=e,a=null;t.getContext&&(a=t.getContext("2d")),e=t.offsetWidth,t=t.offsetHeight,a.clearRect(-e/2,-t/2,e,t)},this.updatePlaying=function(){var e=this._360data.showHMSTime?m.getTime(this.position,!0):parseInt(this.position/1e3,10);this.bytesLoaded&&(this._360data.lastValues.bytesLoaded=this.bytesLoaded,this._360data.lastValues.bytesTotal=this.bytesTotal),this.position&&(this._360data.lastValues.position=this.position),this.durationEstimate&&(this._360data.lastValues.durationEstimate=this.durationEstimate),m.drawSolidArc(this._360data.oCanvas,m.config.backgroundRingColor,this._360data.width,this._360data.radius,m.deg2rad(o),!1),m.drawSolidArc(this._360data.oCanvas,this._360data.metadata?m.config.loadRingColorMetadata:m.config.loadRingColor,this._360data.width,this._360data.radius,m.deg2rad(o*(this._360data.lastValues.bytesLoaded/this._360data.lastValues.bytesTotal)),0,!0),0!==this._360data.lastValues.position&&m.drawSolidArc(this._360data.oCanvas,this._360data.metadata?m.config.playRingColorMetadata:m.config.playRingColor,this._360data.width,this._360data.radius,m.deg2rad(1===this._360data.didFinish?o:o*(this._360data.lastValues.position/this._360data.lastValues.durationEstimate)),0,!0),this._360data.metadata&&this._360data.metadata.events.whileplaying(),e!==this._360data.lastTime&&(this._360data.lastTime=e,this._360data.oTiming.innerHTML=e),(this.instanceOptions.useWaveformData||this.instanceOptions.useEQData)&&n&&m.updateWaveform(this),m.config.useFavIcon&&m.vuMeter&&m.vuMeter.updateVU(this)},this.updateWaveform=function(e){if(!m.config.useWaveformData&&!m.config.useEQData||!g.features.waveformData&&!g.features.eqData)return!1;if(!e.waveformData.left.length&&!e.eqData.length&&!e.peakData.left)return!1;e._360data.oCanvas.getContext("2d");var t,a,n,o,i,s,r,l,u,d,c,f,h=parseInt(e._360data.circleDiameter/2,10),p=h/2;if(m.config.useWaveformData)for(n=m.config.waveformDataDownsample,o=256/(n=Math.max(1,n)),s=i=0,r=null,l=m.config.waveformDataOutside?1:m.config.waveformDataConstrain?.5:.565,p=m.config.waveformDataOutside?.7:.75,u=m.deg2rad(360/o*m.config.waveformDataLineRatio),t=0;t<256;t+=n)s=(i=m.deg2rad(t/o*1/n*360))+u,(r=e.waveformData.left[t])<0&&m.config.waveformDataConstrain&&(r=Math.abs(r)),m.drawSolidArc(e._360data.oCanvas,m.config.waveformDataColor,e._360data.width*l,e._360data.radius*p*1.25*r,s,i,!0);if(m.config.useEQData)for(n=m.config.eqDataDownsample,o=(d=192)/(n=Math.max(1,n)),l=m.config.eqDataOutside?1:.565,a=m.config.eqDataOutside?-1:1,p=m.config.eqDataOutside?.5:.75,s=i=0,u=m.deg2rad(360/o*m.config.eqDataLineRatio),c=m.deg2rad(1===e._360data.didFinish?360:e._360data.lastValues.position/e._360data.lastValues.durationEstimate*360),t=0;t<d;t+=n)s=(i=m.deg2rad(t/d*360))+u,m.drawSolidArc(e._360data.oCanvas,c<s?m.config.eqDataColor:m.config.playRingColor,e._360data.width*l,e._360data.radius*p*(e.eqData.left[t]*a),s,i,!0);if(m.config.usePeakData&&!e._360data.animating){for(f=e.peakData.left||e.peakData.right,d=3,t=0;t<d;t++)f=f||e.eqData[t];e._360data.amplifier=m.config.useAmplifier?.9+.1*f:1,e._360data.radiusMax=.175*e._360data.circleDiameter*e._360data.amplifier,e._360data.widthMax=.4*e._360data.circleDiameter*e._360data.amplifier,e._360data.radius=parseInt(e._360data.radiusMax*e._360data.amplifier,10),e._360data.width=parseInt(e._360data.widthMax*e._360data.amplifier,10)}},this.getUIHTML=function(e){return['<canvas class="sm2-canvas" width="'+e+'" height="'+e+'"></canvas>',' <span class="sm2-360btn sm2-360btn-default"></span>',' <div class="sm2-timing'+(navigator.userAgent.match(/safari/i)?" alignTweak":"")+'"></div>',' <div class="sm2-cover"></div>']},this.uiTest=function(e){var t,a,n,o,i,s=document.createElement("div");return s.className="sm2-360ui",(t=document.createElement("div")).className="ui360"+(e?" "+e:""),a=t.appendChild(s.cloneNode(!0)),t.style.position="absolute",t.style.left="-9999px",n=document.body.appendChild(t),i=a.offsetWidth,o=m.getUIHTML(i),a.innerHTML=o[1]+o[2]+o[3],e=parseInt(a.offsetWidth,10),s=parseInt(e/2,10),i=m.getElementsByClassName("sm2-timing","div",n)[0],i=parseInt(m.getStyle(i,"font-size"),10),isNaN(i)&&(i=null),t.parentNode.removeChild(t),t=a=null,{circleDiameter:e,circleRadius:s,fontSizeMax:i}},this.init=function(){var e;g._writeDebug("threeSixtyPlayer.init()");for(var t,a,n,o,i,s,r,l,u=[],d=0,c=0,f=(e=m.config.items||m.getElementsByClassName("ui360","div")).length;c<f;c++)u.push(e[c].getElementsByTagName("a")[0]),e[c].style.backgroundImage="none";for(m.oUITemplate=document.createElement("div"),m.oUITemplate.className="sm2-360ui",m.oUITemplateVis=document.createElement("div"),m.oUITemplateVis.className="sm2-360ui",o=m.uiTest(),m.config.circleDiameter=o.circleDiameter,m.config.circleRadius=o.circleRadius,i=m.uiTest("ui360-vis"),m.config.fontSizeMax=i.fontSizeMax,m.oUITemplate.innerHTML=m.getUIHTML(m.config.circleDiameter).join(""),m.oUITemplateVis.innerHTML=m.getUIHTML(i.circleDiameter).join(""),c=0,f=u.length;c<f;c++)!g.canPlayLink(u[c])||m.hasClass(u[c],m.excludeClass)||m.hasClass(u[c],m.css.sDefault)||(m.addClass(u[c],m.css.sDefault),m.links[d]=u[c],m.indexByURL[u[c].href]=d,d++,a=((t=m.hasClass(u[c].parentNode,"ui360-vis"))?i:o).circleDiameter,n=(t?i:o).circleRadius,s=u[c].parentNode.insertBefore((t?m.oUITemplateVis:m.oUITemplate).cloneNode(!0),u[c]),s=h&&void 0!==y.G_vmlCanvasManager?(u[c].parentNode,(r=document.createElement("canvas")).className="sm2-canvas",l="sm2_canvas_"+parseInt(1048576*Math.random(),10),r.id=l,r.width=a,r.height=a,s.appendChild(r),y.G_vmlCanvasManager.initElement(r),document.getElementById(l)):u[c].parentNode.getElementsByTagName("canvas")[0],r=m.getElementsByClassName("sm2-cover","div",u[c].parentNode)[0],l=u[c].parentNode.getElementsByTagName("span")[0],m.addEventHandler(l,"click",m.buttonClick),p?m.addEventHandler(r,"touchstart",m.mouseDown):m.addEventHandler(r,"mousedown",m.mouseDown),(s=s.getContext("2d")).translate(n,n),s.rotate(m.deg2rad(-90)));0<d&&(m.addEventHandler(document,"click",m.handleClick),m.config.autoPlay&&m.handleClick({target:m.links[0],preventDefault:function(){}})),g._writeDebug("threeSixtyPlayer.init(): Found "+d+" relevant items."),m.config.useFavIcon&&void 0!==this.VUMeter&&(this.vuMeter=new this.VUMeter(this))}}y=window,o.prototype.VUMeter=function(e){var a=e,i=this,n=document.getElementsByTagName("head")[0],t=navigator.userAgent.match(/opera/i),o=navigator.userAgent.match(/firefox/i);this.vuMeterData=[],this.vuDataCanvas=null,this.setPageIcon=function(e){if(!a.config.useFavIcon||!a.config.usePeakData||!e)return!1;var t=document.getElementById("sm2-favicon");t&&(n.removeChild(t),t=null),t||((t=document.createElement("link")).id="sm2-favicon",t.rel="shortcut icon",t.type="image/png",t.href=e,document.getElementsByTagName("head")[0].appendChild(t))},this.resetPageIcon=function(){if(!a.config.useFavIcon)return!1;var e=document.getElementById("favicon");e&&(e.href="/favicon.ico")},this.updateVU=function(e){9<=soundManager.flashVersion&&a.config.useFavIcon&&a.config.usePeakData&&i.setPageIcon(i.vuMeterData[parseInt(16*e.peakData.left,10)][parseInt(16*e.peakData.right,10)])},this.createVUData=function(){var e=0,t=0,a=i.vuDataCanvas.getContext("2d"),n=a.createLinearGradient(0,16,0,0),o=a.createLinearGradient(0,16,0,0);for(n.addColorStop(0,"rgb(0,192,0)"),n.addColorStop(.3,"rgb(0,255,0)"),n.addColorStop(.625,"rgb(255,255,0)"),n.addColorStop(.85,"rgb(255,0,0)"),o.addColorStop(0,"rgba(0,0,0,0.2)"),o.addColorStop(1,"rgba(0,0,0,0.5)"),e=0;e<16;e++)i.vuMeterData[e]=[];for(e=0;e<16;e++)for(t=0;t<16;t++)i.vuDataCanvas.setAttribute("width",16),i.vuDataCanvas.setAttribute("height",16),a.fillStyle=o,a.fillRect(0,0,7,15),a.fillRect(8,0,7,15),a.fillStyle=n,a.fillRect(0,15-e,7,16-(16-e)),a.fillRect(8,15-t,7,16-(16-t)),a.clearRect(0,3,16,1),a.clearRect(0,7,16,1),a.clearRect(0,11,16,1),i.vuMeterData[e][t]=i.vuDataCanvas.toDataURL("image/png")},this.testCanvas=function(){var e=document.createElement("canvas");if(!e||void 0===e.getContext)return null;if(!e.getContext("2d")||"function"!=typeof e.toDataURL)return null;try{e.toDataURL("image/png")}catch(e){return null}return e},this.init=function(){a.config.useFavIcon&&(i.vuDataCanvas=i.testCanvas(),i.vuDataCanvas&&(o||t)?i.createVUData():a.config.useFavIcon=!1)},this.init()},o.prototype.Metadata=function(r,l){soundManager._wD("Metadata()");var e,u=this,t=r._360data.oUI360,a=t.getElementsByTagName("ul")[0].getElementsByTagName("li");navigator.userAgent.match(/firefox/i);for(this.lastWPExec=0,this.refreshInterval=250,this.totalTime=0,this.events={whileplaying:function(){for(var e,t,a=r._360data.width,n=r._360data.radius,o=r.durationEstimate||1e3*u.totalTime,i=0,s=u.data.length;i<s;i++)e=i%2==0,l.drawSolidArc(r._360data.oCanvas,e?l.config.segmentRingColorAlt:l.config.segmentRingColor,a,n/2,l.deg2rad(u.data[i].endTimeMS/o*360),l.deg2rad((u.data[i].startTimeMS||1)/o*360),!0);(t=new Date)-u.lastWPExec>u.refreshInterval&&(u.refresh(),u.lastWPExec=t)}},this.refresh=function(){for(var e=null,t=r.position,a=r._360data.metadata.data,n=0,o=a.length;n<o;n++)if(t>=a[n].startTimeMS&&t<=a[n].endTimeMS){e=n;break}e!==a.currentItem&&e<a.length&&(r._360data.oLink.innerHTML=a.mainTitle+' <span class="metadata"><span class="sm2_divider"> | </span><span class="sm2_metadata">'+a[e].title+"</span></span>",a.currentItem=e)},this.strToTime=function(e){for(var t=e.split(":"),a=0,n=t.length;n--;)a+=parseInt(t[n],10)*Math.pow(60,t.length-1-n);return a},this.data=[],this.data.givenDuration=null,this.data.currentItem=null,this.data.mainTitle=r._360data.oLink.innerHTML,e=0;e<a.length;e++)this.data[e]={o:null,title:a[e].getElementsByTagName("p")[0].innerHTML,startTime:a[e].getElementsByTagName("span")[0].innerHTML,startSeconds:u.strToTime(a[e].getElementsByTagName("span")[0].innerHTML.replace(/[()]/g,"")),duration:0,durationMS:null,startTimeMS:null,endTimeMS:null,oNote:null};for(t=l.getElementsByClassName("duration","div",t),this.data.givenDuration=t.length?1e3*u.strToTime(t[0].innerHTML):0,e=0;e<this.data.length;e++)this.data[e].duration=parseInt(this.data[e+1]?this.data[e+1].startSeconds:(u.data.givenDuration||r.durationEstimate)/1e3,10)-this.data[e].startSeconds,this.data[e].startTimeMS=1e3*this.data[e].startSeconds,this.data[e].durationMS=1e3*this.data[e].duration,this.data[e].endTimeMS=this.data[e].startTimeMS+this.data[e].durationMS,this.totalTime+=this.data[e].duration},navigator.userAgent.match(/webkit/i)&&navigator.userAgent.match(/mobile/i)&&(soundManager.useHTML5Audio=!0),soundManager.debugMode=!1,soundManager.consoleOnly=!0,soundManager.flashVersion=9,soundManager.useHighPerformance=!0,soundManager.useFlashBlock=!0,soundManager.flashLoadTimeout=0,soundManager.debugMode&&y.setInterval(function(){var e=y.threeSixtyPlayer;e&&e.lastSound&&e.lastSound._360data.fps&&void 0===y.isHome&&(soundManager._writeDebug("fps: ~"+e.lastSound._360data.fps),e.lastSound._360data.fps=0)},1e3),void 0!==y.SM2_DEFER&&SM2_DEFER||(n=new o),"object"==typeof t&&t&&"object"==typeof t.exports&&(t.exports.ThreeSixtyPlayer=o,t.exports.threeSixtyPlayer=n),y.ThreeSixtyPlayer=o,y.threeSixtyPlayer=n},{}],7:[function(e,a,t){!function(ht,pt){"use strict";if(!ht||!ht.document)throw new Error("SoundManager requires a browser with window and document objects.");var e=null;function t(e,t){this.setupOptions={url:e||null,flashVersion:8,debugMode:!0,debugFlash:!1,useConsole:!0,consoleOnly:!0,waitForWindowLoad:!1,bgColor:"#ffffff",useHighPerformance:!1,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1e3,wmode:null,allowScriptAccess:"always",useFlashBlock:!1,useHTML5Audio:!0,forceUseGlobalHTML5Audio:!1,ignoreMobileRestrictions:!1,html5Test:/^(probably|maybe)$/i,preferFlash:!1,noSWFCache:!1,idPrefix:"sound"},this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100},this.flash9Options={isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null},this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null},this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a","m4b"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},opus:{type:["audio/ogg; codecs=opus","audio/opus"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1}},this.movieID="sm2-container",this.id=t||"sm2movie",this.debugID="soundmanager-debug",this.debugURLParam=/([#?&])debug=1/i,this.versionNumber="V2.97a.20150601",this.version=null,this.movieURL=null,this.altURL=null,this.swfLoaded=!1,this.enabled=!1,this.oMC=null,this.sounds={},this.soundIDs=[],this.muted=!1,this.didFlashBlock=!1,this.filePattern=null,this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i},this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1},this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null},this.html5={usingFlash:null},this.flash={},this.html5Only=!1,this.ignoreFlash=!1;var r,y,a,n,_,v,w,b,o,D,l,u,i,s,d,c,f,h,M,p,O,m,g,T,P,S,L,C,E,x,I,N,F,k,H,A,R,U,B,j,V,W,q,Q,X,z,Y,G,$,K,J,Z,ee,te,ae,ne,oe,ie,se,re,le,ue,de,ce,fe,he,pe=this,me=null,ge=null,ye="soundManager",_e=ye+": ",ve="HTML5::",we=navigator.userAgent,be=ht.location.href.toString(),De=document,Me=[],Oe=!0,Te=!1,Pe=!1,Se=!1,Le=!1,Ce=!1,Ee=0,xe=["log","info","warn","error"],Ie=null,Ne=null,Fe=!1,ke=!1,He=0,Ae=null,Re=[],Ue=null,Be=Array.prototype.slice,je=!1,Ve=0,We=1e3,qe=we.match(/(ipad|iphone|ipod)/i),Qe=we.match(/android/i),Xe=we.match(/msie/i),ze=we.match(/webkit/i),Ye=we.match(/safari/i)&&!we.match(/chrome/i),Ge=we.match(/opera/i),$e=we.match(/(mobile|pre\/|xoom)/i)||qe||Qe,Ke=!be.match(/usehtml5audio/i)&&!be.match(/sm2\-ignorebadua/i)&&Ye&&!we.match(/silk/i)&&we.match(/OS X 10_6_([3-7])/i),Je=ht.console!==pt&&console.log!==pt,Ze=De.hasFocus!==pt?De.hasFocus():null,et=Ye&&(De.hasFocus===pt||!De.hasFocus()),tt=!et,at=/(mp3|mp4|mpa|m4a|m4b)/i,nt="about:blank",ot=De.location?De.location.protocol.match(/http/i):null,it=ot?"":"http://",st=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i,rt=["mpeg4","aac","flv","mov","mp4","m4v","f4v","m4a","m4b","mp4v","3gp","3g2"],lt=new RegExp("\\.("+rt.join("|")+")(\\?.*)?$","i");function ut(e){return pe.preferFlash&&oe&&!pe.ignoreFlash&&pe.flash[e]!==pt&&pe.flash[e]}function dt(e){var t=Be.call(e),e=t.length;return fe?(t[1]="on"+t[1],3<e&&t.pop()):3===e&&t.push(!1),t}function ct(e,t){var a=e.shift(),t=[he[t]];fe?a[t](e[0],e[1]):a[t].apply(a,e)}function ft(a){return function(e){var t=this._s,e=t&&t._a?a.call(this,e):(t&&t.id?pe._wD(t.id+": Ignoring "+e.type):pe._wD(ve+"Ignoring "+e.type),null);return e}}this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i,this.useAltURL=!ot,R={swfBox:"sm2-object-box",swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfLoaded:"swf_loaded",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"},this.hasHTML5=function(){try{return Audio!==pt&&(Ge&&opera!==pt&&opera.version()<10?new Audio(null):new Audio).canPlayType!==pt}catch(e){return!1}}(),this.setup=function(e){var t=!pe.url;return e!==pt&&Se&&Ue&&pe.ok()&&(e.flashVersion!==pt||e.url!==pt||e.html5Test!==pt)&&V(k("setupLate")),l(e),je||($e?pe.setupOptions.ignoreMobileRestrictions&&!pe.setupOptions.forceUseGlobalHTML5Audio||(Re.push(O.globalHTML5),je=!0):pe.setupOptions.forceUseGlobalHTML5Audio&&(Re.push(O.globalHTML5),je=!0)),!ce&&$e&&(pe.setupOptions.ignoreMobileRestrictions?Re.push(O.ignoreMobile):(pe.setupOptions.useHTML5Audio&&!pe.setupOptions.preferFlash||pe._wD(O.mobileUA),pe.setupOptions.useHTML5Audio=!0,pe.setupOptions.preferFlash=!1,qe?pe.ignoreFlash=!0:(!Qe||we.match(/android\s2\.3/i))&&Qe||(pe._wD(O.globalHTML5),je=!0))),e&&(t&&P&&e.url!==pt&&pe.beginDelayedInit(),P||e.url===pt||"complete"!==De.readyState||setTimeout(g,1)),ce=!0,pe},this.ok=function(){return Ue?Se&&!Le:pe.useHTML5Audio&&pe.hasHTML5},this.supported=this.ok,this.getMovie=function(e){return y(e)||De[e]||ht[e]},this.createSound=function(e,t){var a,n=null,o=ye+".createSound(): ",i=o+k(Se?"notOK":"notReady");if(!Se||!pe.ok())return V(i),!1;if((a=D(e=t!==pt?{id:e,url:t}:e)).url=z(a.url),a.id===pt&&(a.id=pe.setupOptions.idPrefix+Ve++),a.id.toString().charAt(0).match(/^[0-9]$/)&&pe._wD(o+k("badID",a.id),2),pe._wD(o+a.id+(a.url?" ("+a.url+")":""),1),W(a.id,!0))return pe._wD(o+a.id+" exists",1),pe.sounds[a.id];function s(){return a=B(a),pe.sounds[a.id]=new r(a),pe.soundIDs.push(a.id),pe.sounds[a.id]}if($(a))n=s(),pe.html5Only||pe._wD(a.id+": Using HTML5"),n._setup_html5(a);else{if(pe.html5Only)return pe._wD(a.id+": No HTML5 support for this sound, and no Flash. Exiting."),s();if(pe.html5.usingFlash&&a.url&&a.url.match(/data\:/i))return pe._wD(a.id+": data: URIs not supported via Flash. Exiting."),s();8<v&&(null===a.isMovieStar&&(a.isMovieStar=!!(a.serverURL||a.type&&a.type.match(st)||a.url&&a.url.match(lt))),a.isMovieStar&&(pe._wD(o+"using MovieStar handling"),1<a.loops&&b("noNSLoop"))),a=j(a,o),n=s(),8===v?ge._createSound(a.id,a.loops||1,a.usePolicyFile):(ge._createSound(a.id,a.url,a.usePeakData,a.useWaveformData,a.useEQData,a.isMovieStar,!!a.isMovieStar&&a.bufferTime,a.loops||1,a.serverURL,a.duration||null,a.autoPlay,!0,a.autoLoad,a.usePolicyFile),a.serverURL||(n.connected=!0,a.onconnect&&a.onconnect.apply(n))),a.serverURL||!a.autoLoad&&!a.autoPlay||n.load(a)}return!a.serverURL&&a.autoPlay&&n.play(),n},this.destroySound=function(e,t){if(!W(e))return!1;var a,n=pe.sounds[e];for(n.stop(),n._iO={},n.unload(),a=0;a<pe.soundIDs.length;a++)if(pe.soundIDs[a]===e){pe.soundIDs.splice(a,1);break}return t||n.destruct(!0),n=null,delete pe.sounds[e],!0},this.load=function(e,t){return!!W(e)&&pe.sounds[e].load(t)},this.unload=function(e){return!!W(e)&&pe.sounds[e].unload()},this.onPosition=function(e,t,a,n){return!!W(e)&&pe.sounds[e].onposition(t,a,n)},this.onposition=this.onPosition,this.clearOnPosition=function(e,t,a){return!!W(e)&&pe.sounds[e].clearOnPosition(t,a)},this.play=function(e,t){var a=null,n=t&&!(t instanceof Object);if(!Se||!pe.ok())return V(ye+".play(): "+k(Se?"notOK":"notReady")),!1;if(W(e,n))n&&(t={url:t});else{if(!n)return!1;(t=n?{url:t}:t)&&t.url&&(pe._wD(ye+'.play(): Attempting to create "'+e+'"',1),t.id=e,a=pe.createSound(t).play())}return a=null===a?pe.sounds[e].play(t):a},this.start=this.play,this.setPosition=function(e,t){return!!W(e)&&pe.sounds[e].setPosition(t)},this.stop=function(e){return!!W(e)&&(pe._wD(ye+".stop("+e+")",1),pe.sounds[e].stop())},this.stopAll=function(){for(var e in pe._wD(ye+".stopAll()",1),pe.sounds)pe.sounds.hasOwnProperty(e)&&pe.sounds[e].stop()},this.pause=function(e){return!!W(e)&&pe.sounds[e].pause()},this.pauseAll=function(){for(var e=pe.soundIDs.length-1;0<=e;e--)pe.sounds[pe.soundIDs[e]].pause()},this.resume=function(e){return!!W(e)&&pe.sounds[e].resume()},this.resumeAll=function(){for(var e=pe.soundIDs.length-1;0<=e;e--)pe.sounds[pe.soundIDs[e]].resume()},this.togglePause=function(e){return!!W(e)&&pe.sounds[e].togglePause()},this.setPan=function(e,t){return!!W(e)&&pe.sounds[e].setPan(t)},this.setVolume=function(e,t){var a,n;if(e===pt||isNaN(e)||t!==pt)return!!W(e)&&pe.sounds[e].setVolume(t);for(a=0,n=pe.soundIDs.length;a<n;a++)pe.sounds[pe.soundIDs[a]].setVolume(e)},this.mute=function(e){var t=0;if(e=e instanceof String?null:e)return!!W(e)&&(pe._wD(ye+'.mute(): Muting "'+e+'"'),pe.sounds[e].mute());for(pe._wD(ye+".mute(): Muting all sounds"),t=pe.soundIDs.length-1;0<=t;t--)pe.sounds[pe.soundIDs[t]].mute();return pe.muted=!0},this.muteAll=function(){pe.mute()},this.unmute=function(e){var t;if(e=e instanceof String?null:e)return!!W(e)&&(pe._wD(ye+'.unmute(): Unmuting "'+e+'"'),pe.sounds[e].unmute());for(pe._wD(ye+".unmute(): Unmuting all sounds"),t=pe.soundIDs.length-1;0<=t;t--)pe.sounds[pe.soundIDs[t]].unmute();return!(pe.muted=!1)},this.unmuteAll=function(){pe.unmute()},this.toggleMute=function(e){return!!W(e)&&pe.sounds[e].toggleMute()},this.getMemoryUse=function(){var e=0;return e=ge&&8!==v?parseInt(ge._getMemoryUse(),10):e},this.disable=function(e){var t;if(e===pt&&(e=!1),Le)return!1;for(Le=!0,b("shutdown",1),t=pe.soundIDs.length-1;0<=t;t--)I(pe.sounds[pe.soundIDs[t]]);return o(e),ae.remove(ht,"load",d),!0},this.canPlayMIME=function(e){var t;return t=!(t=pe.hasHTML5?K({type:e}):t)&&Ue?e&&pe.ok()?!!(8<v&&e.match(st)||e.match(pe.mimePattern)):null:t},this.canPlayURL=function(e){var t;return t=!(t=pe.hasHTML5?K({url:e}):t)&&Ue?e&&pe.ok()?!!e.match(pe.filePattern):null:t},this.canPlayLink=function(e){return!(e.type===pt||!e.type||!pe.canPlayMIME(e.type))||pe.canPlayURL(e.href)},this.getSoundById=function(e,t){if(!e)return null;var a=pe.sounds[e];return a||t||pe._wD(ye+'.getSoundById(): Sound "'+e+'" not found.',2),a},this.onready=function(e,t){var a="onready";if("function"!=typeof e)throw k("needFunction",a);return Se&&pe._wD(k("queue",a)),i(a,e,t=t||ht),s(),!0},this.ontimeout=function(e,t){var a="ontimeout";if("function"!=typeof e)throw k("needFunction",a);return Se&&pe._wD(k("queue",a)),i(a,e,t=t||ht),s({type:a}),!0},this._writeDebug=function(e,t){var a,n;return!!pe.setupOptions.debugMode&&(!!(Je&&pe.useConsole&&(t&&"object"==typeof t?console.log(e,t):xe[t]!==pt?console[xe[t]](e):console.log(e),pe.consoleOnly))||!!(a=y("soundmanager-debug"))&&(n=De.createElement("div"),++Ee%2==0&&(n.className="sm2-alt"),t=t===pt?0:parseInt(t,10),n.appendChild(De.createTextNode(e)),t&&(2<=t&&(n.style.fontWeight="bold"),3===t&&(n.style.color="#ff3333")),a.insertBefore(n,a.firstChild),!(a=null)))},-1!==be.indexOf("sm2-debug=alert")&&(this._writeDebug=function(e){ht.alert(e)}),this._wD=this._writeDebug,this._debug=function(){var e,t;for(b("currentObj",1),e=0,t=pe.soundIDs.length;e<t;e++)pe.sounds[pe.soundIDs[e]]._debug()},this.reboot=function(e,t){var a,n,o;for(pe.soundIDs.length&&pe._wD("Destroying "+pe.soundIDs.length+" SMSound object"+(1!==pe.soundIDs.length?"s":"")+"..."),a=pe.soundIDs.length-1;0<=a;a--)pe.sounds[pe.soundIDs[a]].destruct();if(ge)try{Xe&&(Ne=ge.innerHTML),Ie=ge.parentNode.removeChild(ge)}catch(e){b("badRemove",2)}if(Ne=Ie=Ue=ge=null,pe.enabled=P=Se=Fe=ke=Te=Pe=Le=je=pe.swfLoaded=!1,pe.soundIDs=[],pe.sounds={},Ve=0,ce=!1,e)Me=[];else for(a in Me)if(Me.hasOwnProperty(a))for(n=0,o=Me[a].length;n<o;n++)Me[a][n].fired=!1;return t||pe._wD(ye+": Rebooting..."),pe.html5={usingFlash:null},pe.flash={},pe.html5Only=!1,pe.ignoreFlash=!1,ht.setTimeout(function(){t||pe.beginDelayedInit()},20),pe},this.reset=function(){return b("reset"),pe.reboot(!0,!0)},this.getMoviePercent=function(){return ge&&"PercentLoaded"in ge?ge.PercentLoaded():null},this.beginDelayedInit=function(){Ce=!0,g(),setTimeout(function(){return!ke&&(L(),m(),ke=!0)},20),c()},this.destruct=function(){pe._wD(ye+".destruct()"),pe.disable(!0)},r=function(e){var o,i,t,n,u,d,s,c,f,h=this,p=!1,r=[],l=0,m=null,g={duration:null,time:null};this.id=e.id,this.sID=this.id,this.url=e.url,this.options=D(e),this.instanceOptions=this.options,this._iO=this.instanceOptions,this.pan=this.options.pan,this.volume=this.options.volume,this.isHTML5=!1,this._a=null,f=!this.url,this.id3={},this._debug=function(){pe._wD(h.id+": Merged options:",h.options)},this.load=function(e){var t;if(e!==pt?h._iO=D(e,h.options):(e=h.options,h._iO=e,m&&m!==h.url&&(b("manURL"),h._iO.url=h.url,h.url=null)),h._iO.url||(h._iO.url=h.url),h._iO.url=z(h._iO.url),h.instanceOptions=h._iO,t=h._iO,pe._wD(h.id+": load ("+t.url+")"),!t.url&&!h.url)return pe._wD(h.id+": load(): url is unassigned. Exiting.",2),h;if(h.isHTML5||8!==v||h.url||t.autoPlay||pe._wD(h.id+": Flash 8 load() limitation: Wait for onload() before calling play().",1),t.url===h.url&&0!==h.readyState&&2!==h.readyState)return b("onURL",1),3===h.readyState&&t.onload&&de(h,function(){t.onload.apply(h,[!!h.duration])}),h;if(h.loaded=!1,h.readyState=1,h.playState=0,h.id3={},$(t))h._setup_html5(t)._called_load?pe._wD(h.id+": Ignoring request to load again"):(h._html5_canplay=!1,h.url!==t.url&&(pe._wD(b("manURL")+": "+t.url),h._a.src=t.url,h.setPosition(0)),h._a.autobuffer="auto",h._a.preload="auto",h._a._called_load=!0);else{if(pe.html5Only)return pe._wD(h.id+": No flash support. Exiting."),h;if(h._iO.url&&h._iO.url.match(/data\:/i))return pe._wD(h.id+": data: URIs not supported via Flash. Exiting."),h;try{h.isHTML5=!1,h._iO=j(B(t)),h._iO.autoPlay&&(h._iO.position||h._iO.from)&&(pe._wD(h.id+": Disabling autoPlay because of non-zero offset case"),h._iO.autoPlay=!1),t=h._iO,8===v?ge._load(h.id,t.url,t.stream,t.autoPlay,t.usePolicyFile):ge._load(h.id,t.url,!!t.stream,!!t.autoPlay,t.loops||1,!!t.autoLoad,t.usePolicyFile)}catch(e){b("smError",2),w("onload",!1),C({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}}return h.url=t.url,h},this.unload=function(){return 0!==h.readyState&&(pe._wD(h.id+": unload()"),h.isHTML5?(n(),h._a&&(h._a.pause(),m=Z(h._a))):8===v?ge._unload(h.id,nt):ge._unload(h.id),o()),h},this.destruct=function(e){pe._wD(h.id+": Destruct"),h.isHTML5?(n(),h._a&&(h._a.pause(),Z(h._a),je||t(),h._a._s=null,h._a=null)):(h._iO.onfailure=null,ge._destroySound(h.id)),e||pe.destroySound(h.id,!0)},this.play=function(e,t){var a,n,o,i,s,r=null,l=h.id+": play(): ";if(t=t===pt||t,e=e||{},h.url&&(h._iO.url=h.url),h._iO=D(h._iO,h.options),h._iO=D(e,h._iO),h._iO.url=z(h._iO.url),h.instanceOptions=h._iO,!h.isHTML5&&h._iO.serverURL&&!h.connected)return h.getAutoPlay()||(pe._wD(l+" Netstream not connected yet - setting autoPlay"),h.setAutoPlay(!0)),h;if($(h._iO)&&(h._setup_html5(h._iO),u()),1!==h.playState||h.paused||(h._iO.multiShot?pe._wD(l+"Already playing (multi-shot)",1):(pe._wD(l+"Already playing (one-shot)",1),h.isHTML5&&h.setPosition(h._iO.position),r=h)),null!==r)return r;if(e.url&&e.url!==h.url&&(h.readyState||h.isHTML5||8!==v||!f?h.load(h._iO):f=!1),h.loaded?pe._wD(l.substr(0,l.lastIndexOf(":"))):0===h.readyState?(pe._wD(l+"Attempting to load"),h.isHTML5||pe.html5Only?h.isHTML5?h.load(h._iO):(pe._wD(l+"Unsupported type. Exiting."),r=h):(h._iO.autoPlay=!0,h.load(h._iO)),h.instanceOptions=h._iO):2===h.readyState?(pe._wD(l+"Could not load - exiting",2),r=h):pe._wD(l+"Loading - attempting to play..."),null!==r)return r;if(!h.isHTML5&&9===v&&0<h.position&&h.position===h.duration&&(pe._wD(l+"Sound at end, resetting to position: 0"),e.position=0),h.paused&&0<=h.position&&(!h._iO.serverURL||0<h.position))pe._wD(l+"Resuming from paused state",1),h.resume();else{if(h._iO=D(e,h._iO),(!h.isHTML5&&null!==h._iO.position&&0<h._iO.position||null!==h._iO.from&&0<h._iO.from||null!==h._iO.to)&&0===h.instanceCount&&0===h.playState&&!h._iO.serverURL){if(a=function(){h._iO=D(e,h._iO),h.play(h._iO)},h.isHTML5&&!h._html5_canplay?(pe._wD(l+"Beginning load for non-zero offset case"),h.load({_oncanplay:a}),r=!1):h.isHTML5||h.loaded||h.readyState&&2===h.readyState||(pe._wD(l+"Preloading for non-zero offset case"),h.load({onload:a}),r=!1),null!==r)return r;h._iO=c()}(!h.instanceCount||h._iO.multiShotEvents||h.isHTML5&&h._iO.multiShot&&!je||!h.isHTML5&&8<v&&!h.getAutoPlay())&&h.instanceCount++,h._iO.onposition&&0===h.playState&&d(h),h.playState=1,h.paused=!1,h.position=h._iO.position===pt||isNaN(h._iO.position)?0:h._iO.position,h.isHTML5||(h._iO=j(B(h._iO))),h._iO.onplay&&t&&(h._iO.onplay.apply(h),p=!0),h.setVolume(h._iO.volume,!0),h.setPan(h._iO.pan,!0),h.isHTML5?h.instanceCount<2?(u(),t=h._setup_html5(),h.setPosition(h._iO.position),t.play()):(pe._wD(h.id+": Cloning Audio() for instance #"+h.instanceCount+"..."),n=new Audio(h._iO.url),o=function(){ae.remove(n,"ended",o),h._onfinish(h),Z(n),n=null},i=function(){ae.remove(n,"canplay",i);try{n.currentTime=h._iO.position/We}catch(e){V(h.id+": multiShot play() failed to apply position of "+h._iO.position/We)}n.play()},ae.add(n,"ended",o),h._iO.volume!==pt&&(n.volume=Math.max(0,Math.min(1,h._iO.volume/100))),h.muted&&(n.muted=!0),h._iO.position?ae.add(n,"canplay",i):n.play()):(s=ge._start(h.id,h._iO.loops||1,9===v?h.position:h.position/We,h._iO.multiShot||!1),9!==v||s||(pe._wD(l+"No sound hardware, or 32-sound ceiling hit",2),h._iO.onplayerror&&h._iO.onplayerror.apply(h)))}return h},this.start=this.play,this.stop=function(e){var t,a=h._iO;return 1===h.playState&&(pe._wD(h.id+": stop()"),h._onbufferchange(0),h._resetOnPosition(0),h.paused=!1,h.isHTML5||(h.playState=0),s(),a.to&&h.clearOnPosition(a.to),h.isHTML5?h._a&&(t=h.position,h.setPosition(0),h.position=t,h._a.pause(),h.playState=0,h._onTimer(),n()):(ge._stop(h.id,e),a.serverURL&&h.unload()),h.instanceCount=0,h._iO={},a.onstop&&a.onstop.apply(h)),h},this.setAutoPlay=function(e){pe._wD(h.id+": Autoplay turned "+(e?"on":"off")),h._iO.autoPlay=e,h.isHTML5||(ge._setAutoPlay(h.id,e),e&&(h.instanceCount||1!==h.readyState||(h.instanceCount++,pe._wD(h.id+": Incremented instance count to "+h.instanceCount))))},this.getAutoPlay=function(){return h._iO.autoPlay},this.setPosition=function(e){e===pt&&(e=0);var t,e=h.isHTML5?Math.max(e,0):Math.min(h.duration||h._iO.duration,Math.max(e,0));if(h.position=e,t=h.position/We,h._resetOnPosition(h.position),h._iO.position=e,h.isHTML5){if(h._a){if(h._html5_canplay){if(h._a.currentTime!==t){pe._wD(h.id+": setPosition("+t+")");try{h._a.currentTime=t,0!==h.playState&&!h.paused||h._a.pause()}catch(e){pe._wD(h.id+": setPosition("+t+") failed: "+e.message,2)}}}else if(t)return pe._wD(h.id+": setPosition("+t+"): Cannot seek yet, sound not ready",2),h;h.paused&&h._onTimer(!0)}}else e=9===v?h.position:t,h.readyState&&2!==h.readyState&&ge._setPosition(h.id,e,h.paused||!h.playState,h._iO.multiShot);return h},this.pause=function(e){return h.paused||0===h.playState&&1!==h.readyState||(pe._wD(h.id+": pause()"),h.paused=!0,h.isHTML5?(h._setup_html5().pause(),n()):!e&&e!==pt||ge._pause(h.id,h._iO.multiShot),h._iO.onpause&&h._iO.onpause.apply(h)),h},this.resume=function(){var e=h._iO;return h.paused&&(pe._wD(h.id+": resume()"),h.paused=!1,h.playState=1,h.isHTML5?(h._setup_html5().play(),u()):(e.isMovieStar&&!e.serverURL&&h.setPosition(h.position),ge._pause(h.id,e.multiShot)),!p&&e.onplay?(e.onplay.apply(h),p=!0):e.onresume&&e.onresume.apply(h)),h},this.togglePause=function(){return pe._wD(h.id+": togglePause()"),0===h.playState?h.play({position:9!==v||h.isHTML5?h.position/We:h.position}):h.paused?h.resume():h.pause(),h},this.setPan=function(e,t){return e===pt&&(e=0),t===pt&&(t=!1),h.isHTML5||ge._setPan(h.id,e),h._iO.pan=e,t||(h.pan=e,h.options.pan=e),h},this.setVolume=function(e,t){return e===pt&&(e=100),t===pt&&(t=!1),h.isHTML5?h._a&&(pe.muted&&!h.muted&&(h.muted=!0,h._a.muted=!0),h._a.volume=Math.max(0,Math.min(1,e/100))):ge._setVolume(h.id,pe.muted&&!h.muted||h.muted?0:e),h._iO.volume=e,t||(h.volume=e,h.options.volume=e),h},this.mute=function(){return h.muted=!0,h.isHTML5?h._a&&(h._a.muted=!0):ge._setVolume(h.id,0),h},this.unmute=function(){h.muted=!1;var e=h._iO.volume!==pt;return h.isHTML5?h._a&&(h._a.muted=!1):ge._setVolume(h.id,(e?h._iO:h.options).volume),h},this.toggleMute=function(){return h.muted?h.unmute():h.mute()},this.onPosition=function(e,t,a){return r.push({position:parseInt(e,10),method:t,scope:a!==pt?a:h,fired:!1}),h},this.onposition=this.onPosition,this.clearOnPosition=function(e,t){var a;if(e=parseInt(e,10),isNaN(e))return!1;for(a=0;a<r.length;a++)e===r[a].position&&(t&&t!==r[a].method||(r[a].fired&&l--,r.splice(a,1)))},this._processOnPosition=function(){var e,t,a=r.length;if(!a||!h.playState||a<=l)return!1;for(e=a-1;0<=e;e--)!(t=r[e]).fired&&h.position>=t.position&&(t.fired=!0,l++,t.method.apply(t.scope,[t.position]),a=r.length);return!0},this._resetOnPosition=function(e){var t,a,n=r.length;if(!n)return!1;for(t=n-1;0<=t;t--)(a=r[t]).fired&&e<=a.position&&(a.fired=!1,l--);return!0},c=function(){var e=h._iO,t=e.from,a=e.to,n=function(){pe._wD(h.id+': "To" time of '+a+" reached."),h.clearOnPosition(a,n),h.stop()},o=function(){pe._wD(h.id+': Playing "from" '+t),null===a||isNaN(a)||h.onPosition(a,n)};return null===t||isNaN(t)||(e.position=t,e.multiShot=!1,o()),e},d=function(){var e,t=h._iO.onposition;if(t)for(e in t)t.hasOwnProperty(e)&&h.onPosition(parseInt(e,10),t[e])},s=function(){var e,t=h._iO.onposition;if(t)for(e in t)t.hasOwnProperty(e)&&h.clearOnPosition(parseInt(e,10))},u=function(){h.isHTML5&&q(h)},n=function(){h.isHTML5&&Q(h)},(o=function(e){e||(r=[],l=0),p=!1,h._hasTimer=null,h._a=null,h._html5_canplay=!1,h.bytesLoaded=null,h.bytesTotal=null,h.duration=h._iO&&h._iO.duration?h._iO.duration:null,h.durationEstimate=null,h.buffered=[],h.eqData=[],h.eqData.left=[],h.eqData.right=[],h.failures=0,h.isBuffering=!1,h.instanceOptions={},h.instanceCount=0,h.loaded=!1,h.metadata={},h.readyState=0,h.muted=!1,h.paused=!1,h.peakData={left:0,right:0},h.waveformData={left:[],right:[]},h.playState=0,h.position=null,h.id3={}})(),this._onTimer=function(e){var t,a=!1,n={};if(h._hasTimer||e)return h._a&&(e||(0<h.playState||1===h.readyState)&&!h.paused)&&((t=h._get_html5_duration())!==g.duration&&(g.duration=t,h.duration=t,a=!0),h.durationEstimate=h.duration,(t=h._a.currentTime*We||0)!==g.time&&(g.time=t,a=!0),(a||e)&&h._whileplaying(t,n,n,n,n)),a},this._get_html5_duration=function(){var e=h._iO,e=h._a&&h._a.duration?h._a.duration*We:e&&e.duration?e.duration:null;return e&&!isNaN(e)&&e!==1/0?e:null},this._apply_loop=function(e,t){!e.loop&&1<t&&pe._wD("Note: Native HTML5 looping is infinite.",1),e.loop=1<t?"loop":""},this._setup_html5=function(e){var t,a=D(h._iO,e),n=je?me:h._a,e=decodeURI(a.url);if(je?e===decodeURI(ne)&&(t=!0):e===decodeURI(m)&&(t=!0),n){if(n._s)if(je)n._s&&n._s.playState&&!t&&n._s.stop();else if(!je&&e===decodeURI(m))return h._apply_loop(n,a.loops),n;t||(m&&o(!1),n.src=a.url,h.url=a.url,m=a.url,ne=a.url,n._called_load=!1)}else a.autoLoad||a.autoPlay?(h._a=new Audio(a.url),h._a.load()):h._a=Ge&&opera.version()<10?new Audio(null):new Audio,(n=h._a)._called_load=!1,je&&(me=n);return h.isHTML5=!0,(h._a=n)._s=h,i(),h._apply_loop(n,a.loops),a.autoLoad||a.autoPlay?h.load():(n.autobuffer=!1,n.preload="auto"),n},i=function(){if(h._a._added_events)return!1;var e,t,a,n;for(e in h._a._added_events=!0,re)re.hasOwnProperty(e)&&(a=re[t=e],n=void 0,h._a&&h._a.addEventListener(t,a,n||!1));return!0},t=function(){var e,t,a,n;for(e in pe._wD(h.id+": Removing event listeners"),h._a._added_events=!1,re)re.hasOwnProperty(e)&&(a=re[t=e],n=void 0,h._a&&h._a.removeEventListener(t,a,n||!1))},this._onload=function(e){var t=!!e||!h.isHTML5&&8===v&&h.duration,e=h.id+": ";return pe._wD(e+(t?"onload()":"Failed to load / invalid sound?"+(h.duration?" -":" Zero-length duration reported.")+" ("+h.url+")"),t?1:2),t||h.isHTML5||(!0===pe.sandbox.noRemote&&pe._wD(e+k("noNet"),1),!0===pe.sandbox.noLocal&&pe._wD(e+k("noLocal"),1)),h.loaded=t,h.readyState=t?3:2,h._onbufferchange(0),h._iO.onload&&de(h,function(){h._iO.onload.apply(h,[t])}),!0},this._onbufferchange=function(e){return 0!==h.playState&&(!(e&&h.isBuffering||!e&&!h.isBuffering)&&(h.isBuffering=1===e,h._iO.onbufferchange&&(pe._wD(h.id+": Buffer state change: "+e),h._iO.onbufferchange.apply(h,[e])),!0))},this._onsuspend=function(){return h._iO.onsuspend&&(pe._wD(h.id+": Playback suspended"),h._iO.onsuspend.apply(h)),!0},this._onfailure=function(e,t,a){h.failures++,pe._wD(h.id+": Failure ("+h.failures+"): "+e),h._iO.onfailure&&1===h.failures?h._iO.onfailure(e,t,a):pe._wD(h.id+": Ignoring failure")},this._onwarning=function(e,t,a){h._iO.onwarning&&h._iO.onwarning(e,t,a)},this._onfinish=function(){var e=h._iO.onfinish;h._onbufferchange(0),h._resetOnPosition(0),h.instanceCount&&(h.instanceCount--,h.instanceCount||(s(),h.playState=0,h.paused=!1,h.instanceCount=0,h.instanceOptions={},h._iO={},n(),h.isHTML5&&(h.position=0)),h.instanceCount&&!h._iO.multiShotEvents||e&&(pe._wD(h.id+": onfinish()"),de(h,function(){e.apply(h)})))},this._whileloading=function(e,t,a,n){var o=h._iO;h.bytesLoaded=e,h.bytesTotal=t,h.duration=Math.floor(a),h.bufferLength=n,h.isHTML5||o.isMovieStar?h.durationEstimate=h.duration:o.duration?h.durationEstimate=(h.duration>o.duration?h:o).duration:h.durationEstimate=parseInt(h.bytesTotal/h.bytesLoaded*h.duration,10),h.isHTML5||(h.buffered=[{start:0,end:h.duration}]),(3!==h.readyState||h.isHTML5)&&o.whileloading&&o.whileloading.apply(h)},this._whileplaying=function(e,t,a,n,o){var i=h._iO;return!isNaN(e)&&null!==e&&(h.position=Math.max(0,e),h._processOnPosition(),!h.isHTML5&&8<v&&(i.usePeakData&&t!==pt&&t&&(h.peakData={left:t.leftPeak,right:t.rightPeak}),i.useWaveformData&&a!==pt&&a&&(h.waveformData={left:a.split(","),right:n.split(",")}),i.useEQData&&o!==pt&&o&&o.leftEQ&&(n=o.leftEQ.split(","),h.eqData=n,h.eqData.left=n,o.rightEQ!==pt&&o.rightEQ&&(h.eqData.right=o.rightEQ.split(",")))),1===h.playState&&(h.isHTML5||8!==v||h.position||!h.isBuffering||h._onbufferchange(0),i.whileplaying&&i.whileplaying.apply(h)),!0)},this._oncaptiondata=function(e){pe._wD(h.id+": Caption data received."),h.captiondata=e,h._iO.oncaptiondata&&h._iO.oncaptiondata.apply(h,[e])},this._onmetadata=function(e,t){pe._wD(h.id+": Metadata received.");for(var a={},n=0,o=e.length;n<o;n++)a[e[n]]=t[n];h.metadata=a,h._iO.onmetadata&&h._iO.onmetadata.call(h,h.metadata)},this._onid3=function(e,t){pe._wD(h.id+": ID3 data received.");for(var a=[],n=0,o=e.length;n<o;n++)a[e[n]]=t[n];h.id3=D(h.id3,a),h._iO.onid3&&h._iO.onid3.apply(h)},this._onconnect=function(e){e=1===e,pe._wD(h.id+": "+(e?"Connected.":"Failed to connect? - "+h.url),e?1:2),(h.connected=e)&&(h.failures=0,W(h.id)&&(h.getAutoPlay()?h.play(pt,h.getAutoPlay()):h._iO.autoLoad&&h.load()),h._iO.onconnect&&h._iO.onconnect.apply(h,[e]))},this._ondataerror=function(e){0<h.playState&&(pe._wD(h.id+": Data error: "+e),h._iO.ondataerror&&h._iO.ondataerror.apply(h))},this._debug()},S=function(){return De.body||De.getElementsByTagName("div")[0]},y=function(e){return De.getElementById(e)},D=function(e,t){var a,n=e||{},o=t===pt?pe.defaultOptions:t;for(a in o)o.hasOwnProperty(a)&&n[a]===pt&&("object"!=typeof o[a]||null===o[a]?n[a]=o[a]:n[a]=D(n[a],o[a]));return n},de=function(e,t){e.isHTML5||8!==v?t():ht.setTimeout(t,0)},u={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1},l=function(e,t){var a,n=!0,o=t!==pt,i=pe.setupOptions,s=u;if(e===pt){for(a in n=[],i)i.hasOwnProperty(a)&&n.push(a);for(a in s)s.hasOwnProperty(a)&&("object"==typeof pe[a]?n.push(a+": {...}"):pe[a]instanceof Function?n.push(a+": function() {...}"):n.push(a));return pe._wD(k("setup",n.join(", "))),!1}for(a in e)if(e.hasOwnProperty(a))if("object"!=typeof e[a]||null===e[a]||e[a]instanceof Array||e[a]instanceof RegExp)o&&s[t]!==pt?pe[t][a]=e[a]:i[a]!==pt?(pe.setupOptions[a]=e[a],pe[a]=e[a]):s[a]===pt?(V(k(pe[a]===pt?"setupUndef":"setupError",a),2),n=!1):pe[a]instanceof Function?pe[a].apply(pe,e[a]instanceof Array?e[a]:[e[a]]):pe[a]=e[a];else{if(s[a]!==pt)return l(e[a],a);V(k(pe[a]===pt?"setupUndef":"setupError",a),2),n=!1}return n},fe=ht.attachEvent,he={add:fe?"attachEvent":"addEventListener",remove:fe?"detachEvent":"removeEventListener"},ae={add:function(){ct(dt(arguments),"add")},remove:function(){ct(dt(arguments),"remove")}},re={abort:ft(function(){pe._wD(this._s.id+": abort")}),canplay:ft(function(){var t,a=this._s;if(a._html5_canplay)return!0;if(a._html5_canplay=!0,pe._wD(a.id+": canplay"),a._onbufferchange(0),t=a._iO.position===pt||isNaN(a._iO.position)?null:a._iO.position/We,this.currentTime!==t){pe._wD(a.id+": canplay: Setting position to "+t);try{this.currentTime=t}catch(e){pe._wD(a.id+": canplay: Setting position of "+t+" failed: "+e.message,2)}}a._iO._oncanplay&&a._iO._oncanplay()}),canplaythrough:ft(function(){var e=this._s;e.loaded||(e._onbufferchange(0),e._whileloading(e.bytesLoaded,e.bytesTotal,e._get_html5_duration()),e._onload(!0))}),durationchange:ft(function(){var e=this._s,t=e._get_html5_duration();isNaN(t)||t===e.duration||(pe._wD(this._s.id+": durationchange ("+t+")"+(e.duration?", previously "+e.duration:"")),e.durationEstimate=e.duration=t)}),ended:ft(function(){var e=this._s;pe._wD(e.id+": ended"),e._onfinish()}),error:ft(function(){pe._wD(this._s.id+": HTML5 error, code "+this.error.code),this._s._onload(!1)}),loadeddata:ft(function(){var e=this._s;pe._wD(e.id+": loadeddata"),e._loaded||Ye||(e.duration=e._get_html5_duration())}),loadedmetadata:ft(function(){pe._wD(this._s.id+": loadedmetadata")}),loadstart:ft(function(){pe._wD(this._s.id+": loadstart"),this._s._onbufferchange(1)}),play:ft(function(){this._s._onbufferchange(0)}),playing:ft(function(){pe._wD(this._s.id+": playing "+String.fromCharCode(9835)),this._s._onbufferchange(0)}),progress:ft(function(e){var t,a,n,o,i=this._s,s="progress"===e.type,r=e.target.buffered,l=e.loaded||0,u=e.total||1;if(i.buffered=[],r&&r.length){for(t=0,a=r.length;t<a;t++)i.buffered.push({start:r.start(t)*We,end:r.end(t)*We});if(o=(r.end(0)-r.start(0))*We,l=Math.min(1,o/(e.target.duration*We)),s&&1<r.length){for(n=[],a=r.length,t=0;t<a;t++)n.push(e.target.buffered.start(t)*We+"-"+e.target.buffered.end(t)*We);pe._wD(this._s.id+": progress, timeRanges: "+n.join(", "))}s&&!isNaN(l)&&pe._wD(this._s.id+": progress, "+Math.floor(100*l)+"% loaded")}isNaN(l)||(i._whileloading(l,u,i._get_html5_duration()),l&&u&&l===u&&re.canplaythrough.call(this,e))}),ratechange:ft(function(){pe._wD(this._s.id+": ratechange")}),suspend:ft(function(e){var t=this._s;pe._wD(this._s.id+": suspend"),re.progress.call(this,e),t._onsuspend()}),stalled:ft(function(){pe._wD(this._s.id+": stalled")}),timeupdate:ft(function(){this._s._onTimer()}),waiting:ft(function(){var e=this._s;pe._wD(this._s.id+": waiting"),e._onbufferchange(1)})},$=function(e){e=!(!e||!(e.type||e.url||e.serverURL))&&(!(e.serverURL||e.type&&ut(e.type))&&(e.type?K({type:e.type}):K({url:e.url})||pe.html5Only||e.url.match(/data\:/i)));return e},Z=function(e){var t;return e&&(t=!Ye&&pe.html5.canPlayType("audio/wav")?"data:audio/wave;base64,/UklGRiYAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQIAAAD//w==":nt,e.src=t,e._called_unload!==pt&&(e._called_load=!1)),je&&(ne=null),t},K=function(e){if(!pe.useHTML5Audio||!pe.hasHTML5)return!1;var t,a,n=e.url||null,o=e.type||null,i=pe.audioFormats;if(o&&pe.html5[o]!==pt)return pe.html5[o]&&!ut(o);if(!J){for(a in J=[],i)i.hasOwnProperty(a)&&(J.push(a),i[a].related&&(J=J.concat(i[a].related)));J=new RegExp("\\.("+J.join("|")+")(\\?.*)?$","i")}return(e=n?n.toLowerCase().match(J):null)&&e.length?e=e[1]:o?e=(-1!==(n=o.indexOf(";"))?o.substr(0,n):o).substr(6):t=!1,t=e&&pe.html5[e]!==pt?pe.html5[e]&&!ut(e):(o="audio/"+e,t=pe.html5.canPlayType({type:o}),(pe.html5[e]=t)&&pe.html5[o]&&!ut(o))},te=function(){if(!pe.useHTML5Audio||!pe.hasHTML5)return pe.html5.usingFlash=!0,!(Ue=!0);var e,t,a,i,s=Audio!==pt?Ge&&opera.version()<10?new Audio(null):new Audio:null,n={};function o(e){var t,a,n=!1,o=!1;if(!s||"function"!=typeof s.canPlayType)return n;if(e instanceof Array){for(i=0,a=e.length;i<a;i++)(pe.html5[e[i]]||s.canPlayType(e[i]).match(pe.html5Test))&&(o=!0,pe.html5[e[i]]=!0,pe.flash[e[i]]=!!e[i].match(at));n=o}else n=!(!(t=!(!s||"function"!=typeof s.canPlayType)&&s.canPlayType(e))||!t.match(pe.html5Test));return n}for(e in a=pe.audioFormats)if(a.hasOwnProperty(e)&&(t="audio/"+e,n[e]=o(a[e].type),n[t]=n[e],e.match(at)?(pe.flash[e]=!0,pe.flash[t]=!0):(pe.flash[e]=!1,pe.flash[t]=!1),a[e]&&a[e].related))for(i=a[e].related.length-1;0<=i;i--)n["audio/"+a[e].related[i]]=n[e],pe.html5[a[e].related[i]]=n[e],pe.flash[a[e].related[i]]=n[e];return n.canPlayType=s?o:null,pe.html5=D(pe.html5,n),pe.html5.usingFlash=G(),Ue=pe.html5.usingFlash,!0},O={notReady:"Unavailable - wait until onready() has fired.",notOK:"Audio support is not available.",domError:ye+"exception caught while appending SWF to DOM.",spcWmode:"Removing wmode, preventing known SWF loading issue(s)",swf404:_e+"Verify that %s is a valid path.",tryDebug:"Try "+ye+".debugFlash = true for more security details (output goes to SWF.)",checkSWF:"See SWF output for more debug info.",localFail:_e+"Non-HTTP page ("+De.location.protocol+" URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",waitFocus:_e+"Special case: Waiting for SWF to load with window focus...",waitForever:_e+"Waiting indefinitely for Flash (will recover if unblocked)...",waitSWF:_e+"Waiting for 100% SWF load...",needFunction:_e+"Function object expected for %s",badID:'Sound ID "%s" should be a string, starting with a non-numeric character',currentObj:_e+"_debug(): Current sound objects",waitOnload:_e+"Waiting for window.onload()",docLoaded:_e+"Document already loaded",onload:_e+"initComplete(): calling soundManager.onload()",onloadOK:ye+".onload() complete",didInit:_e+"init(): Already called?",secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",badRemove:_e+"Failed to remove Flash node.",shutdown:ye+".disable(): Shutting down",queue:_e+"Queueing %s handler",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying ."+R.swfTimedout+" CSS...",fbLoaded:"Flash loaded",fbHandler:_e+"flashBlockHandler()",manURL:"SMSound.load(): Using manually-assigned URL",onURL:ye+".load(): current URL already assigned.",badFV:ye+'.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)",noNSLoop:"Note: Looping not implemented for MovieStar formats",needfl9:"Note: Switching to flash 9, required for MP4 formats.",mfTimeout:"Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case",needFlash:_e+"Fatal error: Flash is needed to play some required formats, but is not available.",gotFocus:_e+"Got window focus.",policy:"Enabling usePolicyFile for data access",setup:ye+".setup(): allowed parameters: %s",setupError:ye+'.setup(): "%s" cannot be assigned with this method.',setupUndef:ye+'.setup(): Could not find option "%s"',setupLate:ye+".setup(): url, flashVersion and html5Test property changes will not take effect until reboot().",noURL:_e+"Flash URL required. Call soundManager.setup({url:...}) to get started.",sm2Loaded:"SoundManager 2: Ready. "+String.fromCharCode(10003),reset:ye+".reset(): Removing event callbacks",mobileUA:"Mobile UA detected, preferring HTML5 by default.",globalHTML5:"Using singleton HTML5 Audio() pattern for this device.",ignoreMobile:"Ignoring mobile restrictions for this device."},k=function(){var e,t,a=Be.call(arguments),n=a.shift(),o=O&&O[n]?O[n]:"";if(o&&a&&a.length)for(e=0,t=a.length;e<t;e++)o=o.replace("%s",a[e]);return o},B=function(e){return 8===v&&1<e.loops&&e.stream&&(b("as2loop"),e.stream=!1),e},j=function(e,t){return e&&!e.usePolicyFile&&(e.onid3||e.usePeakData||e.useWaveformData||e.useEQData)&&(pe._wD((t||"")+k("policy")),e.usePolicyFile=!0),e},V=function(e){Je&&console.warn!==pt?console.warn(e):pe._wD(e)},a=function(){return!1},I=function(e){for(var t in e)e.hasOwnProperty(t)&&"function"==typeof e[t]&&(e[t]=a);t=null},N=function(e){e===pt&&(e=!1),(Le||e)&&pe.disable(e)},F=function(e){if(e)if(e.match(/\.swf(\?.*)?$/i)){if(e.substr(e.toLowerCase().lastIndexOf(".swf?")+4))return e}else e.lastIndexOf("/")!==e.length-1&&(e+="/");return e=(e&&-1!==e.lastIndexOf("/")?e.substr(0,e.lastIndexOf("/")+1):"./")+pe.movieURL,pe.noSWFCache&&(e+="?ts="+(new Date).getTime()),e},M=function(){8!==(v=parseInt(pe.flashVersion,10))&&9!==v&&(pe._wD(k("badFV",v,8)),pe.flashVersion=v=8);var e=pe.debugMode||pe.debugFlash?"_debug.swf":".swf";pe.useHTML5Audio&&!pe.html5Only&&pe.audioFormats.mp4.required&&v<9&&(pe._wD(k("needfl9")),pe.flashVersion=v=9),pe.version=pe.versionNumber+(pe.html5Only?" (HTML5-only mode)":9===v?" (AS3/Flash 9)":" (AS2/Flash 8)"),8<v?(pe.defaultOptions=D(pe.defaultOptions,pe.flash9Options),pe.features.buffering=!0,pe.defaultOptions=D(pe.defaultOptions,pe.movieStarOptions),pe.filePatterns.flash9=new RegExp("\\.(mp3|"+rt.join("|")+")(\\?.*)?$","i"),pe.features.movieStar=!0):pe.features.movieStar=!1,pe.filePattern=pe.filePatterns[8!==v?"flash9":"flash8"],pe.movieURL=(8===v?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",e),pe.features.peakData=pe.features.waveformData=pe.features.eqData=8<v},E=function(e,t){if(!ge)return!1;ge._setPolling(e,t)},x=function(){if(pe.debugURLParam.test(be)&&(pe.setupOptions.debugMode=pe.debugMode=!0),y(pe.debugID))return!1;var e,t,a,n,o;if(pe.debugMode&&!y(pe.debugID)&&(!Je||!pe.useConsole||!pe.consoleOnly)){for(o in(e=De.createElement("div")).id=pe.debugID+"-toggle",n={position:"fixed",bottom:"0px",right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",border:"1px solid #999",cursor:"pointer",background:"#fff",color:"#333",zIndex:10001},e.appendChild(De.createTextNode("-")),e.onclick=U,e.title="Toggle SM2 debug console",we.match(/msie 6/i)&&(e.style.position="absolute",e.style.cursor="hand"),n)n.hasOwnProperty(o)&&(e.style[o]=n[o]);if((t=De.createElement("div")).id=pe.debugID,t.style.display=pe.debugMode?"block":"none",pe.debugMode&&!y(e.id)){try{(a=S()).appendChild(e)}catch(e){throw new Error(k("domError")+" \n"+e.toString())}a.appendChild(t)}}a=null},W=this.getSoundById,b=function(e,t){return e?pe._wD(k(e),t):""},U=function(){var e=y(pe.debugID),t=y(pe.debugID+"-toggle");if(!e)return!1;Oe?(t.innerHTML="+",e.style.display="none"):(t.innerHTML="-",e.style.display="block"),Oe=!Oe},w=function(e,t,a){if(ht.sm2Debugger!==pt)try{sm2Debugger.handleEvent(e,t,a)}catch(e){return!1}return!0},A=function(){var e=[];return pe.debugMode&&e.push(R.sm2Debug),pe.debugFlash&&e.push(R.flashDebug),pe.useHighPerformance&&e.push(R.highPerf),e.join(" ")},H=function(){var e=k("fbHandler"),t=pe.getMoviePercent(),a=R,n={type:"FLASHBLOCK"};if(pe.html5Only)return!1;pe.ok()?(pe.didFlashBlock&&pe._wD(e+": Unblocked"),pe.oMC&&(pe.oMC.className=[A(),a.swfDefault,a.swfLoaded+(pe.didFlashBlock?" "+a.swfUnblocked:"")].join(" "))):(Ue&&(pe.oMC.className=A()+" "+a.swfDefault+" "+(null===t?a.swfTimedout:a.swfError),pe._wD(e+": "+k("fbTimeout")+(t?" ("+k("fbLoaded")+")":""))),pe.didFlashBlock=!0,s({type:"ontimeout",ignoreInit:!0,error:n}),C(n))},i=function(e,t,a){Me[e]===pt&&(Me[e]=[]),Me[e].push({method:t,scope:a||null,fired:!1})},s=function(e){if(e=e||{type:pe.ok()?"onready":"ontimeout"},!Se&&e&&!e.ignoreInit)return!1;if("ontimeout"===e.type&&(pe.ok()||Le&&!e.ignoreInit))return!1;var t,a,n={success:e&&e.ignoreInit?pe.ok():!Le},o=e&&e.type&&Me[e.type]||[],i=[],s=[n],r=Ue&&!pe.ok();for(e.error&&(s[0].error=e.error),t=0,a=o.length;t<a;t++)!0!==o[t].fired&&i.push(o[t]);if(i.length)for(t=0,a=i.length;t<a;t++)i[t].scope?i[t].method.apply(i[t].scope,s):i[t].method.apply(this,s),r||(i[t].fired=!0);return!0},d=function(){ht.setTimeout(function(){pe.useFlashBlock&&H(),s(),"function"==typeof pe.onload&&(b("onload",1),pe.onload.apply(ht),b("onloadOK",1)),pe.waitForWindowLoad&&ae.add(ht,"load",d)},1)},ie=function(){if(oe!==pt)return oe;var t,e=!1,a=navigator,n=a.plugins,o=ht.ActiveXObject;if(n&&n.length)n="application/x-shockwave-flash",(a=a.mimeTypes)&&a[n]&&a[n].enabledPlugin&&a[n].enabledPlugin.description&&(e=!0);else if(o!==pt&&!we.match(/MSAppHost/i)){try{t=new o("ShockwaveFlash.ShockwaveFlash")}catch(e){t=null}e=!!t,t=null}return oe=e},G=function(){var e,t,a=pe.audioFormats;if(qe&&!!we.match(/os (1|2|3_0|3_1)\s/i)?(pe.hasHTML5=!1,pe.html5Only=!0,pe.oMC&&(pe.oMC.style.display="none")):pe.useHTML5Audio&&(pe.html5&&pe.html5.canPlayType||(pe._wD("SoundManager: No HTML5 Audio() support detected."),pe.hasHTML5=!1),Ke&&pe._wD(_e+"Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id=32159 - "+(oe?"will use flash fallback for MP3/MP4, if available":" would use flash fallback for MP3/MP4, but none detected."),1)),pe.useHTML5Audio&&pe.hasHTML5)for(t in Y=!0,a)a.hasOwnProperty(t)&&a[t].required&&(pe.html5.canPlayType(a[t].type)?pe.preferFlash&&(pe.flash[t]||pe.flash[a[t].type])&&(e=!0):e=!(Y=!1));return pe.ignoreFlash&&(Y=!(e=!1)),pe.html5Only=pe.hasHTML5&&pe.useHTML5Audio&&!e,!pe.html5Only},z=function(e){var t,a,n,o=0;if(e instanceof Array){for(t=0,a=e.length;t<a;t++)if(e[t]instanceof Object){if(pe.canPlayMIME(e[t].type)){o=t;break}}else if(pe.canPlayURL(e[t])){o=t;break}e[o].url&&(e[o]=e[o].url),n=e[o]}else n=e;return n},q=function(e){e._hasTimer||(e._hasTimer=!0,!$e&&pe.html5PollingInterval&&(null===Ae&&0===He&&(Ae=setInterval(X,pe.html5PollingInterval)),He++))},Q=function(e){e._hasTimer&&(e._hasTimer=!1,!$e&&pe.html5PollingInterval&&He--)},X=function(){var e;if(null!==Ae&&!He)return clearInterval(Ae),Ae=null,!1;for(e=pe.soundIDs.length-1;0<=e;e--)pe.sounds[pe.soundIDs[e]].isHTML5&&pe.sounds[pe.soundIDs[e]]._hasTimer&&pe.sounds[pe.soundIDs[e]]._onTimer()},C=function(e){e=e!==pt?e:{},"function"==typeof pe.onerror&&pe.onerror.apply(ht,[{type:e.type!==pt?e.type:null}]),e.fatal!==pt&&e.fatal&&pe.disable()},se=function(){if(!Ke||!ie())return!1;var e,t,a=pe.audioFormats;for(t in a)if(a.hasOwnProperty(t)&&("mp3"===t||"mp4"===t)&&(pe._wD(ye+": Using flash fallback for "+t+" format"),pe.html5[t]=!1,a[t]&&a[t].related))for(e=a[t].related.length-1;0<=e;e--)pe.html5[a[t].related[e]]=!1},this._setSandboxType=function(e){var t=pe.sandbox;t.type=e,t.description=t.types[t.types[e]!==pt?e:"unknown"],"localWithFile"===t.type?(t.noRemote=!0,t.noLocal=!1,b("secNote",2)):"localWithNetwork"===t.type?(t.noRemote=!1,t.noLocal=!0):"localTrusted"===t.type&&(t.noRemote=!1,t.noLocal=!1)},this._externalInterfaceOK=function(e){return!pe.swfLoaded&&(w("swf",!0),w("flashtojs",!0),pe.swfLoaded=!0,et=!1,Ke&&se(),e&&e.replace(/\+dev/i,"")===pe.versionNumber.replace(/\+dev/i,"")?void setTimeout(_,Xe?100:1):(t=ye+': Fatal: JavaScript file build "'+pe.versionNumber+'" does not match Flash SWF build "'+e+'" at '+pe.url+". Ensure both are up-to-date.",setTimeout(function(){throw new Error(t)},0),!1));var t},L=function(e,t){if(Te&&Pe)return!1;function a(){var e=[],t=[],a="SoundManager "+pe.version+(!pe.html5Only&&pe.useHTML5Audio?pe.hasHTML5?" + HTML5 audio":", no HTML5 audio support":"");pe.html5Only?pe.html5PollingInterval&&e.push("html5PollingInterval ("+pe.html5PollingInterval+"ms)"):(pe.preferFlash&&e.push("preferFlash"),pe.useHighPerformance&&e.push("useHighPerformance"),pe.flashPollingInterval&&e.push("flashPollingInterval ("+pe.flashPollingInterval+"ms)"),pe.html5PollingInterval&&e.push("html5PollingInterval ("+pe.html5PollingInterval+"ms)"),pe.wmode&&e.push("wmode ("+pe.wmode+")"),pe.debugFlash&&e.push("debugFlash"),pe.useFlashBlock&&e.push("flashBlock")),e.length&&(t=t.concat([e.join(" + ")])),pe._wD(a+(t.length?" + "+t.join(", "):""),1),le()}if(pe.html5Only)return M(),a(),pe.oMC=y(pe.movieID),_(),!(Pe=Te=!0);var n,o,i,s,r,l,u,d,c=t||pe.url,f=pe.altURL||c,h=S(),p=A(),m=De.getElementsByTagName("html")[0];function g(e,t){return'<param name="'+e+'" value="'+t+'" />'}if(n=m&&m.dir&&m.dir.match(/rtl/i),e=e===pt?pe.id:e,M(),pe.url=F(ot?c:f),t=pe.url,pe.wmode=!pe.wmode&&pe.useHighPerformance?"transparent":pe.wmode,null!==pe.wmode&&(we.match(/msie 8/i)||!Xe&&!pe.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&(Re.push(O.spcWmode),pe.wmode=null),o={name:e,id:e,src:t,quality:"high",allowScriptAccess:pe.allowScriptAccess,bgcolor:pe.bgColor,pluginspage:it+"www.macromedia.com/go/getflashplayer",title:"JS/Flash audio component (SoundManager 2)",type:"application/x-shockwave-flash",wmode:pe.wmode,hasPriority:"true"},pe.debugFlash&&(o.FlashVars="debug=1"),pe.wmode||delete o.wmode,Xe)i=De.createElement("div"),r=['<object id="'+e+'" data="'+t+'" type="'+o.type+'" title="'+o.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',g("movie",t),g("AllowScriptAccess",pe.allowScriptAccess),g("quality",o.quality),pe.wmode?g("wmode",pe.wmode):"",g("bgcolor",pe.bgColor),g("hasPriority","true"),pe.debugFlash?g("FlashVars",o.FlashVars):"","</object>"].join("");else for(s in i=De.createElement("embed"),o)o.hasOwnProperty(s)&&i.setAttribute(s,o[s]);if(x(),p=A(),h=S())if(pe.oMC=y(pe.movieID)||De.createElement("div"),pe.oMC.id)t=pe.oMC.className,pe.oMC.className=(t?t+" ":R.swfDefault)+(p?" "+p:""),pe.oMC.appendChild(i),Xe&&((l=pe.oMC.appendChild(De.createElement("div"))).className=R.swfBox,l.innerHTML=r),Pe=!0;else{if(pe.oMC.id=pe.movieID,pe.oMC.className=R.swfDefault+" "+p,l=u=null,pe.useFlashBlock||(pe.useHighPerformance?u={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:(u={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},n&&(u.left=Math.abs(parseInt(u.left,10))+"px"))),ze&&(pe.oMC.style.zIndex=1e4),!pe.debugFlash)for(d in u)u.hasOwnProperty(d)&&(pe.oMC.style[d]=u[d]);try{Xe||pe.oMC.appendChild(i),h.appendChild(pe.oMC),Xe&&((l=pe.oMC.appendChild(De.createElement("div"))).className=R.swfBox,l.innerHTML=r),Pe=!0}catch(e){throw new Error(k("domError")+" \n"+e.toString())}}return Te=!0,a(),!0},m=function(){return pe.html5Only?(L(),!1):!ge&&(pe.url?((ge=pe.getMovie(pe.id))||(Ie?(Xe?pe.oMC.innerHTML=Ne:pe.oMC.appendChild(Ie),Te=!(Ie=null)):L(pe.id,pe.url),ge=pe.getMovie(pe.id)),"function"==typeof pe.oninitmovie&&setTimeout(pe.oninitmovie,1),ue(),!0):(b("noURL"),!1))},c=function(){setTimeout(f,1e3)},h=function(){ht.setTimeout(function(){V(_e+"useFlashBlock is false, 100% HTML5 mode is possible. Rebooting with preferFlash: false..."),pe.setup({preferFlash:!1}).reboot(),pe.didFlashBlock=!0,pe.beginDelayedInit()},1)},f=function(){var e,t=!1;return!!pe.url&&(!Fe&&(Fe=!0,ae.remove(ht,"load",c),oe&&et&&!Ze?(b("waitFocus"),!1):(Se||0<(e=pe.getMoviePercent())&&e<100&&(t=!0),void setTimeout(function(){return e=pe.getMoviePercent(),t?(Fe=!1,pe._wD(k("waitSWF")),ht.setTimeout(c,1),!1):(Se||(pe._wD(ye+": No Flash response within expected time. Likely causes: "+(0===e?"SWF load failed, ":"")+"Flash blocked or JS-Flash security error."+(pe.debugFlash?" "+k("checkSWF"):""),2),!ot&&e&&(b("localFail",2),pe.debugFlash||b("tryDebug",2)),0===e&&pe._wD(k("swf404",pe.url),1),w("flashtojs",!1,": Timed out"+(ot?" (Check flash security or flash blockers)":" (No plugin/missing SWF?)"))),void(!Se&&tt&&(null===e?pe.useFlashBlock||0===pe.flashLoadTimeout?(pe.useFlashBlock&&H(),b("waitForever")):!pe.useFlashBlock&&Y?h():(b("waitForever"),s({type:"ontimeout",ignoreInit:!0,error:{type:"INIT_FLASHBLOCK"}})):0===pe.flashLoadTimeout?b("waitForever"):!pe.useFlashBlock&&Y?h():N(!0))))},pe.flashLoadTimeout))))},p=function(){function e(){ae.remove(ht,"focus",p)}return Ze||!et||(Ze=tt=!0,b("gotFocus"),Fe=!1,c()),e(),!0},ue=function(){Re.length&&(pe._wD("SoundManager 2: "+Re.join(" "),1),Re=[])},le=function(){ue();var e,t=[];if(pe.useHTML5Audio&&pe.hasHTML5){for(e in pe.audioFormats)pe.audioFormats.hasOwnProperty(e)&&t.push(e+" = "+pe.html5[e]+(!pe.html5[e]&&Ue&&pe.flash[e]?" (using flash)":pe.preferFlash&&pe.flash[e]&&Ue?" (preferring flash)":pe.html5[e]?"":" ("+(pe.audioFormats[e].required?"required, ":"")+"and no flash support)"));pe._wD("SoundManager 2 HTML5 support: "+t.join(", "),1)}},o=function(e){if(Se)return!1;if(pe.html5Only)return b("sm2Loaded",1),Se=!0,d(),w("onload",!0),!0;var t,a=!0;return pe.useFlashBlock&&pe.flashLoadTimeout&&!pe.getMoviePercent()||(Se=!0),t={type:!oe&&Ue?"NO_FLASH":"INIT_TIMEOUT"},pe._wD("SoundManager 2 "+(Le?"failed to load":"loaded")+" ("+(Le?"Flash security/load error":"OK")+") "+String.fromCharCode(Le?10006:10003),Le?2:1),Le||e?(pe.useFlashBlock&&pe.oMC&&(pe.oMC.className=A()+" "+(null===pe.getMoviePercent()?R.swfTimedout:R.swfError)),s({type:"ontimeout",error:t,ignoreInit:!0}),w("onload",!1),C(t),a=!1):w("onload",!0),Le||(pe.waitForWindowLoad&&!Ce?(b("waitOnload"),ae.add(ht,"load",d)):(pe.waitForWindowLoad&&Ce&&b("docLoaded"),d())),a},n=function(){var e,t=pe.setupOptions;for(e in t)t.hasOwnProperty(e)&&(pe[e]===pt?pe[e]=t[e]:pe[e]!==t[e]&&(pe.setupOptions[e]=pe[e]))},_=function(){if(Se)return b("didInit"),!1;function e(){ae.remove(ht,"load",pe.beginDelayedInit)}if(pe.html5Only)return Se||(e(),pe.enabled=!0,o()),!0;m();try{ge._externalInterfaceTest(!1),E(!0,pe.flashPollingInterval||(pe.useHighPerformance?10:50)),pe.debugMode||ge._disableDebug(),pe.enabled=!0,w("jstoflash",!0),pe.html5Only||ae.add(ht,"unload",a)}catch(e){return pe._wD("js/flash exception: "+e.toString()),w("jstoflash",!1),C({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),N(!0),o(),!1}return o(),e(),!0},g=function(){return!P&&(P=!0,n(),x(),!oe&&pe.hasHTML5&&(pe._wD("SoundManager 2: No Flash detected"+(pe.useHTML5Audio?". Trying HTML5-only mode.":", enabling HTML5."),1),pe.setup({useHTML5Audio:!0,preferFlash:!1})),te(),!oe&&Ue&&(Re.push(O.needFlash),pe.setup({flashLoadTimeout:1})),De.removeEventListener&&De.removeEventListener("DOMContentLoaded",g,!1),m(),!0)},ee=function(){return"complete"===De.readyState&&(g(),De.detachEvent("onreadystatechange",ee)),!0},T=function(){Ce=!0,g(),ae.remove(ht,"load",T)},ie(),ae.add(ht,"focus",p),ae.add(ht,"load",c),ae.add(ht,"load",T),De.addEventListener?De.addEventListener("DOMContentLoaded",g,!1):De.attachEvent?De.attachEvent("onreadystatechange",ee):(w("onload",!1),C({type:"NO_DOM2_EVENTS",fatal:!0}))}ht.SM2_DEFER!==pt&&SM2_DEFER||(e=new t),"object"==typeof a&&a&&"object"==typeof a.exports&&(a.exports.SoundManager=t,a.exports.soundManager=e),ht.SoundManager=t,ht.soundManager=e}(window)},{}]},{},[4])(4)});