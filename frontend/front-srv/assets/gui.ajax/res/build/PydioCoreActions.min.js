!function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.PydioCoreActions=f()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n||e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_react=require("react"),_react2=_interopRequireDefault(_react),_materialUi=require("material-ui"),_toggleBmNode=require("./toggleBmNode"),_toggleBmNode2=_interopRequireDefault(_toggleBmNode),BookmarkButton=function(_React$Component){_inherits(BookmarkButton,_React$Component);function BookmarkButton(props){_classCallCheck(this,BookmarkButton),_React$Component.call(this,props),this.state=this.valueFromNodes(props.nodes)}return BookmarkButton.prototype.valueFromNodes=function(){var nodes=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],mixed=void 0,value=void 0;return nodes.forEach(function(n){var nVal="true"===n.getMetadata().get("bookmark");void 0!==value&&nVal!==value&&(mixed=!0),value=nVal}),{value:value,mixed:mixed}},BookmarkButton.prototype.updateValue=function(value){var _this=this,nodes=this.props.nodes;this.setState({saving:!0});var proms=[];nodes.forEach(function(n){var isBookmarked="true"===n.getMetadata().get("bookmark");if(value!==isBookmarked){proms.push(_toggleBmNode2.default(n));var overlay=n.getMetadata().get("overlay_class")||"";if(value){n.getMetadata().set("bookmark","true");var overlays=overlay.replace("mdi mdi-star","").split(",");overlays.push("mdi mdi-star"),n.getMetadata().set("overlay_class",overlays.join(","))}else n.getMetadata().delete("bookmark"),n.getMetadata().set("overlay_class",overlay.replace("mdi mdi-star",""));n.notify("node_replaced")}}),Promise.all(proms).then(function(){window.setTimeout(function(){_this.setState({saving:!1})},250),_this.setState(_this.valueFromNodes(nodes))}).catch(function(){_this.setState({saving:!1})})},BookmarkButton.prototype.render=function(){var _this2=this,styles=this.props.styles,_state=this.state,value=_state.value,mixed=_state.mixed,saving=_state.saving,icon=void 0,touchValue=void 0,tt=void 0,disabled=void 0,mm=_pydio2.default.getInstance().MessageHash;return mixed?(icon="star-half",touchValue=!0,tt=mm["bookmark.button.tip.mixed"]):value?(icon="star",touchValue=!1,tt=mm["bookmark.button.tip.remove"]):(icon="star-outline",touchValue=!0,tt=mm["bookmark.button.tip.add"]),saving&&(icon="star-circle",tt=mm["bookmark.button.tip.saving"],disabled=!0),_react2.default.createElement(_materialUi.IconButton,_extends({disabled:disabled,iconClassName:"mdi mdi-"+icon,tooltip:tt,onClick:function(){return _this2.updateValue(touchValue)}},styles))},BookmarkButton}(_react2.default.Component);exports.default=BookmarkButton,module.exports=exports.default},{"./toggleBmNode":5,"material-ui":"material-ui",pydio:"pydio",react:"react"}],2:[function(require,module,exports){"use strict";exports.__esModule=!0;var _globals=require("../globals");exports.default=function(){_globals.global.Notification?(alert(_globals.MessageHash["notification_center.12"]),_globals.global.Notification.requestPermission(function(grant){["default","granted","denied"].indexOf(grant)})):_globals.global.alert(_globals.MessageHash["notification_center.13"])},module.exports=exports.default},{"../globals":9}],3:[function(require,module,exports){"use strict";exports.__esModule=!0;var _globals=require("../globals");exports.default=function(){_globals.pydio.UI.openComponentInModal("PydioCoreActions","PasswordDialog",{locked:_globals.pydio.user&&"pass_change"===_globals.pydio.user.lock})},module.exports=exports.default},{"../globals":9}],4:[function(require,module,exports){"use strict"},{}],5:[function(require,module,exports){"use strict";exports.__esModule=!0,exports.default=toggleBookmarkNode;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _globals=require("../globals"),_pydioHttpApi=require("pydio/http/api"),_pydioHttpApi2=_interopRequireDefault(_pydioHttpApi),_cellsSdk=require("cells-sdk");function toggleBookmarkNode(node,selection){var isBookmarked="true"===node.getMetadata().get("bookmark"),nodeUuid=node.getMetadata().get("uuid"),userId=_globals.pydio.user.id,api=new _cellsSdk.UserMetaServiceApi(_pydioHttpApi2.default.getRestClient()),request=new _cellsSdk.IdmUpdateUserMetaRequest;if(isBookmarked){var searchRequest=new _cellsSdk.IdmSearchUserMetaRequest;return searchRequest.NodeUuids=[nodeUuid],searchRequest.Namespace="bookmark",api.searchUserMeta(searchRequest).then(function(res){res.Metadatas&&res.Metadatas.length&&(request.Operation=_cellsSdk.UpdateUserMetaRequestUserMetaOp.constructFromObject("DELETE"),request.MetaDatas=res.Metadatas,api.updateUserMeta(request).then(function(){selection&&selection.requireNodeReload(node),_globals.pydio.notify("reload-bookmarks")}))})}request.Operation=_cellsSdk.UpdateUserMetaRequestUserMetaOp.constructFromObject("PUT");var userMeta=new _cellsSdk.IdmUserMeta;return userMeta.NodeUuid=nodeUuid,userMeta.Namespace="bookmark",userMeta.JsonValue='"true"',userMeta.Policies=[_cellsSdk.ServiceResourcePolicy.constructFromObject({Resource:nodeUuid,Action:"OWNER",Subject:"user:"+userId,Effect:"allow"}),_cellsSdk.ServiceResourcePolicy.constructFromObject({Resource:nodeUuid,Action:"READ",Subject:"user:"+userId,Effect:"allow"}),_cellsSdk.ServiceResourcePolicy.constructFromObject({Resource:nodeUuid,Action:"WRITE",Subject:"user:"+userId,Effect:"allow"})],request.MetaDatas=[userMeta],api.updateUserMeta(request).then(function(){selection&&selection.requireNodeReload(node),_globals.pydio.notify("reload-bookmarks")})}module.exports=exports.default},{"../globals":9,"cells-sdk":"cells-sdk","pydio/http/api":"pydio/http/api"}],6:[function(require,module,exports){"use strict";exports.__esModule=!0;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _globals=require("../globals"),_toggleBmNode=require("./toggleBmNode"),_toggleBmNode2=_interopRequireDefault(_toggleBmNode);exports.default=function(){var selection=_globals.pydio.getContextHolder();!selection.isEmpty()&&selection.isUnique()&&_toggleBmNode2.default(selection.getUniqueNode(),selection)},module.exports=exports.default},{"../globals":9,"./toggleBmNode":5}],7:[function(require,module,exports){"use strict";exports.__esModule=!0;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_materialUi=require("material-ui"),React=require("react"),createReactClass=require("create-react-class"),BootUI=require("pydio/http/resources-manager").requireLib("boot"),ActionDialogMixin=BootUI.ActionDialogMixin,AsyncComponent=BootUI.AsyncComponent,PasswordDialog=createReactClass({displayName:"PasswordDialog",mixins:[ActionDialogMixin],getInitialState:function(){return{passValid:!1}},getDefaultProps:function(){return{dialogTitle:_pydio2.default.getMessages()[194],dialogIsModal:!0,dialogSize:"sm"}},getButtons:function(){var _this=this,updater=arguments.length<=0||void 0===arguments[0]?null:arguments[0];updater&&(this._updater=updater);var buttons=[];return this.props.locked||buttons.push(React.createElement(_materialUi.FlatButton,{label:this.props.pydio.MessageHash[49],onClick:function(){return _this.dismiss()}})),buttons.push(React.createElement(_materialUi.FlatButton,{label:this.props.pydio.MessageHash[48],onClick:this.submit.bind(this),disabled:!this.state.passValid})),buttons},submit:function(){if(!this.state.passValid)return!1;this.refs.passwordForm.instance.post(function(value){value&&this.dismiss()}.bind(this))},passValidStatusChange:function(status){var _this2=this;this.setState({passValid:status},function(){_this2._updater(_this2.getButtons())})},render:function(){return React.createElement(AsyncComponent,{namespace:"UserAccount",componentName:"PasswordForm",pydio:this.props.pydio,ref:"passwordForm",onValidStatusChange:this.passValidStatusChange})}});exports.default=PasswordDialog,module.exports=exports.default},{"create-react-class":"create-react-class","material-ui":"material-ui",pydio:"pydio","pydio/http/resources-manager":"pydio/http/resources-manager",react:"react"}],8:[function(require,module,exports){"use strict";exports.__esModule=!0;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _react=require("react"),_react2=_interopRequireDefault(_react),_createReactClass=require("create-react-class"),_createReactClass2=_interopRequireDefault(_createReactClass),_pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_materialUi=require("material-ui"),_reactMarkdown=require("react-markdown"),_reactMarkdown2=_interopRequireDefault(_reactMarkdown),_Pydio$requireLib=_pydio2.default.requireLib("boot"),ActionDialogMixin=_Pydio$requireLib.ActionDialogMixin,SubmitButtonProviderMixin=_Pydio$requireLib.SubmitButtonProviderMixin,Loader=_Pydio$requireLib.Loader,mdStyle="\n.credits-md h4 {\n    padding-top: 0;\n}\n\n.credits-md h5 {\n    font-weight: 500;\n}\n\n.credits-md ul {\n    padding-left: 20px;\n    padding-bottom: 20px;\n}\n\n.credits-md li {\n    list-style-type: square;\n    line-height: 1.6em;\n}\n\n.credits-md a {\n    color: #607D8B;\n    font-weight: 500;\n}\n",SplashDialog=_createReactClass2.default({displayName:"SplashDialog",mixins:[ActionDialogMixin,SubmitButtonProviderMixin],getDefaultProps:function(){return{dialogTitle:"",dialogSize:"lg",dialogIsModal:!1,dialogPadding:!1,dialogScrollBody:!0}},submit:function(){this.dismiss()},openDocs:function(){open("https://pydio.com/en/docs")},openForum:function(){open("https://forum.pydio.com")},openGithub:function(){open("https://github.com/pydio/cells/issues")},getInitialState:function(){return{aboutContent:null}},componentDidMount:function(){var _this=this;window.fetch("plug/gui.ajax/credits.md",{method:"GET",credentials:"same-origin"}).then(function(response){response.text().then(function(data){_this.setState({aboutContent:data})})})},render:function(){var credit=void 0;return credit=this.state.aboutContent?_react2.default.createElement(_reactMarkdown2.default,{source:this.state.aboutContent}):_react2.default.createElement(Loader,{style:{minHeight:200}}),credit=_react2.default.createElement(_materialUi.Card,null,_react2.default.createElement(_materialUi.CardTitle,{title:pydio.Parameters.get("backend").PackageLabel,subtitle:"Details about version, licensing and how to get help"}),_react2.default.createElement(_materialUi.Divider,null),_react2.default.createElement(_materialUi.CardActions,{style:{display:"flex",alignItems:"center"}},_react2.default.createElement(_materialUi.FlatButton,{primary:!0,icon:_react2.default.createElement(_materialUi.FontIcon,{className:"mdi mdi-book-variant"}),label:"Docs",onClick:this.openDocs}),_react2.default.createElement(_materialUi.FlatButton,{primary:!0,icon:_react2.default.createElement(_materialUi.FontIcon,{className:"mdi mdi-slack"}),label:"Forums",onClick:this.openForum}),_react2.default.createElement(_materialUi.FlatButton,{primary:!0,icon:_react2.default.createElement(_materialUi.FontIcon,{className:"mdi mdi-github-box"}),label:"Issues",onClick:this.openGithub}),_react2.default.createElement("span",{style:{flex:1}}),_react2.default.createElement(_materialUi.IconButton,{style:{width:40,height:40,padding:8},iconStyle:{color:"#FF786A"},iconClassName:"icomoon-cells",onClick:function(){open("https://pydio.com/?from=cells")},tooltip:"Pydio.com"}),_react2.default.createElement(_materialUi.IconButton,{style:{width:40,height:40,padding:8},iconStyle:{color:"#3b5998"},iconClassName:"mdi mdi-facebook-box",onClick:function(){open("https://facebook.com/Pydio")},tooltip:"@Pydio"}),_react2.default.createElement(_materialUi.IconButton,{style:{width:40,height:40,padding:8},iconStyle:{color:"#00acee"},iconClassName:"mdi mdi-twitter-box",onClick:function(){open("https://twitter.com/pydio")},tooltip:"@pydio"})),_react2.default.createElement(_materialUi.Divider,null),_react2.default.createElement(_materialUi.CardText,{className:"credits-md"},credit),_react2.default.createElement("style",{type:"text/css",dangerouslySetInnerHTML:{__html:mdStyle}})),_react2.default.createElement("div",{style:{height:"100%",backgroundColor:"#CFD8DC"}},credit)}});exports.default=SplashDialog,module.exports=exports.default},{"create-react-class":"create-react-class","material-ui":"material-ui",pydio:"pydio",react:"react","react-markdown":"react-markdown"}],9:[function(require,module,exports){"use strict";exports.__esModule=!0;var global=window,pydio=global.pydio,MessageHash=pydio.MessageHash;exports.global=global,exports.pydio=pydio,exports.MessageHash=MessageHash},{}],10:[function(require,module,exports){"use strict";exports.__esModule=!0;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _dialogSplashDialog=require("./dialog/SplashDialog"),_dialogSplashDialog2=_interopRequireDefault(_dialogSplashDialog),_dialogPasswordDialog=require("./dialog/PasswordDialog"),_dialogPasswordDialog2=_interopRequireDefault(_dialogPasswordDialog),_callbacksBookmarkButton=require("./callbacks/BookmarkButton"),_callbacksBookmarkButton2=_interopRequireDefault(_callbacksBookmarkButton),Callbacks={switchLanguage:require("./callbacks/switchLanguage"),changePass:require("./callbacks/changePass"),toggleBookmark:require("./callbacks/toggleBookmark"),activateDesktopNotifications:require("./callbacks/activateDesktopNotifications")},Navigation={splash:require("./navigation/splash"),up:require("./navigation/up"),refresh:require("./navigation/refresh"),externalSelection:require("./navigation/externalSelection"),openGoPro:require("./navigation/openGoPro"),switchToSettings:require("./navigation/switchToSettings"),switchToHomepage:require("./navigation/switchToHomepage")};exports.Callbacks=Callbacks,exports.Navigation=Navigation,exports.SplashDialog=_dialogSplashDialog2.default,exports.PasswordDialog=_dialogPasswordDialog2.default,exports.BookmarkButton=_callbacksBookmarkButton2.default},{"./callbacks/BookmarkButton":1,"./callbacks/activateDesktopNotifications":2,"./callbacks/changePass":3,"./callbacks/switchLanguage":4,"./callbacks/toggleBookmark":6,"./dialog/PasswordDialog":7,"./dialog/SplashDialog":8,"./navigation/externalSelection":11,"./navigation/openGoPro":12,"./navigation/refresh":13,"./navigation/splash":14,"./navigation/switchToHomepage":15,"./navigation/switchToSettings":16,"./navigation/up":17}],11:[function(require,module,exports){"use strict";exports.__esModule=!0;var _globals=require("../globals");exports.default=function(){var userSelection=_globals.pydio.getUserSelection();if(userSelection.isUnique()&&!userSelection.hasDir()){var fileName=userSelection.getUniqueFileName(),selectorData=_globals.pydio.getController().selectorData;if("ckeditor"==selectorData.get("type")){var ckData=selectorData.get("data");if(ckData.CKEditorFuncNum){var imagePath=fileName;ckData.relative_path&&(imagePath=ckData.relative_path+fileName),_globals.global.opener.CKEDITOR.tools.callFunction(ckData.CKEditorFuncNum,imagePath),_globals.global.close()}}}},module.exports=exports.default},{"../globals":9}],12:[function(require,module,exports){"use strict";exports.__esModule=!0;var _globals=require("../globals");exports.default=function(){_globals.global.open("https://pydio.com/en/go-pro?referrer=settings")},module.exports=exports.default},{"../globals":9}],13:[function(require,module,exports){"use strict";exports.__esModule=!0;var _globals=require("../globals");exports.default=function(){_globals.pydio.fireContextRefresh()},module.exports=exports.default},{"../globals":9}],14:[function(require,module,exports){"use strict";exports.__esModule=!0;var _globals=require("../globals");exports.default=function(){_globals.pydio.UI.openComponentInModal("PydioCoreActions","SplashDialog")},module.exports=exports.default},{"../globals":9}],15:[function(require,module,exports){"use strict";exports.__esModule=!0;var _globals=require("../globals");exports.default=function(){_globals.pydio.repositoryId&&"homepage"===_globals.pydio.repositoryId||_globals.pydio.triggerRepositoryChange("homepage")},module.exports=exports.default},{"../globals":9}],16:[function(require,module,exports){"use strict";exports.__esModule=!0;var _globals=require("../globals");exports.default=function(){_globals.pydio.repositoryId&&"settings"===_globals.pydio.repositoryId||_globals.pydio.triggerRepositoryChange("settings")},module.exports=exports.default},{"../globals":9}],17:[function(require,module,exports){"use strict";exports.__esModule=!0;var _globals=require("../globals");exports.default=function(){_globals.pydio.fireContextUp()},module.exports=exports.default},{"../globals":9}]},{},[10])(10)});