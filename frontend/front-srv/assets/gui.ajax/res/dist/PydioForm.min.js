!function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.PydioForm=f()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n||e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";exports.__esModule=!0;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_react2=_interopRequireDefault(_react),_materialUi=require("material-ui"),_TextField=require("./TextField"),_TextField2=_interopRequireDefault(_TextField),AltText=function(_React$Component){_inherits(AltText,_React$Component);function AltText(){_classCallCheck(this,AltText),_React$Component.apply(this,arguments)}return AltText.prototype.render=function(){var _props=this.props,attributes=_props.attributes,_props$altIcon=_props.altIcon,altIcon=void 0===_props$altIcon?"mdi mdi-toggle-switch":_props$altIcon,_props$altIconText=_props.altIconText,altIconText=void 0===_props$altIconText?"mdi mdi-textbox":_props$altIconText,_props$altTip=_props.altTip,altTip=void 0===_props$altTip?"Switch to text version":_props$altTip,onAltTextSwitch=_props.onAltTextSwitch,comp=void 0,alternativeText=attributes.alternativeText;return comp=alternativeText?_react2.default.createElement(_TextField2.default,this.props):this.props.children,_react2.default.createElement("div",{style:{display:"flex"}},_react2.default.createElement("div",{style:{flex:1}},comp),_react2.default.createElement("div",null,_react2.default.createElement(_materialUi.IconButton,{iconClassName:alternativeText?altIcon:altIconText,title:altTip,onClick:function(){return onAltTextSwitch(attributes.name,!alternativeText)},iconStyle:{opacity:.3,fontSize:20},style:{padding:"14px 8px",width:42,height:42}})))},AltText}(_react2.default.Component);exports.default=AltText;module.exports=exports.default},{"./TextField":10,"material-ui":"material-ui",react:"react"}],2:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_hocAsFormField=require("../hoc/asFormField"),_hocAsFormField2=_interopRequireDefault(_hocAsFormField),_hocWithChoices=require("../hoc/withChoices"),_hocWithChoices2=_interopRequireDefault(_hocWithChoices),React=require("react"),_require=require("material-ui"),AutoComplete=_require.AutoComplete,MenuItem=_require.MenuItem,RefreshIndicator=_require.RefreshIndicator,_Pydio$requireLib=_pydio2.default.requireLib("hoc"),ModernStyles=_Pydio$requireLib.ModernStyles,ModernAutoComplete=_Pydio$requireLib.ModernAutoComplete,AutocompleteBox=function(_React$Component){_inherits(AutocompleteBox,_React$Component);function AutocompleteBox(){_classCallCheck(this,AutocompleteBox),_React$Component.apply(this,arguments)}return AutocompleteBox.prototype.handleUpdateInput=function(searchText){},AutocompleteBox.prototype.handleNewRequest=function(chosenValue){void 0===chosenValue.key?this.props.onChange(null,chosenValue):this.props.onChange(null,chosenValue.key)},AutocompleteBox.prototype.render=function(){var _this=this,_props=this.props,choices=_props.choices,isDisplayGrid=_props.isDisplayGrid,editMode=_props.editMode,disabled=_props.disabled,toggleEditMode=_props.toggleEditMode,variant=_props.variant,dataSource=[],labels={};choices.forEach(function(choice,key){dataSource.push({key:key,text:choice,value:React.createElement(MenuItem,null,choice)}),labels[key]=choice});var value=this.props.value;return labels&&labels[value]&&(value=labels[value]),isDisplayGrid()&&!editMode||disabled?(choices.get(value)&&(value=choices.get(value)),React.createElement("div",{onClick:disabled?function(){}:toggleEditMode,className:value?"":"paramValue-empty"},value||"Empty","   ",React.createElement("span",{className:"icon-caret-down"}))):React.createElement("div",{className:"pydioform_autocomplete",style:{position:"relative"}},!dataSource.length&&React.createElement(RefreshIndicator,{size:30,right:10,top:0,status:"loading"}),"v2"!==variant&&dataSource.length&&React.createElement(AutoComplete,_extends({fullWidth:!0,searchText:value,onUpdateInput:function(s){return _this.handleUpdateInput(s)},onNewRequest:function(v){return _this.handleNewRequest(v)},dataSource:dataSource,hintText:this.props.attributes.label,filter:function(searchText,key){return!(!key||!searchText)&&0===key.toLowerCase().indexOf(searchText.toLowerCase())},openOnFocus:!0,menuProps:{maxHeight:200}},ModernStyles.textField)),"v2"===variant&&dataSource.length&&React.createElement(ModernAutoComplete,_extends({fullWidth:!0,searchText:value,onUpdateInput:function(s){return _this.handleUpdateInput(s)},onNewRequest:function(v){return _this.handleNewRequest(v)},dataSource:dataSource,hintText:this.props.attributes.label,filter:function(searchText,key){return!(!key||!searchText)&&0===key.toLowerCase().indexOf(searchText.toLowerCase())},openOnFocus:!0,menuProps:{maxHeight:200},autoComplete:"no-completion"},ModernStyles.textField)))},AutocompleteBox}(React.Component);exports.default=AutocompleteBox=_hocAsFormField2.default(AutocompleteBox),exports.default=AutocompleteBox=_hocWithChoices2.default(AutocompleteBox),exports.default=AutocompleteBox,module.exports=exports.default},{"../hoc/asFormField":13,"../hoc/withChoices":14,"material-ui":"material-ui",pydio:"pydio",react:"react"}],3:[function(require,module,exports){"use strict";exports.__esModule=!0;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _hocAsFormField=require("../hoc/asFormField"),_hocAsFormField2=_interopRequireDefault(_hocAsFormField),React=require("react"),debounce=require("lodash.debounce"),_require=require("material-ui"),AutoComplete=_require.AutoComplete,MenuItem=_require.MenuItem,RefreshIndicator=_require.RefreshIndicator,FontIcon=_require.FontIcon,AutocompleteTree=function(_React$Component){_inherits(AutocompleteTree,_React$Component);function AutocompleteTree(){_classCallCheck(this,AutocompleteTree),_React$Component.apply(this,arguments)}return AutocompleteTree.prototype.handleUpdateInput=function(searchText){this.debounced(),this.setState({searchText:searchText})},AutocompleteTree.prototype.handleNewRequest=function(chosenValue){var key=void 0;key=void 0===chosenValue.key?chosenValue:chosenValue.key,this.props.onChange(null,key),this.loadValues(key)},AutocompleteTree.prototype.componentWillMount=function(){this.debounced=debounce(this.loadValues.bind(this),300),this.lastSearch=null;var value="";this.props.value&&(value=this.props.value),this.loadValues(value)},AutocompleteTree.prototype.loadValues=function(){var value=arguments.length<=0||void 0===arguments[0]?"":arguments[0],basePath=value;if(!value&&this.state.searchText){var last=this.state.searchText.lastIndexOf("/");basePath=this.state.searchText.substr(0,last)}null!==this.lastSearch&&this.lastSearch===basePath||(this.lastSearch=basePath)},AutocompleteTree.prototype.render=function(){var dataSource=[];this.state&&this.state.nodes&&this.state.nodes.forEach(function(node){var icon="mdi mdi-folder";node.uuid.startsWith("DATASOURCE:")&&(icon="mdi mdi-database"),dataSource.push({key:node.path,text:node.path,value:React.createElement(MenuItem,null,React.createElement(FontIcon,{className:icon,color:"#616161",style:{float:"left",marginRight:8}})," ",node.path)})});var displayText=this.state.value;return React.createElement("div",{className:"pydioform_autocomplete",style:{position:"relative"}},!dataSource.length&&React.createElement(RefreshIndicator,{size:30,right:10,top:0,status:"loading"}),React.createElement(AutoComplete,{fullWidth:!0,searchText:displayText,onUpdateInput:this.handleUpdateInput.bind(this),onNewRequest:this.handleNewRequest.bind(this),dataSource:dataSource,floatingLabelText:this.props.attributes.label,filter:function(searchText,key){return 0===key.toLowerCase().indexOf(searchText.toLowerCase())},openOnFocus:!0,menuProps:{maxHeight:200}}))},AutocompleteTree}(React.Component);exports.default=_hocAsFormField2.default(AutocompleteTree),module.exports=exports.default},{"../hoc/asFormField":13,"lodash.debounce":"lodash.debounce","material-ui":"material-ui",react:"react"}],4:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var React=require("react"),FileDropzone=function(_React$Component){_inherits(FileDropzone,_React$Component);function FileDropzone(props){_classCallCheck(this,FileDropzone),_React$Component.call(this,_extends({onDrop:function(){}},props)),this.state={isDragActive:!1,supportClick:void 0===props.supportClick||props.supportClick,multiple:void 0===props.multiple||props.multiple}}return FileDropzone.prototype.onDragLeave=function(e){this.setState({isDragActive:!1})},FileDropzone.prototype.onDragOver=function(e){e.preventDefault(),e.dataTransfer.dropEffect="copy",this.setState({isDragActive:!0})},FileDropzone.prototype.onFilePicked=function(e){if(e.target&&e.target.files){var files=e.target.files,maxFiles=this.state.multiple?files.length:1;files=Array.prototype.slice.call(files,0,maxFiles),this.props.onDrop&&this.props.onDrop(files,e,this)}},FileDropzone.prototype.onFolderPicked=function(e){this.props.onFolderPicked&&this.props.onFolderPicked(e.target.files)},FileDropzone.prototype.onDrop=function(e){if(this.setState({isDragActive:!1}),e.preventDefault(),!this.props.ignoreNativeDrop){var files=void 0;e.dataTransfer?files=e.dataTransfer.files:e.target&&(files=e.target.files);for(var maxFiles=this.state.multiple?files.length:1,i=0;i<maxFiles;i++)files[i].preview=URL.createObjectURL(files[i]);this.props.onDrop&&(files=Array.prototype.slice.call(files,0,maxFiles),this.props.onDrop(files,e,this))}},FileDropzone.prototype.onClick=function(){!0===this.state.supportClick&&this.open()},FileDropzone.prototype.open=function(){this.refs.fileInput.click()},FileDropzone.prototype.openFolderPicker=function(){this.refs.folderInput.setAttribute("webkitdirectory","true"),this.refs.folderInput.click()},FileDropzone.prototype.render=function(){var _this=this,className=this.props.className||"file-dropzone";this.state.isDragActive&&(className+=" active");var style={width:this.props.size||100,height:this.props.size||100};this.props.style&&(style=_extends({},style,this.props.style)),this.state.isDragActive&&this.props.dragActiveStyle&&(style=_extends({},style,this.props.dragActiveStyle));var folderInput=void 0;return this.props.enableFolders&&(folderInput=React.createElement("input",{style:{display:"none"},name:"userfolder",type:"file",ref:"folderInput",onChange:function(e){return _this.onFolderPicked(e)}})),React.createElement("div",{className:className,style:style,onClick:this.onClick.bind(this),onDragLeave:this.onDragLeave.bind(this),onDragOver:this.onDragOver.bind(this),onDrop:this.onDrop.bind(this)},React.createElement("input",{style:{display:"none"},name:"userfile",type:"file",multiple:this.state.multiple,ref:"fileInput",value:"",onChange:this.onFilePicked.bind(this),accept:this.props.accept}),folderInput,this.props.children)},FileDropzone}(React.Component);exports.default=FileDropzone,module.exports=exports.default},{react:"react"}],5:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_react=require("react"),_react2=_interopRequireDefault(_react),_materialUi=require("material-ui"),_hocAsFormField=require("../hoc/asFormField"),_hocAsFormField2=_interopRequireDefault(_hocAsFormField),_Pydio$requireLib=_pydio2.default.requireLib("hoc"),ModernStyles=_Pydio$requireLib.ModernStyles,legendStyle={position:"absolute",fontSize:16,lineHeight:"22px",top:25,transition:"all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms",zIndex:1,transform:"scale(0.75) translate(0px, -28px)",transformOrigin:"left top",pointerEvents:"none",userSelect:"none",color:"rgba(0, 0, 0, 0.3)",left:8,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"127%"},InputBoolean=function(_React$Component){_inherits(InputBoolean,_React$Component);function InputBoolean(){_classCallCheck(this,InputBoolean),_React$Component.apply(this,arguments)}return InputBoolean.prototype.render=function(){var boolVal=this.props.value,_props=this.props,variant=_props.variant,variantShowLegend=_props.variantShowLegend,disabled=_props.disabled,onChange=_props.onChange,attributes=_props.attributes,isDisplayForm=_props.isDisplayForm;if("string"==typeof boolVal&&(boolVal="true"===boolVal),"v2"===variant){var toggleStyle=_extends({},ModernStyles.toggleFieldV2);return variantShowLegend&&(toggleStyle.style=_extends({},toggleStyle.style,{padding:"23px 6px 4px"})),_react2.default.createElement("div",{style:{position:"relative",height:58}},_react2.default.createElement("div",{style:_extends({},legendStyle,{display:variantShowLegend?"block":"none"})},attributes.description),_react2.default.createElement(_materialUi.Checkbox,_extends({checked:boolVal,onCheck:function(e,v){return onChange(e,v)},disabled:disabled,label:isDisplayForm()?attributes.label:null,labelPosition:"right"},toggleStyle)))}return _react2.default.createElement(_materialUi.Toggle,_extends({toggled:boolVal,onToggle:function(e,v){return onChange(e,v)},disabled:disabled,label:isDisplayForm()?attributes.label:null,labelPosition:isDisplayForm()?"left":"right"},ModernStyles.toggleField))},InputBoolean}(_react2.default.Component);exports.default=_hocAsFormField2.default(InputBoolean,!0),module.exports=exports.default},{"../hoc/asFormField":13,"material-ui":"material-ui",pydio:"pydio",react:"react"}],6:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_react2=_interopRequireDefault(_react),_pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_pydioHttpApi=require("pydio/http/api"),_pydioHttpApi2=_interopRequireDefault(_pydioHttpApi),_FileDropzone=require("./FileDropzone"),_FileDropzone2=_interopRequireDefault(_FileDropzone),_pydioUtilLang=require("pydio/util/lang"),_pydioUtilLang2=_interopRequireDefault(_pydioUtilLang),_materialUi=require("material-ui"),_Pydio$requireLib=_pydio2.default.requireLib("hoc"),NativeFileDropProvider=_Pydio$requireLib.NativeFileDropProvider,BinaryDropZone=NativeFileDropProvider(_FileDropzone2.default,function(items,files,props){}),InputImage=function(_React$Component){_inherits(InputImage,_React$Component);function InputImage(props){_classCallCheck(this,InputImage),_React$Component.call(this,props);var imageSrc=void 0,originalBinary=void 0;this.props.value?(imageSrc=this.getBinaryUrl(this.props),originalBinary=this.props.value):this.props.attributes.defaultImage&&(imageSrc=this.props.attributes.defaultImage),this.state={imageSrc:imageSrc,originalBinary:originalBinary,value:this.props.value}}return InputImage.prototype.componentWillReceiveProps=function(newProps){var imgSrc=void 0;(newProps.value||newProps.binary_context&&newProps.binary_context!==this.props.binary_context)&&!this.state.reset?imgSrc=this.getBinaryUrl(newProps,this.state.temporaryBinary&&this.state.temporaryBinary===newProps.value):newProps.attributes.defaultImage&&(imgSrc=newProps.attributes.defaultImage),imgSrc&&this.setState({imageSrc:imgSrc,reset:!1,value:newProps.value})},InputImage.prototype.getBinaryUrl=function(props){var pydio=_pydioHttpApi2.default.getClient().getPydioObject(),url=pydio.Parameters.get("ENDPOINT_REST_API")+props.attributes.loadAction,bId=props.value;return props.binary_context&&0===props.binary_context.indexOf("user_id=")&&(bId=props.binary_context.replace("user_id=","")),url=url.replace("{BINARY}",bId)},InputImage.prototype.getUploadUrl=function(){var pydio=_pydioHttpApi2.default.getClient().getPydioObject(),url=pydio.Parameters.get("ENDPOINT_REST_API")+this.props.attributes.uploadAction,bId="";return bId=this.props.binary_context&&0===this.props.binary_context.indexOf("user_id=")?this.props.binary_context.replace("user_id=",""):this.props.value?this.props.value:_pydioUtilLang2.default.computeStringSlug(this.props.attributes.name+".png"),url=url.replace("{BINARY}",bId)},InputImage.prototype.uploadComplete=function(newBinaryName){var prevValue=this.state.value;if(this.setState({temporaryBinary:newBinaryName,value:null}),this.props.onChange){var additionalFormData={type:"binary"};this.state.originalBinary&&(additionalFormData.original_binary=this.state.originalBinary),this.props.onChange(newBinaryName,prevValue,additionalFormData),this.setState({dirty:!0,value:newBinaryName})}},InputImage.prototype.htmlUpload=function(){window.formManagerHiddenIFrameSubmission=function(result){this.uploadComplete(result.trim()),window.formManagerHiddenIFrameSubmission=null}.bind(this),this.refs.uploadForm.submit()},InputImage.prototype.onDrop=function(files,event,dropzone){var _this=this;if(0!==files.length){var messages=_pydio2.default.getMessages();if("avatar"===this.props.name&&files[0].size>5242880)return void this.setState({error:messages["form.input-image.avatarMax"]});if(-1===["image/jpeg","image/png","image/bmp","image/tiff","image/webp"].indexOf(files[0].type))return void this.setState({error:messages["form.input-image.fileTypes"]});this.setState({error:null}),_pydioHttpApi2.default.supportsUpload()?(this.setState({loading:!0}),_pydioHttpApi2.default.getRestClient().getOrUpdateJwt().then(function(jwt){var xhrSettings={customHeaders:{Authorization:"Bearer "+jwt}};_pydioHttpApi2.default.getClient().uploadFile(files[0],"userfile","",function(transport){var result=JSON.parse(transport.responseText);result&&result.binary&&_this.uploadComplete(result.binary),_this.setState({loading:!1})},function(error){_this.setState({loading:!1,error:error})},function(computableEvent){},_this.getUploadUrl(),xhrSettings)})):this.htmlUpload()}},InputImage.prototype.clearImage=function(){var _this2=this;confirm(_pydio2.default.getMessages()["form.input-image.clearConfirm"])&&function(){var prevValue=_this2.state.value;_this2.setState({value:null,error:null,reset:!0},function(){this.props.onChange("",prevValue,{type:"binary"})}.bind(_this2))}()},InputImage.prototype.render=function(){var _this3=this,_state=this.state,loading=_state.loading,error=_state.error,coverImageStyle={backgroundImage:"url("+this.state.imageSrc+")",backgroundPosition:"50% 50%",backgroundSize:"cover",position:"relative"},overlay=void 0,overlayBg={},isDefault=this.props.attributes.defaultImage&&this.props.attributes.defaultImage===this.state.imageSrc;error?(overlayBg={backgroundColor:"rgba(255, 255, 255, 0.77)",borderRadius:"50%"},overlay=_react2.default.createElement("div",{style:{color:"#F44336",textAlign:"center",fontSize:11,cursor:"pointer"},onClick:function(){_this3.setState({error:null})}},_react2.default.createElement("span",{className:"mdi mdi-alert",style:{fontSize:40}}),_react2.default.createElement("br",null),error)):overlay=loading?_react2.default.createElement(_materialUi.CircularProgress,{mode:"indeterminate"}):_react2.default.createElement("span",{className:"mdi mdi-camera",style:{fontSize:40,opacity:.5,color:isDefault?null:"white"}});var variant=this.props.variant;return _react2.default.createElement("div",{style:"v2"===variant?{backgroundColor:"#f6f6f8"}:null},_react2.default.createElement("div",{className:"image-label"},this.props.attributes.label),_react2.default.createElement("form",{ref:"uploadForm",encType:"multipart/form-data",target:"uploader_hidden_iframe",method:"post",action:this.getUploadUrl()},_react2.default.createElement(BinaryDropZone,{onDrop:this.onDrop.bind(this),accept:"image/*",style:coverImageStyle},_react2.default.createElement("div",{style:_extends({width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},overlayBg)},overlay))),!isDefault&&_react2.default.createElement("div",{className:"binary-remove-button",onClick:this.clearImage.bind(this)},_react2.default.createElement("span",{key:"remove",className:"mdi mdi-close"})," ",_pydio2.default.getMessages()["form.input-image.clearButton"]),_react2.default.createElement("iframe",{style:{display:"none"},id:"uploader_hidden_iframe",name:"uploader_hidden_iframe"}))},InputImage}(_react2.default.Component);exports.default=InputImage,module.exports=exports.default},{"./FileDropzone":4,"material-ui":"material-ui",pydio:"pydio","pydio/http/api":"pydio/http/api","pydio/util/lang":"pydio/util/lang",react:"react"}],7:[function(require,module,exports){"use strict";exports.__esModule=!0;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_react2=_interopRequireDefault(_react),_pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_hocAsFormField=require("../hoc/asFormField"),_hocAsFormField2=_interopRequireDefault(_hocAsFormField),_Pydio$requireLib=_pydio2.default.requireLib("hoc"),ModernTextField=_Pydio$requireLib.ModernTextField,InputInteger=function(_React$Component){_inherits(InputInteger,_React$Component);function InputInteger(){_classCallCheck(this,InputInteger),_React$Component.apply(this,arguments)}return InputInteger.prototype.keyDown=function(event){var inc=0,multiple=1;if("Enter"===event.key)return void this.props.toggleEditMode();"ArrowUp"===event.key?inc=1:"ArrowDown"===event.key&&(inc=-1),event.shiftKey&&(multiple=10);var parsed=parseInt(this.props.value);isNaN(parsed)&&(parsed=0);var value=parsed+inc*multiple;this.props.onChange(null,value)},InputInteger.prototype.render=function(){var _this=this,_props=this.props,value=_props.value,isDisplayGrid=_props.isDisplayGrid,isDisplayForm=_props.isDisplayForm,editMode=_props.editMode,disabled=_props.disabled,toggleEditMode=_props.toggleEditMode,attributes=_props.attributes,variant=_props.variant;if(isDisplayGrid()&&!editMode)return _react2.default.createElement("div",{onClick:disabled?function(){}:toggleEditMode,className:value?"":"paramValue-empty"},value||"Empty");var intval=void 0;return value?(intval=parseInt(value)+"",isNaN(intval)&&(intval=value+"")):intval="0",_react2.default.createElement("span",{className:"integer-input"},_react2.default.createElement(ModernTextField,{value:intval,onChange:function(e,v){return _this.props.onChange(e,v)},onKeyDown:function(e){return _this.keyDown(e)},disabled:disabled,fullWidth:!0,variant:variant,hintText:isDisplayForm()?attributes.label:null}))},InputInteger}(_react2.default.Component);exports.default=_hocAsFormField2.default(InputInteger),module.exports=exports.default},{"../hoc/asFormField":13,pydio:"pydio",react:"react"}],8:[function(require,module,exports){"use strict";exports.__esModule=!0;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_react2=_interopRequireDefault(_react),_pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_hocAsFormField=require("../hoc/asFormField"),_hocAsFormField2=_interopRequireDefault(_hocAsFormField),_materialUi=require("material-ui"),_Pydio$requireLib=_pydio2.default.requireLib("hoc"),ModernTextField=_Pydio$requireLib.ModernTextField,ModernSelectField=_Pydio$requireLib.ModernSelectField,InputIntegerBytes=function(_React$Component){_inherits(InputIntegerBytes,_React$Component);function InputIntegerBytes(){_classCallCheck(this,InputIntegerBytes),_React$Component.apply(this,arguments)}return InputIntegerBytes.prototype.divide=function(initialValue){for(var uu=["k","M","G","T","P"],res={bytesValue:initialValue,unit:""},i=0;i<uu.length;i++){var check=this.multiple(1,uu[i]);initialValue>=check&&initialValue%check==0&&(res={bytesValue:initialValue/check,unit:uu[i]})}return res},InputIntegerBytes.prototype.multiple=function(v,u){var iV=parseFloat(v);switch(u){case"k":return 1024*iV;case"M":return 1024*iV*1024;case"G":return 1024*iV*1024*1024;case"T":return 1024*iV*1024*1024*1024;case"P":return 1024*iV*1024*1024*1024*1024;default:return iV}},InputIntegerBytes.prototype.render=function(){var _this=this,sizeUnit=_pydio2.default.getMessages().byte_unit_symbol||"B",_props=this.props,value=_props.value,onChange=_props.onChange,isDisplayGrid=_props.isDisplayGrid,isDisplayForm=_props.isDisplayForm,editMode=_props.editMode,disabled=_props.disabled,toggleEditMode=_props.toggleEditMode,attributes=_props.attributes,variant=_props.variant,bytesValue=0,unit="";if(value){var _divide=this.divide(parseInt(value)),b=_divide.bytesValue,u=_divide.unit;bytesValue=b,unit=u}return isDisplayGrid()&&!editMode?_react2.default.createElement("div",{onClick:disabled?function(){}:toggleEditMode,className:value?"":"paramValue-empty"},value?bytesValue+unit:"Empty"):_react2.default.createElement("div",null,_react2.default.createElement("div",{style:{display:"flex",height:"v2"===variant?66:null}},_react2.default.createElement(ModernTextField,{value:bytesValue,hintText:isDisplayForm()?attributes.label:null,style:{flex:2},type:"number",variant:variant,hasRightBlock:!0,disabled:disabled,onChange:function(e,v){var bv=Math.max(0,v)||0;onChange(e,_this.multiple(bv,unit))}}),_react2.default.createElement(ModernSelectField,{value:unit||"b",variant:variant,hintText:"Unit",hasLeftBlock:!0,disabled:disabled,onChange:function(e,i,v){onChange(e,_this.multiple(bytesValue,v))},style:{flex:1}},_react2.default.createElement(_materialUi.MenuItem,{value:"b",primaryText:sizeUnit}),_react2.default.createElement(_materialUi.MenuItem,{value:"k",primaryText:"K"+sizeUnit}),_react2.default.createElement(_materialUi.MenuItem,{value:"M",primaryText:"M"+sizeUnit}),_react2.default.createElement(_materialUi.MenuItem,{value:"G",primaryText:"G"+sizeUnit}),_react2.default.createElement(_materialUi.MenuItem,{value:"T",primaryText:"T"+sizeUnit}),_react2.default.createElement(_materialUi.MenuItem,{value:"P",primaryText:"P"+sizeUnit}))))},InputIntegerBytes}(_react2.default.Component);exports.default=_hocAsFormField2.default(InputIntegerBytes),module.exports=exports.default},{"../hoc/asFormField":13,"material-ui":"material-ui",
pydio:"pydio",react:"react"}],9:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _hocAsFormField=require("../hoc/asFormField"),_hocAsFormField2=_interopRequireDefault(_hocAsFormField),_hocWithChoices=require("../hoc/withChoices"),_hocWithChoices2=_interopRequireDefault(_hocWithChoices),_pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),React=require("react"),_require=require("material-ui"),MenuItem=(_require.SelectField,_require.MenuItem),Chip=_require.Chip,LangUtils=require("pydio/util/lang"),_Pydio$requireLib=_pydio2.default.requireLib("hoc"),ModernSelectField=_Pydio$requireLib.ModernSelectField,InputSelectBox=function(_React$Component){_inherits(InputSelectBox,_React$Component);function InputSelectBox(){_classCallCheck(this,InputSelectBox),_React$Component.apply(this,arguments)}return InputSelectBox.prototype.onDropDownChange=function(event,index,value){this.props.onChange(event,value),this.props.toggleEditMode()},InputSelectBox.prototype.onMultipleSelect=function(event,index,newValue){if(-1!==newValue){var currentValue=this.props.value,currentValues="string"==typeof currentValue?currentValue.split(","):currentValue;-1===currentValues.indexOf(newValue)&&(currentValues.push(newValue),this.props.onChange(event,currentValues.join(","))),this.props.toggleEditMode()}},InputSelectBox.prototype.onMultipleRemove=function(value){var currentValue=this.props.value,currentValues="string"==typeof currentValue?currentValue.split(","):currentValue;-1!==currentValues.indexOf(value)&&(currentValues=LangUtils.arrayWithout(currentValues,currentValues.indexOf(value)),this.props.onChange(null,currentValues.join(",")))},InputSelectBox.prototype.render=function(){var _this=this,currentValue=this.props.value,menuItems=[],_props=this.props,attributes=_props.attributes,isDisplayGrid=_props.isDisplayGrid,toggleEditMode=_props.toggleEditMode,editMode=_props.editMode,disabled=_props.disabled,multiple=_props.multiple,className=_props.className,variant=_props.variant;attributes.mandatory&&"true"===attributes.mandatory||menuItems.push(React.createElement(MenuItem,{value:-1,primaryText:attributes.label+"..."}));var choices=this.props.choices;if(choices.forEach(function(value,key){menuItems.push(React.createElement(MenuItem,{value:key,primaryText:value}))}),isDisplayGrid()&&!editMode){var value=this.props.value;return choices.get(value)&&(value=choices.get(value)),React.createElement("div",{onClick:disabled?function(){}:toggleEditMode,className:value?"":"paramValue-empty"},value||"Empty","   ",React.createElement("span",{className:"icon-caret-down"}))}if(multiple&&!0===multiple){var currentValues=currentValue;"string"==typeof currentValue&&(currentValues=currentValue.split(","));var chips=React.createElement("div",{style:{display:"flex",flexWrap:"wrap",marginTop:"v2"===variant?22:8}},currentValues.map(function(v){return React.createElement(Chip,{style:{marginRight:8},onRequestDelete:function(){_this.onMultipleRemove(v)}},choices.get(v)||v)})),props={};return"v2"===variant&&(menuItems=[React.createElement(MenuItem,{value:-1,primaryText:chips})],choices.forEach(function(value,key){menuItems.push(React.createElement(MenuItem,{value:key,primaryText:value}))}),props.hintText=attributes.label,props.style={height:72},props.dropDownMenuProps={iconStyle:{fill:"#9e9e9e",top:22,right:0}}),React.createElement("span",{className:"multiple has-value"},"v2"!==variant&&chips,React.createElement(ModernSelectField,_extends({value:-1,onChange:function(e,i,v){return _this.onMultipleSelect(e,i,v)},fullWidth:!0,className:className,variant:variant,disabled:disabled},props),menuItems))}return React.createElement("span",null,React.createElement(ModernSelectField,{hintText:attributes.label,value:currentValue,onChange:function(e,i,v){return _this.onDropDownChange(e,i,v)},fullWidth:!0,className:className,variant:variant,disabled:disabled},menuItems))},InputSelectBox}(React.Component);exports.default=InputSelectBox=_hocAsFormField2.default(InputSelectBox,!0),exports.default=InputSelectBox=_hocWithChoices2.default(InputSelectBox),exports.default=InputSelectBox,module.exports=exports.default},{"../hoc/asFormField":13,"../hoc/withChoices":14,"material-ui":"material-ui",pydio:"pydio","pydio/util/lang":"pydio/util/lang",react:"react"}],10:[function(require,module,exports){"use strict";exports.__esModule=!0;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_react2=_interopRequireDefault(_react),_pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_hocAsFormField=require("../hoc/asFormField"),_hocAsFormField2=_interopRequireDefault(_hocAsFormField),_Pydio$requireLib=_pydio2.default.requireLib("hoc"),ModernTextField=_Pydio$requireLib.ModernTextField,TextField=function(_React$Component){_inherits(TextField,_React$Component);function TextField(){_classCallCheck(this,TextField),_React$Component.apply(this,arguments)}return TextField.prototype.render=function(){var _props=this.props,editMode=_props.editMode,value=_props.value,variant=_props.variant,isDisplayGrid=_props.isDisplayGrid,isDisplayForm=_props.isDisplayForm,onChange=_props.onChange,enterToToggle=_props.enterToToggle,attributes=_props.attributes,disabled=_props.disabled,errorText=_props.errorText,toggleEditMode=_props.toggleEditMode;if(isDisplayGrid()&&!editMode){var val=value;return"password"===attributes.type&&value&&(val="***********"),_react2.default.createElement("div",{onClick:disabled?function(){}:toggleEditMode,className:val?"":"paramValue-empty"},val||"Empty")}var field=_react2.default.createElement(ModernTextField,{hintText:isDisplayForm()?attributes.label:null,value:value||"",onChange:onChange,onKeyDown:enterToToggle,type:"password"===attributes.type?"password":null,multiLine:"textarea"===attributes.type,disabled:disabled,errorText:errorText,autoComplete:"off",fullWidth:!0,variant:variant});return"password"===this.props.attributes.type?_react2.default.createElement("form",{autoComplete:"off",onSubmit:function(e){e.stopPropagation(),e.preventDefault()},style:{display:"inline"}},field):_react2.default.createElement("span",null,field)},TextField}(_react2.default.Component);exports.default=_hocAsFormField2.default(TextField),module.exports=exports.default},{"../hoc/asFormField":13,pydio:"pydio",react:"react"}],11:[function(require,module,exports){"use strict";exports.__esModule=!0;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_react2=_interopRequireDefault(_react),_pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_hocAsFormField=require("../hoc/asFormField"),_hocAsFormField2=_interopRequireDefault(_hocAsFormField),_pydioUtilPass=require("pydio/util/pass"),_pydioUtilPass2=_interopRequireDefault(_pydioUtilPass),_Pydio$requireLib=_pydio2.default.requireLib("hoc"),ModernTextField=_Pydio$requireLib.ModernTextField,ValidLogin=function(_React$Component){_inherits(ValidLogin,_React$Component);function ValidLogin(props){if(_classCallCheck(this,ValidLogin),_React$Component.call(this,props),this.state={},props.value){var err=_pydioUtilPass2.default.isValidLogin(props.value);this.state={valid:!err,err:err}}}return ValidLogin.prototype.textValueChanged=function(event,value){var err=_pydioUtilPass2.default.isValidLogin(value),prevStateValid=this.state&&this.state.valid,valid=!err;prevStateValid!==valid&&this.props.onValidStatusChange&&this.props.onValidStatusChange(valid),this.setState({valid:valid,err:err}),this.props.onChange(event,value)},ValidLogin.prototype.isValid=function(){return this.state&&this.state.valid},ValidLogin.prototype.render=function(){var _this=this,_props=this.props,isDisplayGrid=_props.isDisplayGrid,isDisplayForm=_props.isDisplayForm,editMode=_props.editMode,disabled=_props.disabled,errorText=_props.errorText,enterToToggle=_props.enterToToggle,toggleEditMode=_props.toggleEditMode,attributes=_props.attributes,variant=_props.variant,value=this.props.value;if(isDisplayGrid()&&!editMode)return"password"===attributes.type&&value&&(value="***********"),_react2.default.createElement("div",{onClick:disabled?function(){}:toggleEditMode,className:value?"":"paramValue-empty"},value||"Empty");var err=this.state&&this.state.err,field=_react2.default.createElement(ModernTextField,{floatingLabelText:isDisplayForm()?attributes.label:null,value:value||"",onChange:function(e,v){return _this.textValueChanged(e,v)},onKeyDown:enterToToggle,type:"password"===attributes.type?"password":null,multiLine:"textarea"===attributes.type,disabled:disabled,errorText:errorText||err,autoComplete:"off",fullWidth:!0,variant:variant});return"password"===attributes.type?_react2.default.createElement("form",{autoComplete:"off",onSubmit:function(e){e.stopPropagation(),e.preventDefault()},style:{display:"inline"}},field):_react2.default.createElement("span",null,field)},ValidLogin}(_react2.default.Component);exports.default=_hocAsFormField2.default(ValidLogin),module.exports=exports.default},{"../hoc/asFormField":13,pydio:"pydio","pydio/util/pass":"pydio/util/pass",react:"react"}],12:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_react2=_interopRequireDefault(_react),_pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_pydioUtilPass=require("pydio/util/pass"),_pydioUtilPass2=_interopRequireDefault(_pydioUtilPass),_hocAsFormField=require("../hoc/asFormField"),_hocAsFormField2=_interopRequireDefault(_hocAsFormField),_materialUi=require("material-ui"),_Pydio$requireLib=_pydio2.default.requireLib("hoc"),ModernTextField=_Pydio$requireLib.ModernTextField,ValidPassword=function(_React$Component){_inherits(ValidPassword,_React$Component);function ValidPassword(props){_classCallCheck(this,ValidPassword),_React$Component.call(this,props),this.state={}}return ValidPassword.prototype.isValid=function(){return this.state.valid},ValidPassword.prototype.checkMinLength=function(value){var minLength=parseInt(_pydio2.default.getInstance().getPluginConfigs("core.auth").get("PASSWORD_MINLENGTH"));return!(value&&value.length<minLength)},ValidPassword.prototype.getMessage=function(messageId){return _pydio2.default.getMessages()[messageId]||messageId},ValidPassword.prototype.updatePassState=function(){var prevStateValid=this.state.valid,newState=_pydioUtilPass2.default.getState(this.refs.pass.getValue(),this.refs.confirm?this.refs.confirm.getValue():"");newState.value=this.refs.pass.getValue(),this.setState(newState),prevStateValid!==newState.valid&&this.props.onValidStatusChange&&this.props.onValidStatusChange(newState.valid)},ValidPassword.prototype.onPasswordChange=function(event,value){this.updatePassState(),this.props.onChange(event,value)},ValidPassword.prototype.onConfirmChange=function(event,value){this.setState({confirmValue:value}),this.updatePassState(),this.props.onChange(event,this.state.value)},ValidPassword.prototype.render=function(){var _props=this.props,disabled=_props.disabled,className=_props.className,attributes=_props.attributes,dialogField=_props.dialogField,_props2=this.props,isDisplayGrid=_props2.isDisplayGrid,editMode=(_props2.isDisplayForm,_props2.editMode),value=_props2.value,toggleEditMode=_props2.toggleEditMode,enterToToggle=_props2.enterToToggle,variant=_props2.variant;if(isDisplayGrid()&&!editMode)return _react2.default.createElement("div",{onClick:disabled?function(){}:toggleEditMode,className:value?"":"paramValue-empty"},value||"Empty");var overflow={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",width:"100%"},cName=this.state.valid?"":"mui-error-as-hint";className&&(cName=className+" "+cName);var _confirm=void 0,TextComponent=dialogField?_materialUi.TextField:ModernTextField;return value&&!disabled&&(_confirm=[_react2.default.createElement("div",{key:"sep",style:{width:8}}),_react2.default.createElement(TextComponent,{key:"confirm",ref:"confirm",floatingLabelText:this.getMessage(199),floatingLabelShrinkStyle:_extends({},overflow,{width:"130%"}),floatingLabelStyle:overflow,className:cName,value:this.state.confirmValue,onChange:this.onConfirmChange.bind(this),type:"password",multiLine:!1,disabled:disabled,fullWidth:!0,style:{flex:1},errorText:this.state.confirmErrorText,errorStyle:dialogField?{bottom:-5}:null,variant:variant})]),_react2.default.createElement("form",{autoComplete:"off",onSubmit:function(e){e.stopPropagation(),e.preventDefault()}},_react2.default.createElement("div",{style:{display:"flex",height:"v2"===variant?66:null}},_react2.default.createElement(TextComponent,{ref:"pass",hintText:isDisplayGrid()?null:attributes.label,floatingLabelShrinkStyle:_extends({},overflow,{width:"130%"}),floatingLabelStyle:overflow,className:cName,value:this.state.value,onChange:this.onPasswordChange.bind(this),onKeyDown:enterToToggle,type:"password",multiLine:!1,disabled:disabled,errorText:this.state.passErrorText,fullWidth:!0,style:{flex:1},errorStyle:dialogField?{bottom:-5}:null,variant:variant}),_confirm))},ValidPassword}(_react2.default.Component);exports.default=_hocAsFormField2.default(ValidPassword),module.exports=exports.default},{"../hoc/asFormField":13,"material-ui":"material-ui",pydio:"pydio","pydio/util/pass":"pydio/util/pass",react:"react"}],13:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_react2=_interopRequireDefault(_react);exports.default=function(Field){var skipBufferChanges=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];return function(_React$Component){_inherits(FormField,_React$Component);function FormField(props){_classCallCheck(this,FormField),props=_extends({displayContext:"form",disabled:!1},props),_React$Component.call(this,props),this.state={editMode:!1,dirty:!1,value:this.props.value}}return FormField.prototype.isDisplayGrid=function(){return"grid"===this.props.displayContext},FormField.prototype.isDisplayForm=function(){return"form"===this.props.displayContext},FormField.prototype.toggleEditMode=function(){if(!this.isDisplayForm()){var newState=!this.state.editMode;this.setState({editMode:newState}),this.props.onChangeEditMode&&this.props.onChangeEditMode(newState)}},FormField.prototype.enterToToggle=function(event){"Enter"===event.key&&this.toggleEditMode()},FormField.prototype.bufferChanges=function(newValue,oldValue){this.triggerPropsOnChange(newValue,oldValue)},FormField.prototype.onChange=function(event,value){void 0===value&&(value=event.currentTarget.getValue?event.currentTarget.getValue():event.currentTarget.value),this.changeTimeout&&clearTimeout(this.changeTimeout);var newValue=value,oldValue=this.state.value;if(skipBufferChanges&&this.triggerPropsOnChange(newValue,oldValue),this.setState({dirty:!0,value:newValue}),!skipBufferChanges){var timerLength=250;"password"===this.props.attributes.type&&(timerLength=1200),this.changeTimeout=setTimeout(function(){this.bufferChanges(newValue,oldValue)}.bind(this),timerLength)}},FormField.prototype.triggerPropsOnChange=function(newValue,oldValue){"password"===this.props.attributes.type?(this.toggleEditMode(),this.props.onChange(newValue,oldValue,{type:this.props.attributes.type})):this.props.onChange(newValue,oldValue)},FormField.prototype.componentWillReceiveProps=function(newProps){this.setState({value:newProps.value,dirty:!1})},FormField.prototype.isValid=function(){return!this.refs.internal||!this.refs.internal.isValid||this.refs.internal.isValid()},FormField.prototype.render=function(){var _this=this;return _react2.default.createElement(Field,_extends({},this.props,this.state,{ref:"internal",onChange:function(e,v){return _this.onChange(e,v)},toggleEditMode:function(){return _this.toggleEditMode()},enterToToggle:function(e){return _this.enterToToggle(e)},isDisplayGrid:function(){return _this.isDisplayGrid()},isDisplayForm:function(){return _this.isDisplayForm()}}))},FormField}(_react2.default.Component)},module.exports=exports.default},{react:"react"}],14:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _require=require("react"),Component=_require.Component,_require$requireLib=require("pydio").requireLib("boot"),PydioContextConsumer=_require$requireLib.PydioContextConsumer;exports.default=function(PydioComponent){var FieldWithChoices=function(_Component){_inherits(FieldWithChoices,_Component),FieldWithChoices.prototype.loadExternalValues=function(choices){var _this=this,pydio=this.props.pydio,parsed=!0,list_action=void 0;if(choices instanceof Map)return this.onChoicesLoaded&&this.onChoicesLoaded(choices),{choices:choices,parsed:parsed};var output=new Map;return 0===choices.indexOf("json_file:")?(parsed=!1,list_action=choices.replace("json_file:",""),output.set("0",pydio.MessageHash["ajxp_admin.home.6"]),PydioApi.getClient().loadFile(list_action,function(transport){var newOutput=new Map;if(transport.responseJSON)transport.responseJSON.forEach(function(entry){newOutput.set(entry.key,entry.label)});else if(transport.responseText)try{JSON.parse(transport.responseText).forEach(function(entry){newOutput.set(entry.key,entry.label)})}catch(e){console.log("Error while parsing list "+choices,e)}_this.setState({choices:newOutput},function(){_this.onChoicesLoaded&&_this.onChoicesLoaded(newOutput)})})):"PYDIO_AVAILABLE_LANGUAGES"===choices?(pydio.listLanguagesWithCallback(function(key,label){output.set(key,label)}),this.onChoicesLoaded&&this.onChoicesLoaded(output)):"PYDIO_AVAILABLE_REPOSITORIES"===choices?(pydio.user&&function(){var sorter=[],pages=[];pydio.user.repositories.forEach(function(repository){"settings"===repository.getId()||"homepage"===repository.getId()?pages.push({id:repository.getId(),label:"["+pydio.MessageHash[331]+"] "+repository.getLabel()}):"cell"!==repository.getRepositoryType()&&sorter.push({id:repository.getId(),label:repository.getLabel()})}),sorter.sort(function(a,b){return a.label.localeCompare(b.label,void 0,{numeric:!0})}),sorter.push.apply(sorter,pages),sorter.forEach(function(d){return output.set(d.id,d.label)})}(),this.onChoicesLoaded&&this.onChoicesLoaded(output)):choices.split(",").map(function(choice){var label=void 0,value=void 0,l=choice.split("|");l.length>1?(value=l[0],label=l[1]):value=label=choice,pydio.MessageHash[label]&&(label=pydio.MessageHash[label]),output.set(value,label)}),{choices:output,parsed:parsed}};function FieldWithChoices(props,context){_classCallCheck(this,FieldWithChoices),_Component.call(this,props,context);var choices=new Map;choices.set("0",this.props.pydio?this.props.pydio.MessageHash["ajxp_admin.home.6"]:" ... "),this.state={choices:choices,choicesParsed:!1}}return FieldWithChoices.prototype.componentDidMount=function(){if(this.props.attributes.choices){var _loadExternalValues=this.loadExternalValues(this.props.attributes.choices),choices=_loadExternalValues.choices,parsed=_loadExternalValues.parsed;this.setState({choices:choices,choicesParsed:parsed})}},FieldWithChoices.prototype.componentWillReceiveProps=function(newProps){if(newProps.attributes.choices&&newProps.attributes.choices!==this.props.attributes.choices){var _loadExternalValues2=this.loadExternalValues(newProps.attributes.choices),choices=_loadExternalValues2.choices,parsed=_loadExternalValues2.parsed;this.setState({choices:choices,choicesParsed:parsed})}},FieldWithChoices.prototype.render=function(){return React.createElement(PydioComponent,_extends({},this.props,this.state))},FieldWithChoices}(Component);return PydioContextConsumer(FieldWithChoices)},module.exports=exports.default},{pydio:"pydio",react:"react"}],15:[function(require,module,exports){"use strict";exports.__esModule=!0;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _managerManager=require("./manager/Manager"),_managerManager2=_interopRequireDefault(_managerManager),_fieldsTextField=require("./fields/TextField"),_fieldsTextField2=_interopRequireDefault(_fieldsTextField),_fieldsValidPassword=require("./fields/ValidPassword"),_fieldsValidPassword2=_interopRequireDefault(_fieldsValidPassword),_fieldsInputInteger=require("./fields/InputInteger"),_fieldsInputInteger2=_interopRequireDefault(_fieldsInputInteger),_fieldsInputIntegerBytes=require("./fields/InputIntegerBytes"),_fieldsInputIntegerBytes2=_interopRequireDefault(_fieldsInputIntegerBytes),_fieldsInputBoolean=require("./fields/InputBoolean"),_fieldsInputBoolean2=_interopRequireDefault(_fieldsInputBoolean),_fieldsInputSelectBox=require("./fields/InputSelectBox"),_fieldsInputSelectBox2=_interopRequireDefault(_fieldsInputSelectBox),_fieldsAutocompleteBox=require("./fields/AutocompleteBox"),_fieldsAutocompleteBox2=_interopRequireDefault(_fieldsAutocompleteBox),_fieldsInputImage=require("./fields/InputImage"),_fieldsInputImage2=_interopRequireDefault(_fieldsInputImage),_panelFormPanel=require("./panel/FormPanel"),_panelFormPanel2=_interopRequireDefault(_panelFormPanel),_panelFormHelper=require("./panel/FormHelper"),_panelFormHelper2=_interopRequireDefault(_panelFormHelper),_fieldsFileDropzone=require("./fields/FileDropzone"),_fieldsFileDropzone2=_interopRequireDefault(_fieldsFileDropzone),_fieldsAutocompleteTree=require("./fields/AutocompleteTree"),_fieldsAutocompleteTree2=_interopRequireDefault(_fieldsAutocompleteTree),PydioForm={Manager:_managerManager2.default,InputText:_fieldsTextField2.default,ValidPassword:_fieldsValidPassword2.default,InputBoolean:_fieldsInputBoolean2.default,InputInteger:_fieldsInputInteger2.default,InputIntegerBytes:_fieldsInputIntegerBytes2.default,InputSelectBox:_fieldsInputSelectBox2.default,AutocompleteBox:_fieldsAutocompleteBox2.default,AutocompleteTree:_fieldsAutocompleteTree2.default,InputImage:_fieldsInputImage2.default,FormPanel:_panelFormPanel2.default,PydioHelper:_panelFormHelper2.default,FileDropZone:_fieldsFileDropzone2.default,createFormElement:_managerManager2.default.createFormElement};exports.default=PydioForm,module.exports=exports.default},{"./fields/AutocompleteBox":2,"./fields/AutocompleteTree":3,"./fields/FileDropzone":4,"./fields/InputBoolean":5,"./fields/InputImage":6,"./fields/InputInteger":7,"./fields/InputIntegerBytes":8,"./fields/InputSelectBox":9,"./fields/TextField":10,"./fields/ValidPassword":12,"./manager/Manager":16,"./panel/FormHelper":17,"./panel/FormPanel":18}],16:[function(require,module,exports){(function(global){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _react=require("react"),_react2=_interopRequireDefault(_react),_fieldsValidLogin=require("../fields/ValidLogin"),_fieldsValidLogin2=_interopRequireDefault(_fieldsValidLogin),_fieldsAltText=require("../fields/AltText"),_fieldsAltText2=_interopRequireDefault(_fieldsAltText),_fieldsInputIntegerBytes=require("../fields/InputIntegerBytes"),_fieldsInputIntegerBytes2=_interopRequireDefault(_fieldsInputIntegerBytes),XMLUtils=require("pydio/util/xml"),InputBoolean=require("./../fields/InputBoolean"),InputText=require("./../fields/TextField"),ValidPassword=require("./../fields/ValidPassword"),InputInteger=require("./../fields/InputInteger"),InputImage=require("./../fields/InputImage"),SelectBox=require("./../fields/InputSelectBox"),AutocompleteBox=require("./../fields/AutocompleteBox"),AutocompleteTree=require("./../fields/AutocompleteTree"),Manager=function(){function Manager(){_classCallCheck(this,Manager)}return Manager.hasHelper=function(pluginId,paramName){var helpers=Manager.getHelpersCache();return helpers[pluginId]&&helpers[pluginId].parameters[paramName]},Manager.getHelpersCache=function(){if(!Manager.HELPERS_CACHE){for(var helperCache={},helpers=XMLUtils.XPathSelectNodes(window.pydio.Registry.getXML(),'plugins/*/client_settings/resources/js[@type="helper"]'),i=0;i<helpers.length;i++){var helperNode=helpers[i],plugin=helperNode.getAttribute("plugin");helperCache[plugin]={namespace:helperNode.getAttribute("className"),parameters:{}};for(var paramNodes=XMLUtils.XPathSelectNodes(helperNode,"parameter"),k=0;k<paramNodes.length;k++){var paramNode=paramNodes[k];helperCache[plugin].parameters[paramNode.getAttribute("name")]=!0}}Manager.HELPERS_CACHE=helperCache}return Manager.HELPERS_CACHE},Manager.parseParameters=function(xmlDocument,query){return XMLUtils.XPathSelectNodes(xmlDocument,query).map(function(node){return Manager.parameterNodeToHash(node)}.bind(this))},Manager.parameterNodeToHash=function(paramNode){var paramsAtts=paramNode.attributes,paramsObject={};paramNode.parentNode&&paramNode.parentNode.parentNode&&paramNode.parentNode.parentNode.getAttribute&&(paramsObject.pluginId=paramNode.parentNode.parentNode.getAttribute("id"));for(var collectCdata=!1,MessageHash=global.pydio.MessageHash,i=0;i<paramsAtts.length;i++){var attName=paramsAtts.item(i).nodeName,value=paramsAtts.item(i).value;"label"!==attName&&"description"!==attName&&"group"!==attName&&0!==attName.indexOf("group_switch_")||!MessageHash[value]||(value=MessageHash[value]),"cdatavalue"!==attName?paramsObject[attName]=value:collectCdata=!0}return collectCdata&&(paramsObject.value=paramNode.firstChild.value),"boolean"===paramsObject.type?(void 0!==paramsObject.value&&(paramsObject.value="true"===paramsObject.value),void 0!==paramsObject.default&&(paramsObject.default="true"===paramsObject.default)):"integer"!==paramsObject.type&&"integer-bytes"!==paramsObject.type||(void 0!==paramsObject.value&&(paramsObject.value=parseInt(paramsObject.value)),void 0!==paramsObject.default&&(paramsObject.default=parseInt(paramsObject.default))),paramsObject},Manager.createFormElement=function(props){var value=void 0,attributes=props.attributes,onAltTextSwitch=props.onAltTextSwitch,altTextSwitchIcon=props.altTextSwitchIcon,altTextSwitchTip=props.altTextSwitchTip,switchProps={onAltTextSwitch:onAltTextSwitch,altTip:altTextSwitchTip,altIconText:altTextSwitchIcon};switch(attributes.type){case"boolean":value=_react2.default.createElement(InputBoolean,props),onAltTextSwitch&&(value=_react2.default.createElement(_fieldsAltText2.default,_extends({},props,switchProps,{altIcon:"mdi mdi-toggle-switch"}),value));break;case"string":case"textarea":case"password":value=_react2.default.createElement(InputText,props);break;case"valid-password":value=_react2.default.createElement(ValidPassword,props);break;case"valid-login":value=_react2.default.createElement(_fieldsValidLogin2.default,props);break;case"integer":case"integer-bytes":value="integer-bytes"===attributes.type?_react2.default.createElement(_fieldsInputIntegerBytes2.default,props):_react2.default.createElement(InputInteger,props),onAltTextSwitch&&(value=_react2.default.createElement(_fieldsAltText2.default,_extends({},props,switchProps,{altIcon:"mdi mdi-number"}),value));break;case"image":value=_react2.default.createElement(InputImage,props);break;case"select":value=_react2.default.createElement(SelectBox,props),onAltTextSwitch&&(value=_react2.default.createElement(_fieldsAltText2.default,_extends({},props,switchProps,{altIcon:"mdi mdi-view-list"}),value));break;case"autocomplete":value=_react2.default.createElement(AutocompleteBox,props);break;case"autocomplete-tree":
value=_react2.default.createElement(AutocompleteTree,props);break;case"legend":case"hidden":value=null;break;default:value=props.value?props.value:_react2.default.createElement("span",{className:"paramValue-empty"},"Empty")}return value},Manager.SlashesToJson=function(values){if(void 0===values||"object"!=typeof values)return values;var newValues={},recurseOnKeys={};return Object.keys(values).forEach(function(k){var data=values[k];if(k.indexOf("/")>0){var parts=k.split("/"),firstPart=parts.shift(),lastPart=parts.join("/");newValues[firstPart]?"string"==typeof newValues[firstPart]&&(newValues[firstPart]={"@value":newValues[firstPart]}):newValues[firstPart]={},newValues[firstPart][lastPart]=data,recurseOnKeys[firstPart]=firstPart}else newValues[k]&&"object"==typeof newValues[k]?newValues[k]["@value"]=data:newValues[k]=data}),Object.keys(recurseOnKeys).map(function(key){newValues[key]=Manager.SlashesToJson(newValues[key])}),newValues},Manager.JsonToSlashes=function(values){var prefix=arguments.length<=1||void 0===arguments[1]?"":arguments[1],newValues={};return Object.keys(values).forEach(function(k){if("object"==typeof values[k]){var subValues=Manager.JsonToSlashes(values[k],prefix+k+"/");newValues=_extends({},newValues,subValues),values[k]["@value"]&&(newValues[prefix+k]=values[k]["@value"])}else newValues[prefix+k]=values[k]}),newValues},Manager.getValuesForPOST=function(definitions,values){var prefix=arguments.length<=2||void 0===arguments[2]?"DRIVER_OPTION_":arguments[2],additionalMetadata=arguments.length<=3||void 0===arguments[3]?null:arguments[3],clientParams={};for(var key in values)if(values.hasOwnProperty(key)){clientParams[prefix+key]=values[key];for(var defType=null,d=0;d<definitions.length;d++)if(definitions[d].name==key){defType=definitions[d].type;break}if(!defType){var last,prev,parts=key.split("/");parts.length>1&&(last=parts.pop(),prev=parts.pop());for(var k=0;k<definitions.length;k++)if(void 0!==last){if(definitions[k].name==last&&definitions[k].group_switch_name&&definitions[k].group_switch_name==prev){defType=definitions[k].type;break}}else if(definitions[k].name==key){defType=definitions[k].type;break}}if(defType&&("image"==defType&&(defType="binary"),clientParams[prefix+key+"_ajxptype"]=defType),additionalMetadata&&additionalMetadata[key])for(var meta in additionalMetadata[key])additionalMetadata[key].hasOwnProperty(meta)&&(clientParams[prefix+key+"_"+meta]=additionalMetadata[key][meta])}var allKeys=Object.keys(clientParams);allKeys.sort(),allKeys.reverse();var treeKeys={};allKeys.map(function(key){if(-1!==key.indexOf("/")&&!key.endsWith("_ajxptype")){for(var parentKey,typeKey=key+"_ajxptype",parts=key.split("/"),parentName=parts.shift();parts.length>0;)parentKey||(parentKey=treeKeys),parentKey[parentName]||(parentKey[parentName]={}),parentKey=parentKey[parentName],parentName=parts.shift();var type=clientParams[typeKey];if(delete clientParams[typeKey],parentKey&&!parentKey[parentName])if("boolean"===type){var v=clientParams[key];parentKey[parentName]="true"===v||1===v||!0===v}else"integer"===type||"integer-bytes"===type?parentKey[parentName]=parseInt(clientParams[key]):type&&type.startsWith("group_switch:")&&"string"==typeof clientParams[key]?parentKey[parentName]={group_switch_value:clientParams[key]}:parentKey[parentName]=clientParams[key];else parentKey&&type&&type.startsWith("group_switch:")&&(parentKey[parentName].group_switch_value=clientParams[key]);delete clientParams[key]}});for(key in treeKeys)if(treeKeys.hasOwnProperty(key)){var treeValue=treeKeys[key];clientParams[key+"_ajxptype"]&&0===clientParams[key+"_ajxptype"].indexOf("group_switch:")&&!treeValue.group_switch_value&&(treeValue.group_switch_value=clientParams[key]),clientParams[key]=JSON.stringify(treeValue),clientParams[key+"_ajxptype"]="text/json"}for(var theKey in clientParams)clientParams.hasOwnProperty(theKey)&&(-1==theKey.indexOf("/")&&clientParams[theKey]&&clientParams[theKey+"_ajxptype"]&&clientParams[theKey+"_ajxptype"].startsWith("group_switch:")&&"string"==typeof clientParams[theKey]&&(clientParams[theKey]=JSON.stringify({group_switch_value:clientParams[theKey]}),clientParams[theKey+"_ajxptype"]="text/json"),clientParams.hasOwnProperty(theKey)&&theKey.endsWith("_group_switch")&&delete clientParams[theKey]);return clientParams},Manager}();exports.default=Manager,module.exports=exports.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../fields/AltText":1,"../fields/InputIntegerBytes":8,"../fields/ValidLogin":11,"./../fields/AutocompleteBox":2,"./../fields/AutocompleteTree":3,"./../fields/InputBoolean":5,"./../fields/InputImage":6,"./../fields/InputInteger":7,"./../fields/InputSelectBox":9,"./../fields/TextField":10,"./../fields/ValidPassword":12,"pydio/util/xml":"pydio/util/xml",react:"react"}],17:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_managerManager=require("../manager/Manager"),_managerManager2=_interopRequireDefault(_managerManager),React=require("react"),_require$requireLib=require("pydio").requireLib("boot"),AsyncComponent=_require$requireLib.AsyncComponent,_default=function(_React$Component){_inherits(_default,_React$Component);function _default(){var _this=this;_classCallCheck(this,_default),_React$Component.apply(this,arguments),this.closeHelper=function(){_this.props.close()}}return _default.prototype.render=function(){var helper=void 0;if(this.props.helperData){var helpersCache=_managerManager2.default.getHelpersCache(),pluginHelperNamespace=helpersCache[this.props.helperData.pluginId].namespace;helper=React.createElement("div",null,React.createElement("div",{className:"helper-title"},React.createElement("span",{className:"helper-close mdi mdi-close",onClick:this.closeHelper}),"Pydio Companion"),React.createElement("div",{className:"helper-content"},React.createElement(AsyncComponent,_extends({},this.props.helperData,{namespace:pluginHelperNamespace,componentName:"Helper",paramName:this.props.helperData.paramAttributes.name}))))}return React.createElement("div",{className:"pydio-form-helper"+(helper?" helper-visible":" helper-empty"),style:{zIndex:1}},helper)},_createClass(_default,null,[{key:"propTypes",value:{helperData:_propTypes2.default.object,close:_propTypes2.default.func.isRequired},enumerable:!0}]),_default}(React.Component);exports.default=_default,module.exports=exports.default},{"../manager/Manager":16,"prop-types":"prop-types",pydio:"pydio",react:"react"}],18:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _react=require("react"),_react2=_interopRequireDefault(_react),_createReactClass=require("create-react-class"),_createReactClass2=_interopRequireDefault(_createReactClass),_GroupSwitchPanel=require("./GroupSwitchPanel"),_GroupSwitchPanel2=_interopRequireDefault(_GroupSwitchPanel),_ReplicationPanel=require("./ReplicationPanel"),_ReplicationPanel2=_interopRequireDefault(_ReplicationPanel),_managerManager=require("../manager/Manager"),_managerManager2=_interopRequireDefault(_managerManager),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_pydioUtilLang=require("pydio/util/lang"),_pydioUtilLang2=_interopRequireDefault(_pydioUtilLang),_materialUi=require("material-ui");exports.default=_createReactClass2.default({displayName:"FormPanel",_hiddenValues:{},_internalValid:null,_parametersMetadata:null,propTypes:{parameters:_propTypes2.default.array.isRequired,values:_propTypes2.default.object,onParameterChange:_propTypes2.default.func,onChange:_propTypes2.default.func,onValidStatusChange:_propTypes2.default.func,disabled:_propTypes2.default.bool,binary_context:_propTypes2.default.string,depth:_propTypes2.default.number,header:_propTypes2.default.object,footer:_propTypes2.default.object,additionalPanes:_propTypes2.default.shape({top:_propTypes2.default.array,bottom:_propTypes2.default.array}),tabs:_propTypes2.default.array,onTabChange:_propTypes2.default.func,accordionizeIfGroupsMoreThan:_propTypes2.default.number,onScrollCallback:_propTypes2.default.func,limitToGroups:_propTypes2.default.array,skipFieldsTypes:_propTypes2.default.array,setHelperData:_propTypes2.default.func,checkHasHelper:_propTypes2.default.func,helperTestFor:_propTypes2.default.string},externallySelectTab:function(index){this.setState({tabSelectedIndex:index})},getInitialState:function(){return this.props.onTabChange?{tabSelectedIndex:0}:{}},getDefaultProps:function(){return{depth:0,values:{}}},componentWillReceiveProps:function(newProps){JSON.stringify(newProps.parameters)!==JSON.stringify(this.props.parameters)&&(this._internalValid=null,this._hiddenValues={},this._parametersMetadata={}),newProps.values&&newProps.values!==this.props.values&&this.checkValidStatus(newProps.values)},getValues:function(){return this.props.values},onParameterChange:function(paramName,newValue,oldValue){var additionalFormData=arguments.length<=3||void 0===arguments[3]?null:arguments[3],newValues=_pydioUtilLang2.default.deepCopy(this.getValues());this.props.onParameterChange&&this.props.onParameterChange(paramName,newValue,oldValue,additionalFormData),additionalFormData&&(this._parametersMetadata||(this._parametersMetadata={}),this._parametersMetadata[paramName]=additionalFormData),newValues[paramName]=newValue,this.onChange(newValues,!0)},onChange:function(newValues,dirty,removeValues){if(this.props.onChange){for(var key in this._hiddenValues)!this._hiddenValues.hasOwnProperty(key)||void 0!==newValues[key]||removeValues&&void 0!==removeValues[key]||(newValues[key]=this._hiddenValues[key]);this.props.onChange(newValues,dirty,removeValues)}this.checkValidStatus(newValues)},onSubformChange:function(newValues,dirty,removeValues){var values=_pydioUtilLang2.default.mergeObjectsRecursive(this.getValues(),newValues);if(removeValues)for(var k in removeValues)removeValues.hasOwnProperty(k)&&void 0!==values[k]&&(delete values[k],void 0!==this._hiddenValues[k]&&delete this._hiddenValues[k]);this.onChange(values,dirty,removeValues)},onSubformValidStatusChange:function(newValidValue,failedMandatories){(newValidValue!==this._internalValid||this.props.forceValidStatusCheck)&&this.props.onValidStatusChange&&this.props.onValidStatusChange(newValidValue,failedMandatories),this._internalValid=newValidValue},applyButtonAction:function(parameters,callback){this.props.applyButtonAction&&this.props.applyButtonAction(parameters,callback)},getValuesForPOST:function(values){var prefix=arguments.length<=1||void 0===arguments[1]?"DRIVER_OPTION_":arguments[1];return _managerManager2.default.getValuesForPOST(this.props.parameters,values,prefix,this._parametersMetadata)},checkValidStatus:function(values){var failedMandatories=[];this.props.parameters.map(function(p){["string","textarea","password","integer","integer-bytes"].indexOf(p.type)>-1&&("true"===p.mandatory||!0===p.mandatory)&&(values&&values.hasOwnProperty(p.name)&&void 0!==values[p.name]&&""!==values[p.name]||failedMandatories.push(p)),"valid-password"!==p.type&&"valid-login"!==p.type||!this.refs["form-element-"+p.name]||this.refs["form-element-"+p.name].isValid()||failedMandatories.push(p)}.bind(this));var newValue=void 0;this._internalValid,newValue=!failedMandatories.length,(newValue!==this._internalValid||this.props.forceValidStatusCheck)&&this.props.onValidStatusChange&&this.props.onValidStatusChange(newValue,failedMandatories),this._internalValid=newValue},componentDidMount:function(){this.checkValidStatus(this.props.values)},renderGroupHeader:function(groupLabel,accordionize,index,active){var properties={key:"group-"+groupLabel};if(accordionize){var current=this.state&&this.state.currentActiveGroup?this.state.currentActiveGroup:null;properties.className="group-label-"+(active?"active":"inactive"),properties.onClick=function(){this.setState({currentActiveGroup:current!==index?index:null})}.bind(this),groupLabel=[_react2.default.createElement("span",{key:"toggler",className:"group-active-toggler icon-angle-"+(current===index?"down":"right")}),groupLabel]}return _react2.default.createElement("h"+(3+this.props.depth),properties,groupLabel)},render:function(){var _this2=this,allGroups=[],groupsOrdered=["__DEFAULT__"];allGroups.__DEFAULT__={FIELDS:[]};var replicationGroups={},_props=this.props,parameters=_props.parameters,values=_props.values,skipFieldsTypes=_props.skipFieldsTypes,disabled=_props.disabled,binary_context=_props.binary_context,variant=_props.variant,variantShowLegend=_props.variantShowLegend,_props2=this.props,altTextSwitchIcon=_props2.altTextSwitchIcon,altTextSwitchTip=_props2.altTextSwitchTip,onAltTextSwitch=_props2.onAltTextSwitch;parameters.map(function(attributes){var _this=this,type=attributes.type,paramName=attributes.name,repGroup=attributes.replicationGroup;if(!(skipFieldsTypes&&skipFieldsTypes.indexOf(type)>-1)){var field=void 0;if(!attributes.group_switch_name){var group=attributes.group||"__DEFAULT__";if(allGroups[group]||(groupsOrdered.push(group),allGroups[group]={FIELDS:[],LABEL:group}),repGroup){replicationGroups[repGroup]||(replicationGroups[repGroup]={PARAMS:[],GROUP:group,POSITION:allGroups[group].FIELDS.length},allGroups[group].FIELDS.push("REPLICATION:"+repGroup));var repAttr=_pydioUtilLang2.default.deepCopy(attributes);delete repAttr.replicationGroup,delete repAttr.group,replicationGroups[repGroup].PARAMS.push(repAttr)}else 0===type.indexOf("group_switch:")?field=_react2.default.createElement(_GroupSwitchPanel2.default,_extends({},this.props,{onChange:this.onSubformChange,paramAttributes:attributes,parameters:parameters,values:values,key:paramName,onScrollCallback:null,limitToGroups:null,onValidStatusChange:this.onSubformValidStatusChange})):"hidden"!==type?function(){var helperMark=void 0,_props3=_this.props,setHelperData=_props3.setHelperData,checkHasHelper=_props3.checkHasHelper,helperTestFor=_props3.helperTestFor;if(setHelperData&&checkHasHelper&&checkHasHelper(attributes.name,helperTestFor)){var showHelper=function(){setHelperData({paramAttributes:attributes,values:values,postValues:this.getValuesForPOST(values),applyButtonAction:this.applyButtonAction},helperTestFor)}.bind(_this);helperMark=_react2.default.createElement("span",{className:"icon-question-sign",onClick:showHelper})}var mandatoryMissing=!1,classLegend="form-legend",errorText=attributes.errorText,warningText=attributes.warningText,mandatory=attributes.mandatory;errorText?classLegend="form-legend mandatory-missing":warningText?classLegend="form-legend warning-message":!mandatory||"true"!==mandatory&&!0!==mandatory||-1===["string","textarea","image","integer","integer-bytes"].indexOf(type)||values[paramName]||(mandatoryMissing=!0,classLegend="form-legend mandatory-missing");var description=attributes.description,readonly=attributes.readonly,multiple=attributes.multiple,legendLabel=warningText||description,label=attributes.label;variantShowLegend&&"boolean"!==attributes.type&&(label=_react2.default.createElement(_react.Fragment,null,label," ",_react2.default.createElement("span",null,"- ",legendLabel)));var props={ref:"form-element-"+paramName,attributes:_extends({},attributes,{label:label}),name:paramName,value:values[paramName],onChange:function(newValue,oldValue,additionalFormData){_this.onParameterChange(paramName,newValue,oldValue,additionalFormData)},disabled:disabled||readonly,multiple:multiple,binary_context:binary_context,displayContext:"form",applyButtonAction:_this.applyButtonAction,variant:variant,variantShowLegend:variantShowLegend,errorText:mandatoryMissing?_pydio2.default.getInstance().MessageHash[621]:errorText||null,onAltTextSwitch:onAltTextSwitch,altTextSwitchIcon:altTextSwitchIcon,altTextSwitchTip:altTextSwitchTip},v2Legend={padding:"6px 3px",color:"#616161",fontSize:14};field=_react2.default.createElement("div",{key:paramName,className:"form-entry-"+type},"v2"!==variant&&_react2.default.createElement("div",{className:classLegend},legendLabel," ",helperMark),"v2"===variant&&"legend"===attributes.type&&_react2.default.createElement("div",{style:v2Legend},legendLabel," ",helperMark),_managerManager2.default.createFormElement(props))}():this._hiddenValues[paramName]=void 0===values[paramName]?attributes.default:values[paramName],field&&allGroups[group].FIELDS.push(field)}}}.bind(this)),Object.keys(replicationGroups).forEach(function(rGroup){var rGroupData=replicationGroups[rGroup];allGroups[rGroupData.GROUP].FIELDS[rGroupData.POSITION]=_react2.default.createElement(_ReplicationPanel2.default,_extends({},_this2.props,{key:"replication-group-"+rGroupData.PARAMS[0].name,onChange:_this2.onSubformChange,onParameterChange:null,values:_this2.getValues(),depth:_this2.props.depth+1,parameters:rGroupData.PARAMS,applyButtonAction:_this2.applyButtonAction,onScrollCallback:null}))});var groupPanes=[],accordionize=this.props.accordionizeIfGroupsMoreThan&&groupsOrdered.length>this.props.accordionizeIfGroupsMoreThan,currentActiveGroup=this.state&&this.state.currentActiveGroup?this.state.currentActiveGroup:0;if(groupsOrdered.map(function(g,gIndex){if(!this.props.limitToGroups||-1!==this.props.limitToGroups.indexOf(g)){var header,gData=allGroups[g],className="pydio-form-group",active=!1;accordionize&&(active=currentActiveGroup===gIndex,className+=gIndex===currentActiveGroup?" form-group-active":" form-group-inactive"),gData.FIELDS.length&&(!gData.LABEL||this.props.skipFieldsTypes&&this.props.skipFieldsTypes.indexOf("GroupHeader")>-1||(header=this.renderGroupHeader(gData.LABEL,accordionize,gIndex,active)),0===this.props.depth?(className+=" z-depth-1",groupPanes.push(_react2.default.createElement(_materialUi.Paper,{className:className,key:"pane-"+g},0===gIndex&&this.props.header?this.props.header:null,header,_react2.default.createElement("div",null,gData.FIELDS),gIndex===groupsOrdered.length-1&&this.props.footer?this.props.footer:null))):groupPanes.push(_react2.default.createElement("div",{className:className,key:"pane-"+g},0===gIndex&&this.props.header?this.props.header:null,header,_react2.default.createElement("div",null,gData.FIELDS),gIndex===groupsOrdered.length-1&&this.props.footer?this.props.footer:null)))}}.bind(this)),this.props.additionalPanes&&function(){var otherPanes={top:[],bottom:[]},depth=_this2.props.depth,index=0;["top","bottom"].forEach(function(k){(_this2.props.additionalPanes[k]||[]).map(function(p){0===depth?otherPanes[k].push(_react2.default.createElement(_materialUi.Paper,{className:"pydio-form-group additional",key:"other-pane-"+index},p)):otherPanes[k].push(_react2.default.createElement("div",{className:"pydio-form-group additional",key:"other-pane-"+index},p)),index++})}),groupPanes=[].concat(otherPanes.top,groupPanes,otherPanes.bottom)}(),!this.props.tabs)return _react2.default.createElement("div",{className:(this.props.className?this.props.className+" ":" ")+"pydio-form-panel"+(groupPanes.length%2?" form-panel-odd":""),onScroll:this.props.onScrollCallback},groupPanes);var _ret3=function(){var className=_this2.props.className,initialSelectedIndex=0,i=0,tabs=_this2.props.tabs.map(function(tDef){var label=tDef.label,groups=tDef.groups;tDef.selected&&(initialSelectedIndex=i);var panes=groups.map(function(gId){return groupPanes[gId]?groupPanes[gId]:null});return i++,_react2.default.createElement(_materialUi.Tab,{label:label,key:label,value:this.props.onTabChange?i-1:void 0},_react2.default.createElement("div",{className:(className?className+" ":" ")+"pydio-form-panel"+(panes.length%2?" form-panel-odd":"")},panes))}.bind(_this2));return void 0!==_this2.state.tabSelectedIndex&&(initialSelectedIndex=_this2.state.tabSelectedIndex),{v:_react2.default.createElement("div",{className:"layout-fill vertical-layout tab-vertical-layout"},_react2.default.createElement(_materialUi.Tabs,{ref:"tabs",initialSelectedIndex:initialSelectedIndex,value:_this2.props.onTabChange?initialSelectedIndex:void 0,onChange:_this2.props.onTabChange?function(i){_this2.setState({tabSelectedIndex:i}),_this2.props.onTabChange(i)}:void 0,style:{flex:1,display:"flex",flexDirection:"column"},contentContainerStyle:{flex:1,overflowY:"auto"}},tabs))}}();return"object"==typeof _ret3?_ret3.v:void 0}}),module.exports=exports.default},{"../manager/Manager":16,"./GroupSwitchPanel":19,"./ReplicationPanel":21,"create-react-class":"create-react-class","material-ui":"material-ui","prop-types":"prop-types",pydio:"pydio","pydio/util/lang":"pydio/util/lang",react:"react"}],19:[function(require,module,exports){"use strict";exports.__esModule=!0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _FormPanel=require("./FormPanel"),_FormPanel2=_interopRequireDefault(_FormPanel),_fieldsInputSelectBox=require("../fields/InputSelectBox"),_fieldsInputSelectBox2=_interopRequireDefault(_fieldsInputSelectBox),React=require("react"),PropTypes=require("prop-types"),LangUtils=require("pydio/util/lang"),_default=function(_React$Component){_inherits(_default,_React$Component);function _default(){var _this=this;_classCallCheck(this,_default),_React$Component.apply(this,arguments),this.computeSubPanelParameters=function(){var switchName=_this.props.paramAttributes.type.split(":").pop(),parentName=_this.props.paramAttributes.name,switchValues={},potentialSubSwitches=[];_this.props.parameters.map(function(p){if(p.group_switch_name){if(p.group_switch_name!=switchName)return void potentialSubSwitches.push(p);var crtSwitch=p.group_switch_value;switchValues[crtSwitch]||(switchValues[crtSwitch]={label:p.group_switch_label,fields:[],values:{},fieldsKeys:{}}),p=LangUtils.deepCopy(p),delete p.group_switch_name,p.name=parentName+"/"+p.name;var vKey=p.name,paramName=vKey;switchValues[crtSwitch].fieldsKeys[paramName]||(switchValues[crtSwitch].fields.push(p),switchValues[crtSwitch].fieldsKeys[paramName]=paramName,this.props.values&&this.props.values[vKey]&&(switchValues[crtSwitch].values[paramName]=this.props.values[vKey]))}}.bind(_this));for(var k in switchValues)if(switchValues.hasOwnProperty(k)){var sv=switchValues[k];sv.fields=sv.fields.concat(potentialSubSwitches)}return switchValues},this.clearSubParametersValues=function(parentName,newValue,newFields){var vals=LangUtils.deepCopy(_this.props.values),toRemove={};for(var key in vals)vals.hasOwnProperty(key)&&0===key.indexOf(parentName+"/")&&(toRemove[key]="");vals[parentName]=newValue,newFields.map(function(p){"hidden"==p.type&&p.default&&!p.group_switch_name||p.group_switch_name==parentName?(vals[p.name]=p.default,void 0!==toRemove[p.name]&&delete toRemove[p.name]):0===p.name.indexOf(parentName+"/")&&p.default&&(p.type&&p.type.startsWith("group_switch:"),vals[p.name]=p.default)}),_this.props.onChange(vals,!0,toRemove)},this.onChange=function(newValues,dirty,removeValues){_this.props.onChange(newValues,!0,removeValues)}}return _default.prototype.render=function(){var _props=this.props,variant=_props.variant,variantShowLegend=_props.variantShowLegend,attributes=this.props.paramAttributes,values=this.props.values,paramName=attributes.name,switchValues=this.computeSubPanelParameters(attributes),selectorValues=new Map;Object.keys(switchValues).map(function(k){selectorValues.set(k,switchValues[k].label)});var selectorChanger=function(newValue){this.clearSubParametersValues(paramName,newValue,switchValues[newValue]?switchValues[newValue].fields:[])}.bind(this),subForm=void 0,selector=React.createElement(_fieldsInputSelectBox2.default,{key:paramName,name:paramName,className:"group-switch-selector",attributes:{name:paramName,choices:selectorValues,label:attributes.label+(variantShowLegend?" - "+attributes.description:""),mandatory:attributes.mandatory},value:values[paramName],onChange:selectorChanger,displayContext:"form",disabled:this.props.disabled,ref:"subFormSelector",variant:this.props.variant}),helperMark=void 0;if(this.props.setHelperData&&this.props.checkHasHelper&&this.props.checkHasHelper(attributes.name,this.props.helperTestFor)){var showHelper=function(){this.props.setHelperData({paramAttributes:attributes,values:values})}.bind(this);helperMark=React.createElement("span",{className:"icon-question-sign",onClick:showHelper})}if(values[paramName]&&switchValues[values[paramName]]){var _props2=this.props,onAltTextSwitch=_props2.onAltTextSwitch,altTextSwitchIcon=_props2.altTextSwitchIcon,altTextSwitchTip=_props2.altTextSwitchTip;subForm=React.createElement(_FormPanel2.default,{onParameterChange:this.props.onParameterChange,applyButtonAction:this.props.applyButtonAction,disabled:this.props.disabled,ref:paramName+"-SUB",key:paramName+"-SUB",className:"sub-form",parameters:switchValues[values[paramName]].fields,values:values,depth:this.props.depth+1,onChange:this.onChange,checkHasHelper:this.props.checkHasHelper,setHelperData:this.props.setHelperData,helperTestFor:values[paramName],accordionizeIfGroupsMoreThan:5,onAltTextSwitch:onAltTextSwitch,altTextSwitchIcon:altTextSwitchIcon,altTextSwitchTip:altTextSwitchTip,variant:this.props.variant,variantShowLegend:this.props.variantShowLegend})}return React.createElement("div",{className:"sub-form-group"},"v2"!==variant&&React.createElement("div",{className:"form-legend"},attributes.description," ",helperMark),selector,subForm)},_createClass(_default,null,[{key:"propTypes",value:{paramAttributes:PropTypes.object.isRequired,parameters:PropTypes.array.isRequired,values:PropTypes.object.isRequired,onChange:PropTypes.func.isRequired},enumerable:!0}]),_default}(React.Component);exports.default=_default,module.exports=exports.default},{"../fields/InputSelectBox":9,"./FormPanel":18,"prop-types":"prop-types","pydio/util/lang":"pydio/util/lang",react:"react"}],20:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_materialUi=require("material-ui"),_FormPanel=require("./FormPanel"),_FormPanel2=_interopRequireDefault(_FormPanel),UP_ARROW="mdi mdi-chevron-up",DOWN_ARROW="mdi mdi-chevron-down",REMOVE="mdi mdi-close",ADD_VALUE="mdi mdi-plus",ReplicatedGroup=function(_Component){_inherits(ReplicatedGroup,_Component);function ReplicatedGroup(props,context){_classCallCheck(this,ReplicatedGroup),_Component.call(this,props,context);var subValues=props.subValues,parameters=props.parameters,firstParam=parameters[0],instanceValue=subValues[firstParam.name]||"";this.state={toggled:!instanceValue}}return ReplicatedGroup.prototype.render=function(){var _this=this,_props=this.props,onSwapUp=(_props.depth,_props.onSwapUp),onSwapDown=_props.onSwapDown,onRemove=_props.onRemove,parameters=_props.parameters,subValues=_props.subValues,disabled=_props.disabled,onAddValue=_props.onAddValue,toggled=this.state.toggled,unique=1===parameters.length,firstParam=parameters[0],instanceValue=subValues[firstParam.name]||React.createElement("span",{style:{color:"rgba(0,0,0,0.33)"}},"Empty Value"),ibStyles={width:36,height:36,padding:6};if(unique){var disStyle={opacity:.3},remStyle=!onRemove||disabled?disStyle:{},upStyle=!onSwapUp||disabled?disStyle:{},downStyle=!onSwapDown||disabled?disStyle:{};return React.createElement("div",{style:{display:"flex",width:"100%"}},React.createElement("div",{style:{flex:1}},React.createElement(_FormPanel2.default,_extends({},this.props,{tabs:null,values:subValues,onChange:null,className:"replicable-unique",depth:-1,style:{paddingBottom:0}}))),React.createElement("div",{style:{display:"flex",fontSize:24,paddingLeft:4,paddingTop:2}},onAddValue&&React.createElement("div",null,React.createElement("div",{className:ADD_VALUE,style:{padding:"8px 4px",cursor:"pointer"},onClick:onAddValue})),React.createElement("div",null,React.createElement("div",{className:REMOVE,style:_extends({padding:"8px 4px",cursor:"pointer"},remStyle),onClick:onRemove})),React.createElement("div",{style:{display:"flex",flexDirection:"column",padding:"0 4px"}},React.createElement("div",{className:UP_ARROW,style:_extends({height:16,cursor:"pointer"},upStyle),onClick:onSwapUp}),React.createElement("div",{className:DOWN_ARROW,style:_extends({height:16,cursor:"pointer"},downStyle),onClick:onSwapDown}))))}return React.createElement(_materialUi.Paper,{zDepth:0,style:{border:"2px solid whitesmoke",marginBottom:8}},React.createElement("div",{style:{display:"flex",alignItems:"center"}},React.createElement("div",null,React.createElement(_materialUi.IconButton,{
iconClassName:"mdi mdi-menu-"+(this.state.toggled?"down":"right"),iconStyle:{color:"rgba(0,0,0,.15)"},onClick:function(){_this.setState({toggled:!_this.state.toggled})}})),React.createElement("div",{style:{flex:1,fontSize:16}},instanceValue),React.createElement("div",null,onAddValue&&React.createElement(_materialUi.IconButton,{style:ibStyles,iconClassName:ADD_VALUE,onClick:onAddValue}),React.createElement(_materialUi.IconButton,{style:ibStyles,iconClassName:REMOVE,onClick:onRemove,disabled:!onRemove||disabled}),React.createElement(_materialUi.IconButton,{style:ibStyles,iconClassName:UP_ARROW,onClick:onSwapUp,disabled:!onSwapUp||disabled}),React.createElement(_materialUi.IconButton,{style:ibStyles,iconClassName:DOWN_ARROW,onClick:onSwapDown,disabled:!onSwapDown||disabled}))),toggled&&React.createElement(_FormPanel2.default,_extends({},this.props,{tabs:null,values:subValues,onChange:null,className:"replicable-group",depth:-1})))},ReplicatedGroup}(_react.Component);exports.default=ReplicatedGroup,module.exports=exports.default},{"./FormPanel":18,"material-ui":"material-ui",react:"react"}],21:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _ReplicatedGroup=require("./ReplicatedGroup"),_ReplicatedGroup2=_interopRequireDefault(_ReplicatedGroup),React=require("react"),_require=require("material-ui"),IconButton=_require.IconButton,PropTypes=require("prop-types"),LangUtils=require("pydio/util/lang"),_default=function(_React$Component){_inherits(_default,_React$Component);function _default(){var _this=this;_classCallCheck(this,_default),_React$Component.apply(this,arguments),this.buildSubValue=function(values){var index=arguments.length<=1||void 0===arguments[1]?0:arguments[1],subVal=void 0,suffix=0==index?"":"_"+index;return _this.props.parameters.map(function(p){var pName=p.name;void 0!==values[pName+suffix]&&(subVal||(subVal={}),subVal[pName]=values[pName+suffix])}),subVal||!1},this.indexedValues=function(rowsArray){var index=0,values={};return rowsArray.map(function(row){var suffix=0==index?"":"_"+index;for(var p in row)row.hasOwnProperty(p)&&(values[p+suffix]=row[p]);index++}),values},this.indexValues=function(rowsArray,removeLastRow){var indexed=_this.indexedValues(rowsArray);_this.props.onChange&&(removeLastRow?function(){var lastRow={},nextIndex=rowsArray.length-1;_this.props.parameters.map(function(p){lastRow[p.name+(nextIndex>0?"_"+nextIndex:"")]=""}),_this.props.onChange(indexed,!0,lastRow)}():_this.props.onChange(indexed,!0))},this.instances=function(){for(var rows=[],subVal=void 0,index=0;subVal=_this.buildSubValue(_this.props.values,index);)index++,rows.push(subVal);var firstParam=_this.props.parameters[0];return rows.length||"true"!==firstParam.replicationMandatory||function(){var emptyValue={};_this.props.parameters.map(function(p){emptyValue[p.name]=p.default||""}),rows.push(emptyValue)}(),rows},this.addRow=function(){var newValue={},currentValues=_this.instances();_this.props.parameters.map(function(p){newValue[p.name]=p.default||""}),currentValues.push(newValue),_this.indexValues(currentValues)},this.removeRow=function(index){var instances=_this.instances(),removeInst=instances[index];instances=LangUtils.arrayWithout(_this.instances(),index),instances.push(removeInst),_this.indexValues(instances,!0)},this.swapRows=function(i,j){var instances=_this.instances(),tmp=instances[j];instances[j]=instances[i],instances[i]=tmp,_this.indexValues(instances)},this.onChange=function(index,newValues,dirty){var instances=_this.instances();instances[index]=newValues,_this.indexValues(instances)},this.onParameterChange=function(index,paramName,newValue,oldValue){var instances=_this.instances();instances[index][paramName]=newValue,_this.indexValues(instances)}}return _default.prototype.render=function(){var _this2=this,_props=this.props,parameters=_props.parameters,disabled=_props.disabled,variant=_props.variant,firstParam=parameters[0],replicationTitle=firstParam.replicationTitle||firstParam.label,replicationMandatory="true"===firstParam.replicationMandatory,instances=this.instances(),multipleRows=instances.length>1,rows=instances.map(function(subValues,index){var onSwapUp=void 0,onSwapDown=void 0,onRemove=void 0,onParameterChange=function(paramName,newValue,oldValue){_this2.onParameterChange(index,paramName,newValue,oldValue)};multipleRows&&index>0&&(onSwapUp=function(){_this2.swapRows(index,index-1)}),multipleRows&&index<instances.length-1&&(onSwapDown=function(){_this2.swapRows(index,index+1)}),!multipleRows&&replicationMandatory||(onRemove=function(){_this2.removeRow(index)});var props={onSwapUp:onSwapUp,onSwapDown:onSwapDown,onRemove:onRemove,onParameterChange:onParameterChange};return replicationMandatory&&0===index&&(props.onAddValue=function(){return _this2.addRow()}),React.createElement(_ReplicatedGroup2.default,_extends({key:index},_this2.props,props,{subValues:subValues}))});if(replicationMandatory)return React.createElement("div",{className:"replicable-field",style:{marginBottom:14}},rows);var tStyle=rows.length?{}:{backgroundColor:"whitesmoke",borderRadius:4},contStyle={marginBottom:14};return"v2"===variant&&(tStyle=_extends({},tStyle,{height:52,backgroundColor:"#f6f6f8",marginTop:8,borderRadius:"4px 4px 0 0"}),rows.length||(tStyle=_extends({},tStyle,{borderBottom:"1px solid rgba(158,158,158,.3)"}),contStyle={height:58})),React.createElement("div",{className:"replicable-field",style:contStyle},React.createElement("div",{style:_extends({display:"flex",alignItems:"center"},tStyle)},React.createElement("div",{className:"title",style:{fontSize:16,flex:1,paddingLeft:8}},replicationTitle),React.createElement(IconButton,{key:"add",iconClassName:"mdi mdi-plus-box",tooltipPosition:"bottom-left",style:{padding:14},iconStyle:{fontSize:20,color:"#9e9e9e"},tooltip:"Add value",onClick:function(){return _this2.addRow()},disabled:disabled})),rows)},_createClass(_default,null,[{key:"propTypes",value:{parameters:PropTypes.array.isRequired,values:PropTypes.object,onChange:PropTypes.func,disabled:PropTypes.bool,binary_context:PropTypes.string,depth:PropTypes.number},enumerable:!0}]),_default}(React.Component);exports.default=_default,module.exports=exports.default},{"./ReplicatedGroup":20,"material-ui":"material-ui","prop-types":"prop-types","pydio/util/lang":"pydio/util/lang",react:"react"}]},{},[15])(15)});