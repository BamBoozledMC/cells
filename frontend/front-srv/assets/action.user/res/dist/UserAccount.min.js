!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).UserAccount=e()}(function(){return function a(n,o,i){function s(t,e){if(!o[t]){if(!n[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(l)return l(t,!0);throw(r=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",r}r=o[t]={exports:{}},n[t][0].call(r.exports,function(e){return s(n[t][1][e]||e)},r,r.exports,a,n,o,i)}return o[t].exports}for(var l="function"==typeof require&&require,e=0;e<i.length;e++)s(i[e]);return s}({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=e("pydio/http/resources-manager");r.default=function(e){return{openDashboard:function(){a.loadClassesAndApply(["PydioForm"],function(){e.UI.openComponentInModal("UserAccount","ModalDashboard")})},openAddressBook:function(){a.loadClassesAndApply(["PydioForm","PydioComponents"],function(){e.UI.openComponentInModal("UserAccount","ModalAddressBook")})}}},t.exports=r.default},{"pydio/http/resources-manager":"pydio/http/resources-manager"}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=e("pydio/util/xml");r.default={getAccountTabs:function(e){return a.XPathSelectNodes(e.getXmlRegistry(),'client_configs/component_config[@component="UserAccountTabs"]/additional_tab').map(function(e){return{id:e.getAttribute("id"),tabInfo:JSON.parse(e.getAttribute("tabInfo")),paneInfo:JSON.parse(e.getAttribute("paneInfo"))}})}},t.exports=r.default},{"pydio/util/xml":"pydio/util/xml"}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,a=arguments[t];for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},n=function(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e};function o(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var i=function(e,t,r){for(var a=!0;a;){var n=e,o=t,i=r,a=!1;null===n&&(n=Function.prototype);var s=Object.getOwnPropertyDescriptor(n,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(i)}n=Object.getPrototypeOf(n);if(null===n)return;e=n,t=o,r=i,a=!0,s=void 0}};var s,l=e("prop-types"),u=(s=l)&&s.__esModule?s:{default:s},c=e("react").Component,e=e("material-ui"),y=e.Toggle,g=e.Subheader,h=e.MenuItem,v=e.SelectField,b=e.TextField,O=e.TimePicker,n=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(p,c),n(p,[{key:"onChange",value:function(e){var t=this.props,r=t.values;(0,t.onChange)(a({},r,e),!0)}},{key:"onFrequencyChange",value:function(e){var t={NOTIFICATIONS_EMAIL_FREQUENCY:e},r=void 0;switch(e){case"M":r="5";break;case"H":r="2";break;case"D1":r="03";break;case"D2":r="09,14";break;case"W1":r="Monday"}t.NOTIFICATIONS_EMAIL_FREQUENCY_USER=r,this.onChange(t)}},{key:"onPickDate",value:function(e,t,r){var a=this.props.values.NOTIFICATIONS_EMAIL_FREQUENCY_USER.split(","),n=[];"first"===e&&(n=[r.getHours(),a[1]||"00"]),"last"===e&&(n=[a[0]||"00",r.getHours()]),this.onChange({NOTIFICATIONS_EMAIL_FREQUENCY_USER:n.join(",")})}},{key:"render",value:function(){function e(e){return o.MessageHash["user_dash."+e]}var a=this,t=this.props,r=t.definitions,n=t.values,o=t.pydio,i=n.NOTIFICATIONS_EMAIL_GET,s=n.NOTIFICATIONS_EMAIL_FREQUENCY,l=n.NOTIFICATIONS_EMAIL_FREQUENCY_USER,t=(n.NOTIFICATIONS_EMAIL,n.NOTIFICATIONS_EMAIL_SEND_HTML),n="true"===i,u=new Map,c=[];r[1].choices.split(",").map(function(e){e=e.split("|");u.set(e[0],e[1]),c.push(React.createElement(h,{primaryText:e[1],value:e[0]}))});var p=void 0;if(n)switch(s){case"M":case"H":p=React.createElement(b,{fullWidth:!0,floatingLabelText:e("M"===s?62:63),value:l,onChange:function(e,t){a.onChange({NOTIFICATIONS_EMAIL_FREQUENCY_USER:t})}});break;case"D1":var d=new Date;d.setHours(l),d.setMinutes(0),p=React.createElement(O,{format:"ampm",hintText:e(64),value:d,onChange:function(e,t){a.onChange({NOTIFICATIONS_EMAIL_FREQUENCY_USER:t.getHours()})},autoOk:!0,textFieldStyle:{width:"100%"}});break;case"D2":var f=l+"";f=(f=f||"09,14").split(",");var m=new Date,d=new Date;d.setMinutes(0),m.setHours(f[0]),m.setMinutes(0),f[1]&&d.setHours(f[1]),p=React.createElement("div",{style:{display:"flex"}},React.createElement(O,{format:"ampm",hintText:e(65),value:m,onChange:this.onPickDate.bind(this,"first"),textFieldStyle:{width:100,marginRight:5}}),React.createElement(O,{format:"ampm",hintText:e(66),value:d,onChange:this.onPickDate.bind(this,"last"),textFieldStyle:{width:100,marginLeft:5}}));break;case"W1":p=React.createElement(v,{floatingLabelText:e(67),fullWidth:!0,value:l,onChange:function(e,t,r){a.onChange({NOTIFICATIONS_EMAIL_FREQUENCY_USER:r})}},React.createElement(h,{primaryText:e(68),value:"Monday"}),React.createElement(h,{primaryText:e(69),value:"Tuesday"}),React.createElement(h,{primaryText:e(70),value:"Wednesday"}),React.createElement(h,{primaryText:e(71),value:"Thursday"}),React.createElement(h,{primaryText:e(72),value:"Friday"}),React.createElement(h,{primaryText:e(73),value:"Saturday"}),React.createElement(h,{primaryText:e(74),value:"Sunday"}))}return React.createElement("div",null,React.createElement(g,{style:{paddingLeft:20}},e(61)),React.createElement("div",{style:{padding:"0 20px 20px"}},React.createElement(y,{label:r[0].label,toggled:"true"===i,onToggle:function(e,t){a.onChange({NOTIFICATIONS_EMAIL_GET:t?"true":"false"})}}),n&&React.createElement("div",{style:{paddingBottom:16}},React.createElement("div",{style:{padding:"16px 0"}},React.createElement(y,{label:r[4].label,toggled:"true"===t,onToggle:function(e,t){a.onChange({NOTIFICATIONS_EMAIL_SEND_HTML:t?"true":"false"})}})),React.createElement(v,{fullWidth:!0,floatingLabelText:r[1].label,value:s,onChange:function(e,t,r){a.onFrequencyChange(r)}},c),p)))}}]),p);function p(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),i(Object.getPrototypeOf(p.prototype),"constructor",this).apply(this,arguments)}n.propTypes={definitions:u.default.object,values:u.default.object,onChange:u.default.func},r.default=n,t.exports=r.default},{"material-ui":"material-ui","prop-types":"prop-types",react:"react"}],4:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,a=arguments[t];for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},n=e("react"),o=e("create-react-class"),i=e("pydio"),e=i.requireLib("boot").ActionDialogMixin,i=i.requireLib("components"),s=i.ModalAppBar,l=i.AddressBook,e=o({displayName:"ModalAddressBook",mixins:[e],getDefaultProps:function(){return{dialogTitle:"",dialogSize:"xl",dialogPadding:!1,dialogIsModal:!1,dialogScrollBody:!0}},submit:function(){this.dismiss()},render:function(){var e=this;return n.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"column"}},n.createElement(s,{title:this.props.pydio.MessageHash["user_dash.1"],showMenuIconButton:!1,iconClassNameRight:"mdi mdi-close",onRightIconButtonClick:function(){e.dismiss()}}),n.createElement(l,a({mode:"book"},this.props,{style:{width:"100%",flexGrow:1,height:"auto"}})))}});r.default=e,t.exports=r.default},{"create-react-class":"create-react-class",pydio:"pydio",react:"react"}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,a=arguments[t];for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};function n(e){return e&&e.__esModule?e:{default:e}}var o=n(e("./ProfilePane")),i=n(e("./ComponentConfigParser")),s=e("react"),l=e("create-react-class"),u=e("pydio").requireLib("boot"),c=u.ActionDialogMixin,p=u.SubmitButtonProviderMixin,d=u.AsyncComponent,e=e("material-ui"),f=e.Tabs,m=e.Tab,y=e.FontIcon,g=e.FlatButton,p=l({displayName:"ModalDashboard",mixins:[c,p],getDefaultProps:function(){return{dialogTitle:"",dialogSize:"md",dialogPadding:!1,dialogIsModal:!1,dialogScrollBody:!1}},submit:function(){this.dismiss()},getDefaultButtons:function(){return[s.createElement(g,{label:this.props.pydio.MessageHash[86],onClick:this.props.onDismiss})]},getButtons:function(e){return this._updater=e,this.refs.profile?this.refs.profile.getButtons(this._updater):this.getDefaultButtons()},onTabChange:function(e){this._updater&&(e&&this.refs[e]&&this.refs[e].getButtons?this._updater(this.refs[e].getButtons(this._updater)):this._updater(this.getDefaultButtons()))},render:function(){var t={textTransform:"none"},r=[s.createElement(m,{key:"account",label:this.props.pydio.MessageHash["user_dash.43"],icon:s.createElement(y,{className:"mdi mdi-account"}),buttonStyle:t,value:"profile"},s.createElement(o.default,a({},this.props,{ref:"profile"})))];return i.default.getAccountTabs(this.props.pydio).map(function(e){r.push(s.createElement(m,{key:e.id,label:this.props.pydio.MessageHash[e.tabInfo.label],icon:s.createElement(y,{className:e.tabInfo.icon}),buttonStyle:t,value:e.id},s.createElement(d,a({ref:e.id},this.props,e.paneInfo))))}.bind(this)),s.createElement(f,{style:{display:"flex",flexDirection:"column",width:"100%"},tabItemContainerStyle:{minHeight:72},contentContainerStyle:{overflowY:"auto",minHeight:350},onChange:this.onTabChange},r)}});r.default=p,t.exports=r.default},{"./ComponentConfigParser":2,"./ProfilePane":8,"create-react-class":"create-react-class","material-ui":"material-ui",pydio:"pydio",react:"react"}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e};function n(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=function(e,t,r){for(var a=!0;a;){var n=e,o=t,i=r,a=!1;null===n&&(n=Function.prototype);var s=Object.getOwnPropertyDescriptor(n,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(i)}n=Object.getPrototypeOf(n);if(null===n)return;e=n,t=o,r=i,a=!0,s=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}var s=i(e("react")),l=i(e("pydio")),u=i(e("pydio/http/api")),c=e("cells-sdk"),p=l.default.requireLib("form").ValidPassword,d=l.default.requireLib("hoc").ModernTextField,a=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(f,s["default"].Component),a(f,[{key:"render",value:function(){var r=this;if(!this.props.pydio.user)return null;var e=this.props.pydio.MessageHash,t=void 0;this.state.error?t=s.default.createElement("div",{className:"error"},this.state.error):this.props.pydio.user.lock&&(t=s.default.createElement("div",null,e[444]));return s.default.createElement("div",{style:this.props.style},t,s.default.createElement("div",null,s.default.createElement("form",{autoComplete:"off"},s.default.createElement(d,{onChange:function(e,t){r.update(t,"oldPass")},type:"password",value:this.state.oldPass,floatingLabelText:e[237],autoComplete:"off"}))),s.default.createElement("div",{style:{width:256}},s.default.createElement(p,{onChange:function(e,t){r.update(e,"newPass")},attributes:{name:"pass",label:e[198]},value:this.state.newPass,name:"newpassword",onValidStatusChange:function(e){return r.setState({validStatus:e})}})))}}]),f);function f(){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),o(Object.getPrototypeOf(f.prototype),"constructor",this).apply(this,arguments),this.state={error:null,old:"",newPass:""},this.getMessage=function(e){return i.props.pydio.MessageHash[e]},this.update=function(e,t){var r={};r[t]=e,i.setState(r,function(){var e=i.validate();i.props.onValidStatusChange&&i.props.onValidStatusChange(e)})},this.validate=function(){if(!i.state.validStatus)return!1;var e=i.state,t=e.oldPass,e=e.newPass;return t&&e?e.length<parseInt(i.props.pydio.getPluginConfigs("core.auth").get("PASSWORD_MINLENGTH"))?(i.setState({error:i.getMessage(378)}),!1):(i.setState({error:null}),!0):(i.setState({error:i.getMessage(239)}),!1)},this.post=function(t){var e=i.state,r=e.oldPass,a=e.newPass,n=i.props.pydio,o="";n.user.lock&&(o=" "+i.getMessage(445)),n.user.getIdmUser().then(function(e){e=c.IdmUser.constructFromObject(JSON.parse(JSON.stringify(e)));e.OldPassword=r,e.Password=a,new c.UserServiceApi(u.default.getRestClient()).putUser(e.Login,e).then(function(){n.displayMessage("SUCCESS",i.getMessage(197)+o),t(!0),o&&n.getController().fireAction("logout")})})}}r.default=a,t.exports=r.default},{"cells-sdk":"cells-sdk",pydio:"pydio","pydio/http/api":"pydio/http/api",react:"react"}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e};function n(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=function(e,t,r){for(var a=!0;a;){var n=e,o=t,i=r,a=!1;null===n&&(n=Function.prototype);var s=Object.getOwnPropertyDescriptor(n,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(i)}n=Object.getPrototypeOf(n);if(null===n)return;e=n,t=o,r=i,a=!0,s=void 0}};var i,s=e("./PasswordForm"),l=(i=s)&&i.__esModule?i:{default:i},u=e("react"),c=e("material-ui"),p=c.FlatButton,d=c.RaisedButton,f=c.Popover,m=c.Divider,a=(e("pydio"),function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(y,u.Component),a(y,[{key:"passOpenPopover",value:function(e){this.setState({passOpen:!0,passAnchor:e.currentTarget})}},{key:"passClosePopover",value:function(){this.setState({passOpen:!1})}},{key:"passValidStatusChange",value:function(e){this.setState({passValid:e})}},{key:"passSubmit",value:function(){this.refs.passwordForm.post(function(e){e&&this.passClosePopover()}.bind(this))}},{key:"render",value:function(){var e=this.props.pydio,t=this.state,r=t.passOpen,a=t.passAnchor,t=t.passValid;return u.createElement("div",{style:{marginLeft:8}},u.createElement(d,{onClick:this.passOpenPopover.bind(this),label:e.MessageHash[194],primary:!0}),u.createElement(f,{open:r,anchorEl:a,anchorOrigin:{horizontal:"left",vertical:"top"},targetOrigin:{horizontal:"left",vertical:"bottom"},onRequestClose:this.passClosePopover.bind(this),zDepth:2},u.createElement("div",null,u.createElement(l.default,{style:{padding:10,backgroundColor:"#fafafa",paddingBottom:30},pydio:e,ref:"passwordForm",onValidStatusChange:this.passValidStatusChange.bind(this)}),u.createElement(m,null),u.createElement("div",{style:{textAlign:"right",padding:"8px 0"}},u.createElement(p,{label:this.props.pydio.MessageHash[49],onClick:this.passClosePopover.bind(this)}),u.createElement(p,{disabled:!t,label:"Ok",onClick:this.passSubmit.bind(this)})))))}}]),y);function y(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),o(Object.getPrototypeOf(y.prototype),"constructor",this).call(this,e,t),this.state={passOpen:!1,passValid:!1,passAnchor:null}}r.default=a,t.exports=r.default},{"./PasswordForm":6,"material-ui":"material-ui",pydio:"pydio",react:"react"}],8:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,a=arguments[t];for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},n=function(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e};function o(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var s=function(e,t,r){for(var a=!0;a;){var n=e,o=t,i=r,a=!1;null===n&&(n=Function.prototype);var s=Object.getOwnPropertyDescriptor(n,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(i)}n=Object.getPrototypeOf(n);if(null===n)return;e=n,t=o,r=i,a=!0,s=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}var l=i(e("react")),u=i(e("./PasswordPopover")),c=(i(e("./EmailPanel")),i(e("pydio/util/lang"))),p=e("material-ui"),d=i(e("pydio")),f=i(e("pydio/http/api")),m=e("cells-sdk"),d=d.default.requireLib("form"),y=d.Manager,g=d.FormPanel,n=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(h,l["default"].Component),n(h,[{key:"render",value:function(){var e=this.props,t=e.pydio,r=e.miniDisplay;if(!t.user)return null;var a=this.state,e=a.definitions,a=a.values;return r&&(e=e.filter(function(e){return-1!==["avatar"].indexOf(e.name)})),l.default.createElement("div",null,l.default.createElement(g,{className:"current-user-edit",parameters:e,values:a,depth:-1,binary_context:"user_id="+t.user.id+(a.avatar?"?"+a.avatar:""),onChange:this.onFormChange}),l.default.createElement("style",{type:"text/css",dangerouslySetInnerHTML:{__html:" \n.react-mui-context .current-user-edit.pydio-form-panel > .pydio-form-group:first-of-type {\n  margin-top: 230px;\n  overflow-y: hidden;\n}\n.react-mui-context .current-user-edit.pydio-form-panel > .pydio-form-group div.form-entry-image {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 220px;\n  background-color: #eceff1;\n}\n.react-mui-context .current-user-edit.pydio-form-panel .form-entry-image>div:last-child {\n  margin-top: 0;\n}\n\n.react-mui-context .current-user-edit.pydio-form-panel > .pydio-form-group div.form-entry-image > div:first-child {\n  padding: 0;\n  border-radius: 0;\n}\n.react-mui-context .current-user-edit.pydio-form-panel > .pydio-form-group div.form-entry-image .image-label,\n.react-mui-context .current-user-edit.pydio-form-panel > .pydio-form-group div.form-entry-image .form-legend {\n  display: none;\n}\n.react-mui-context .current-user-edit.pydio-form-panel > .pydio-form-group div.form-entry-image .file-dropzone {\n  border-radius: 50%;\n  width: 160px !important;\n  height: 160px !important;\n  margin: 20px auto;\n}\n.react-mui-context .current-user-edit.pydio-form-panel > .pydio-form-group div.form-entry-image .binary-remove-button {\n  position: absolute;\n  bottom: 5px;\n  right: 0;\n}\n\n"}}))}}]),h);function h(e){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),s(Object.getPrototypeOf(h.prototype),"constructor",this).call(this,e),this.onFormChange=function(e,t,r){var a=i.state.values;i.setState({dirty:t,values:e},function(){i._updater&&i._updater(i.getButtons()),!i.props.saveOnChange&&e.avatar===a.avatar||i.saveForm()})},this.getButtons=function(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0];e&&(i._updater=e);var t=void 0,e=void 0,t=i.state.dirty?(e=l.default.createElement(p.FlatButton,{label:i.props.pydio.MessageHash[628],onClick:i.revert}),l.default.createElement(p.FlatButton,{label:i.props.pydio.MessageHash[53],secondary:!0,onClick:i.saveForm})):l.default.createElement(p.FlatButton,{label:i.props.pydio.MessageHash[86],onClick:i.props.onDismiss});return i.props.pydio.Controller.getActionByName("pass_change")?[l.default.createElement("div",{style:{display:"flex",width:"100%"}},l.default.createElement(u.default,i.props),l.default.createElement("span",{style:{flex:1}}),e,t)]:[t]},this.revert=function(){i.setState({values:a({},i.state.originalValues),dirty:!1},function(){i._updater&&i._updater(i.getButtons())})},this.saveForm=function(){var a,e,n,o;i.state.dirty?(a=i.props.pydio,e=i.state,n=e.definitions,o=e.values,a.user.getIdmUser().then(function(t){t.Attributes||(t.Attributes={}),n.forEach(function(e){void 0!==o[e.name]&&("user"===e.scope?t.Attributes[e.name]=o[e.name]:t.Attributes["parameter:"+e.pluginId+":"+e.name]=JSON.stringify(o[e.name]))});var r=!1;return o.lang&&o.lang!==a.currentLanguage&&(a.user.setPreference("lang",o.lang),r=!0),new m.UserServiceApi(f.default.getRestClient()).putUser(t.Login,t).then(function(e){r&&a.observeOnce("registry_loaded",function(){i.setState({definitions:y.parseParameters(a.getXmlRegistry(),"user/preferences/pref[@exposed='true']|//param[contains(@scope,'user') and @expose='true' and not(contains(@name, 'NOTIFICATIONS_EMAIL'))]"),mailDefinitions:y.parseParameters(a.getXmlRegistry(),"user/preferences/pref[@exposed='true']|//param[contains(@scope,'user') and @expose='true' and contains(@name, 'NOTIFICATIONS_EMAIL')]")})}),a.refreshUserData(),i.setState({dirty:!1},function(){i._updater&&i._updater(i.getButtons())})})})):i.setState({dirty:!1})};var r={},e=e.pydio;e.user&&e.user.preferences.forEach(function(e,t){"gui_preferences"!==t&&(r[t]=e)}),this.state={definitions:y.parseParameters(e.getXmlRegistry(),"user/preferences/pref[@exposed='true']|//param[contains(@scope,'user') and @expose='true' and not(contains(@name, 'NOTIFICATIONS_EMAIL'))]"),mailDefinitions:y.parseParameters(e.getXmlRegistry(),"user/preferences/pref[@exposed='true']|//param[contains(@scope,'user') and @expose='true' and contains(@name, 'NOTIFICATIONS_EMAIL')]"),values:r,originalValues:c.default.deepCopy(r),dirty:!1}}r.default=n,t.exports=r.default},{"./EmailPanel":3,"./PasswordPopover":7,"cells-sdk":"cells-sdk","material-ui":"material-ui",pydio:"pydio","pydio/http/api":"pydio/http/api","pydio/util/lang":"pydio/util/lang",react:"react"}],9:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,a=arguments[t];for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};function n(e){return e&&e.__esModule?e:{default:e}}var o=n(e("react")),i=n(e("create-react-class")),s=n(e("./ProfilePane")),l=n(e("pydio")),u=e("material-ui"),c=l.default.requireLib("boot"),e=c.ActionDialogMixin,l=c.CancelButtonProviderMixin;c.SubmitButtonProviderMixin;r.default=(0,i.default)({displayName:"WelcomeModal",mixins:[e,l],getDefaultProps:function(){return{dialogTitle:"",dialogIsModal:!0,dialogSize:"sm",dialogPadding:0}},close:function(e){this.props.onRequestStart&&this.props.onRequestStart(e),this.props.onDismiss()},getMessage:function(e){return this.props.pydio.MessageHash["ajax_gui.tour.welcomemodal."+e]},getButtons:function(){var e=this;return[o.default.createElement(u.FlatButton,{label:this.getMessage("skip"),onClick:function(){e.close(!0)}}),o.default.createElement(u.FlatButton,{label:this.getMessage("start"),primary:!0,onClick:function(){return e.close(!1)}})]},render:function(){return o.default.createElement("div",null,o.default.createElement("div",{style:{position:"relative",width:"100%",height:220,overflow:"hidden",backgroundColor:"#eceff1"}},o.default.createElement(s.default,a({miniDisplay:!0},this.props,{saveOnChange:!0}))),o.default.createElement(u.CardTitle,{title:this.getMessage("title"),subtitle:this.getMessage("subtitle")}))}}),t.exports=r.default},{"./ProfilePane":8,"create-react-class":"create-react-class","material-ui":"material-ui",pydio:"pydio",react:"react"}],10:[function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=a(e("./Callbacks")),o=a(e("./ModalDashboard")),i=a(e("./ModalAddressBook")),s=a(e("./WelcomeModal")),e=a(e("./PasswordForm")),n=(0,n.default)(window.pydio);r.Callbacks=n,r.ModalDashboard=o.default,r.ModalAddressBook=i.default,r.WelcomeModal=s.default,r.PasswordForm=e.default},{"./Callbacks":1,"./ModalAddressBook":4,"./ModalDashboard":5,"./PasswordForm":6,"./WelcomeModal":9}]},{},[10])(10)});