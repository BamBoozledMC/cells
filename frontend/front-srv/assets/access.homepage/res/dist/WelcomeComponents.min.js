!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).WelcomeComponents=e()}(function(){return function r(n,a,i){function l(o,e){if(!a[o]){if(!n[o]){var t="function"==typeof require&&require;if(!e&&t)return t(o,!0);if(s)return s(o,!0);t=new Error("Cannot find module '"+o+"'");throw t.code="MODULE_NOT_FOUND",t}t=a[o]={exports:{}};n[o][0].call(t.exports,function(e){var t=n[o][1][e];return l(t||e)},t,t.exports,r,n,a,i)}return a[o].exports}for(var s="function"==typeof require&&require,e=0;e<i.length;e++)l(i[e]);return l}({1:[function(m,h,g){!function(e){"use strict";Object.defineProperty(g,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o,r=arguments[t];for(o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},t=function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e};function n(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(e,t,o){for(var r=!0;r;){var n=e,a=t,i=o,r=!1;null===n&&(n=Function.prototype);var l=Object.getOwnPropertyDescriptor(n,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;return void 0===s?void 0:s.call(i)}n=Object.getPrototypeOf(n);if(null===n)return;e=n,t=a,o=i,r=!0,l=void 0}};function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=a(m("./DownloadApp")),c=a(m("../board/ColorPaper")),u=m("react"),p=m("pydio").requireLib("components").asGridItem,d=(l(f,u.Component),t(f,[{key:"render",value:function(){var e=this.props.pydio.getPluginConfigs("access.homepage"),t=[],o=[];return e.get("URL_APP_IOSAPPSTORE")&&t.push(u.createElement(s.default,r({},this.props,{id:"dl_pydio_ios",key:"dl_pydio_ios",configs:e,configHref:"URL_APP_IOSAPPSTORE",containerClassName:"icon-tablet",iconClassName:"icon-apple",messageId:"user_home.59",tooltipId:"user_home.70"}))),e.get("URL_APP_ANDROID")&&t.push(u.createElement(s.default,r({},this.props,{id:"dl_pydio_android",key:"dl_pydio_android",configs:e,configHref:"URL_APP_ANDROID",containerClassName:"icon-mobile-phone",iconClassName:"icon-android",messageId:"user_home.58",tooltipId:"user_home.71"}))),e.get("URL_APP_SYNC_WIN")&&o.push(u.createElement(s.default,r({},this.props,{id:"dl_pydio_win",key:"dl_pydio_win",configs:e,configHref:"URL_APP_SYNC_WIN",containerClassName:"icon-laptop",iconClassName:"icon-windows",messageId:"user_home.61",tooltipId:"user_home.68"}))),e.get("URL_APP_SYNC_MAC")&&o.push(u.createElement(s.default,r({},this.props,{id:"dl_pydio_mac",key:"dl_pydio_mac",configs:e,configHref:"URL_APP_SYNC_MAC",containerClassName:"icon-desktop",iconClassName:"icon-apple",messageId:"user_home.60",tooltipId:"user_home.69"}))),u.createElement("div",{style:{textAlign:"center",paddingTop:5}},"sync"===this.props.type?o:t)}}]),f);function f(){i(this,f),o(Object.getPrototypeOf(f.prototype),"constructor",this).apply(this,arguments)}l(y,u.Component),t(y,[{key:"render",value:function(){var e=r({},this.props);return u.createElement(c.default,r({},this.props,{style:r({},this.props.style,{overflow:"visible"}),paletteIndex:1,closeButton:e.closeButton}),u.createElement(d,{pydio:this.props.pydio,type:"sync",iconColor:"#ffffff"}),u.createElement("div",{style:{fontSize:16,padding:16,paddingTop:0,textAlign:"center"}},this.props.pydio.MessageHash["user_home.91"]))}}]),t=y;function y(){i(this,y),o(Object.getPrototypeOf(y.prototype),"constructor",this).apply(this,arguments)}g.default=t=p(t,e.pydio.MessageHash["user_home.92"],{gridWidth:2,gridHeight:10},[]),g.default=t,h.exports=g.default}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../board/ColorPaper":4,"./DownloadApp":2,pydio:"pydio",react:"react"}],2:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o,r=arguments[t];for(o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},r=function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e};function n(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(e,t,o){for(var r=!0;r;){var n=e,a=t,i=o,r=!1;null===n&&(n=Function.prototype);var l=Object.getOwnPropertyDescriptor(n,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;return void 0===s?void 0:s.call(i)}n=Object.getPrototypeOf(n);if(null===n)return;e=n,t=a,o=i,r=!0,l=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}var s=i(e("react")),e=i(e("prop-types")),r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,s["default"].Component),r(c,[{key:"render",value:function(){var e={smallIcon:{fontSize:40,width:40,height:40},small:{width:80,height:80,padding:20}},t=this.props,o=t.pydio,r=t.iconClassName,n=t.tooltipId,a=t.configs,i=t.configHref;return s.default.createElement(MaterialUI.IconButton,{iconClassName:r,tooltip:o.MessageHash[n],tooltipStyles:{marginTop:40},style:e.small,iconStyle:l({},e.smallIcon,{color:this.props.iconColor}),onClick:function(){window.open(a.get(i))}})}}]),c);function c(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),a(Object.getPrototypeOf(c.prototype),"constructor",this).apply(this,arguments)}r.propTypes={pydio:e.default.instanceOf(Pydio),id:e.default.string,configs:e.default.object,configHref:e.default.string,iconClassName:e.default.string,iconColor:e.default.string,messageId:e.default.string,tooltipId:e.default.string},o.default=r,t.exports=o.default},{"prop-types":"prop-types",react:"react"}],3:[function(d,f,y){!function(e){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o,r=arguments[t];for(o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},o=function(e,t,o){return t&&r(e.prototype,t),o&&r(e,o),e};function r(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n=function(e,t,o){for(var r=!0;r;){var n=e,a=t,i=o,r=!1;null===n&&(n=Function.prototype);var l=Object.getOwnPropertyDescriptor(n,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;return void 0===s?void 0:s.call(i)}n=Object.getPrototypeOf(n);if(null===n)return;e=n,t=a,o=i,r=!0,l=void 0}};function a(e){return e&&e.__esModule?e:{default:e}}var i=a(d("../board/Palette")),l=a(d("../board/ColorPaper")),s=d("react"),c=d("qrcode.react"),u=d("pydio").requireLib("components").asGridItem,o=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(p,s.Component),o(p,[{key:"render",value:function(){var e={server:window.location.href.split("welcome").shift(),user:this.props.pydio.user?this.props.pydio.user.id:null};return s.createElement(l.default,t({},this.props,{style:t({},this.props.style,{display:"flex"}),paletteIndex:2,closeButton:this.props.closeButton}),s.createElement("div",{style:{padding:16,fontSize:16,paddingRight:8,overflow:"hidden"}},this.props.pydio.MessageHash["user_home.74"]),s.createElement("div",{className:"home-qrCode",style:{display:"flex",justifyContent:"center",alignItems:"center",marginRight:16}},s.createElement(c,{bgColor:i.default[2],fgColor:"#ffffff",value:JSON.stringify(e),size:80})))}}]),p);function p(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),n(Object.getPrototypeOf(p.prototype),"constructor",this).apply(this,arguments)}y.default=o=u(o,e.pydio.MessageHash["user_home.72"],{gridWidth:2,gridHeight:10},[]),y.default=o,f.exports=y.default}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../board/ColorPaper":4,"../board/Palette":9,pydio:"pydio","qrcode.react":"qrcode.react",react:"react"}],4:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o,r=arguments[t];for(o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},n=function(e,t,o){return t&&a(e.prototype,t),o&&a(e,o),e};function a(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(e,t,o){for(var r=!0;r;){var n=e,a=t,i=o,r=!1;null===n&&(n=Function.prototype);var l=Object.getOwnPropertyDescriptor(n,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;return void 0===s?void 0:s.call(i)}n=Object.getPrototypeOf(n);if(null===n)return;e=n,t=a,o=i,r=!0,l=void 0}};var l,s=e("./Palette"),c=(l=s)&&l.__esModule?l:{default:l},u=e("prop-types"),p=e("react"),d=e("material-ui").Paper,n=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(f,p.Component),n(f,[{key:"render",value:function(){var e=c.default[this.props.paletteIndex],e=r({},this.props.style,{backgroundColor:e,color:"white"});return p.createElement(d,r({zDepth:1},this.props,{transitionEnabled:!1,style:e,className:this.props.className}),this.props.getCloseButton?this.props.getCloseButton():this.props.closeButton,this.props.children)}}]),f);function f(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),i(Object.getPrototypeOf(f.prototype),"constructor",this).apply(this,arguments)}n.propTypes={style:u.object.isRequired,getCloseButton:u.func,closeButton:u.object,paletteIndex:u.number.isRequired},o.default=n,t.exports=o.default},{"./Palette":9,"material-ui":"material-ui","prop-types":"prop-types",react:"react"}],5:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e};function n(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(e,t,o){for(var r=!0;r;){var n=e,a=t,i=o,r=!1;null===n&&(n=Function.prototype);var l=Object.getOwnPropertyDescriptor(n,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;return void 0===s?void 0:s.call(i)}n=Object.getPrototypeOf(n);if(null===n)return;e=n,t=a,o=i,r=!0,l=void 0}};var i=e("react"),r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,i.Component),r(l,[{key:"render",value:function(){var e=this.props.pydio.Registry.getPluginConfigs(this.props.pluginName).get(this.props.pluginParameter),t=void 0;return(e=e||this.props.pydio.Registry.getDefaultImageFromParameters(this.props.pluginName,this.props.pluginParameter))&&(t=0===e.indexOf("plug/")?e:this.props.pydio.Parameters.get("ENDPOINT_REST_API")+"/frontend/binaries/GLOBAL/"+e),i.createElement("img",{src:t,style:this.props.style,className:this.props.className})}}]),l);function l(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),a(Object.getPrototypeOf(l.prototype),"constructor",this).apply(this,arguments)}o.default=r,t.exports=o.default},{react:"react"}],6:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o,r=arguments[t];for(o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},r=function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e};function n(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(e,t,o){for(var r=!0;r;){var n=e,a=t,i=o,r=!1;null===n&&(n=Function.prototype);var l=Object.getOwnPropertyDescriptor(n,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;return void 0===s?void 0:s.call(i)}n=Object.getPrototypeOf(n);if(null===n)return;e=n,t=a,o=i,r=!0,l=void 0}};function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c,u=e("react"),p=(c=u)&&c.__esModule?c:{default:c},d=e("material-ui"),f=(l(y,p["default"].Component),r(y,[{key:"select",value:function(){var e=this.props;(0,e.onSelect)(e.facet,!0)}},{key:"clear",value:function(){var e=this.props;(0,e.onSelect)(e.facet,!1)}},{key:"render",value:function(){var e=this,t=this.props,o=t.facet,r=t.selected,n=t.m,a=void 0,t=void 0;r?t=function(){return e.clear()}:a=function(){return e.select()};var i,l,r={chip:{backgroundColor:r?"#03a9f4":null,labelColor:r?"white":null},avatar:{backgroundColor:r?"#0288D1":null,color:r?"white":null}};return p.default.createElement(d.Chip,s({style:{margin:4},onRequestDelete:t,onClick:a},r.chip),p.default.createElement(d.Avatar,r.avatar,o.Count)," ",(i=o.Label,n(l="facet.label."+i)===l?i:n(l)))}}]),y);function y(){i(this,y),a(Object.getPrototypeOf(y.prototype),"constructor",this).apply(this,arguments)}l(m,p["default"].Component),r(m,[{key:"isSelected",value:function(e,t){return 0<e.filter(function(e){return e.FieldName===t.FieldName&&e.Label===t.Label}).length}},{key:"render",value:function(){function t(e){return r.MessageHash["user_home."+e]||e}var o=this,e=this.props,r=e.pydio,n=e.facets,a=e.onSelectFacet,e=e.selected,i=void 0===e?[]:e,l={},s={NodeType:"type",Extension:"extension",Size:"size",ModifTime:"modified",Basename:"found",Meta:"metadata"},c=0<i.filter(function(e){return"TextContent"===e.FieldName}).length;if(n.forEach(function(e){var t=e.FieldName;"Basename"===(t=0===t.indexOf("Meta.")?"Meta":t)&&c||(l[t="TextContent"===t?"Basename":t]||(l[t]=[]),l[t].push(e))}),!Object.keys(s).filter(function(e){return l[e]}).filter(function(e){return 0<l[e].filter(function(e){return o.isSelected(i,e)}).length||1<l[e].length}).length)return null;var u={container:{position:"absolute",top:90,right:"calc(50% + 350px)",maxHeight:"calc(100% - 100px)",overflowY:"auto",width:200,borderRadius:6,paddingBottom:10},header:{fontWeight:500,color:"#5c7784",padding:10,fontSize:15},subHeader:{fontWeight:500,padding:"5px 10px",color:"rgba(92, 119, 132, 0.7)"}};return p.default.createElement(d.Paper,{style:u.container},p.default.createElement("div",{style:u.header},t("search.facets.title")),Object.keys(s).filter(function(e){return l[e]}).filter(function(e){return 0<l[e].filter(function(e){return o.isSelected(i,e)}).length||1<l[e].length}).map(function(e){return p.default.createElement("div",{style:{marginBottom:10}},p.default.createElement("div",{style:u.subHeader},t("search.facet."+s[e])),p.default.createElement("div",{style:{zoom:.8,marginLeft:10}},l[e].sort(function(e,t){return e.Label.localeCompare(t.Label)}).map(function(e){return p.default.createElement(f,{m:t,facet:e,selected:o.isSelected(i,e),onSelect:a})})))}))}}]),r=m;function m(){i(this,m),a(Object.getPrototypeOf(m.prototype),"constructor",this).apply(this,arguments)}o.default=r,t.exports=o.default},{"material-ui":"material-ui",react:"react"}],7:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o,r=arguments[t];for(o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},r=function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e};function n(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(e,t,o){for(var r=!0;r;){var n=e,a=t,i=o,r=!1;null===n&&(n=Function.prototype);var l=Object.getOwnPropertyDescriptor(n,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;return void 0===s?void 0:s.call(i)}n=Object.getPrototypeOf(n);if(null===n)return;e=n,t=a,o=i,r=!0,l=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}var u=i(e("react")),l=i(e("pydio")),p=e("material-ui"),s=e("material-ui/styles"),d=i(e("./ConfigLogo")),f=i(e("./WelcomeTour")),y=i(e("./HomeSearchForm")),m=i(e("../recent/SmartRecents")),h=l.default.requireLib("workspaces").MasterLayout,r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(g,u["default"].Component),r(g,[{key:"showTutorial",value:function(){var e=this.props.pydio,t=e.user?e.user.getPreference("gui_preferences",!0):[];return e.getPluginConfigs("gui.ajax").get("ENABLE_WELCOME_TOUR")&&!t["WelcomeComponent.Pydio8.TourGuide.Welcome"]}},{key:"openDrawer",value:function(e){e.stopPropagation(),this.clearCloseTimeout(),this.setState({drawerOpen:!0})}},{key:"clearCloseTimeout",value:function(){this.closeTimeout&&clearTimeout(this.closeTimeout)}},{key:"render",value:function(){var t=this,e=this.props,o=e.pydio,r=e.muiTheme,n=this.state,a=n.drawerOpen,i=n.fullScreen,l=new p.Color(r.appBar.color),e=(0,p.Color)(r.palette.primary1Color).hsl().array()[0],n=new p.Color({h:e,s:35,l:98}),e=(0,p.Color)(r.palette.primary1Color).darken(.1).alpha(.87),r={appBarStyle:{backgroundColor:"rgba(255, 255, 255, 0.50)",height:i?0:200,display:"flex",alignItems:"center",justifyContent:"center"},buttonsStyle:{color:r.appBar.textColor},iconButtonsStyle:{color:l.darken(.4).toString()},wsListsContainerStyle:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:"white",position:"relative"},wsListStyle:{backgroundColor:n.toString(),color:e.toString()}},s=void 0;this.showTutorial()&&(s=u.default.createElement(f.default,{ref:"welcome",pydio:o,onFinish:function(){t.closeTimeout=setTimeout(function(){t.setState({drawerOpen:!1})},1500)}}));l=u.default.createElement("span",{className:"drawer-button",style:{position:"absolute",top:0,left:0}},u.default.createElement(p.IconButton,{iconStyle:{color:null},iconClassName:"mdi mdi-menu",onClick:this.openDrawer.bind(this)})),n={style:{backgroundColor:"transparent"},headerHeight:72,onMouseOver:function(){t.clearCloseTimeout()},userWidgetProps:{color:e.toString(),mergeButtonInAvatar:!0,popoverDirection:"left",actionBarStyle:{marginTop:0},style:{height:72,display:"flex",alignItems:"center",backgroundColor:n.toString(),boxShadow:"none"}},workspacesListProps:{style:r.wsListStyle}};return u.default.createElement(h,{pydio:o,classes:["vertical_layout","vertical_fit","react-fs-template","user-dashboard-template"],tutorialComponent:s,leftPanelProps:n,drawerOpen:a,onCloseDrawerRequested:function(){void 0===s&&t.setState({drawerOpen:!1})}},u.default.createElement(p.Paper,{zDepth:0,style:c({},r.appBarStyle),rounded:!1},l,u.default.createElement("div",{style:{width:250}},u.default.createElement(d.default,{className:"home-top-logo",pydio:this.props.pydio,pluginName:"gui.ajax",pluginParameter:"CUSTOM_DASH_LOGO"}))),u.default.createElement(y.default,c({zDepth:0},this.props,{style:r.wsListsContainerStyle,fullScreen:i,onFocusChange:function(e){t.setState({fullScreen:e})}}),u.default.createElement(m.default,c({},this.props,{style:{maxWidth:610,width:"100%"},emptyStateProps:{style:{backgroundColor:"white"}}}))))}}]),g);function g(e){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g),a(Object.getPrototypeOf(g.prototype),"constructor",this).call(this,e),this.state={unreadStatus:0,drawerOpen:!0},this.showTutorial()||(this.closeTimeout=setTimeout(function(){t.setState({drawerOpen:!1})},2500))}o.default=r=(0,s.muiThemeable)()(r),o.default=r,t.exports=o.default},{"../recent/SmartRecents":14,"./ConfigLogo":5,"./HomeSearchForm":8,"./WelcomeTour":10,"material-ui":"material-ui","material-ui/styles":"material-ui/styles",pydio:"pydio",react:"react"}],8:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e};function n(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(e,t,o){for(var r=!0;r;){var n=e,a=t,i=o,r=!1;null===n&&(n=Function.prototype);var l=Object.getOwnPropertyDescriptor(n,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;return void 0===s?void 0:s.call(i)}n=Object.getPrototypeOf(n);if(null===n)return;e=n,t=a,o=i,r=!0,l=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}var l=e("react"),v=i(l),s=i(e("pydio")),b=e("material-ui"),c=e("material-ui/styles"),w=i(e("pydio/util/path")),O=i(e("./Facets")),_=s.default.requireLib("components").SimpleList,u=s.default.requireLib("boot"),e=u.PydioContextConsumer,P=u.moment,u=s.default.requireLib("workspaces"),C=u.UnifiedSearchForm,E=u.FilePreview,s=s.default.requireLib("hoc").withSearch,r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(p,l.Component),r(p,[{key:"update",value:function(e){(0,this.props.setValues)({basenameOrContent:e})}},{key:"render",value:function(){var e=this.props,t=e.values,o=e.setValues,r=e.facets,n=e.activeFacets,a=e.toggleFacet,i=e.loading,l=e.dataModel,s=e.empty,c=e.history,u=e.savedSearches,p=e.saveSearch,d=e.clearSavedSearch,f=this.props,y=f.style,m=f.zDepth,h=f.pydio,e=f.fullScreen,g=f.onFocusChange,f=(h.MessageHash[607],"rgba(0,0,0,.53)"),f={textFieldContainer:{display:"flex",backgroundColor:"#eceff1",height:50,width:"96%",maxWidth:700,padding:"2px 4px 4px 4px",borderRadius:50,position:"absolute",top:e?25:-25},textField:{flex:1},textInput:{color:"inherit"},textHint:{color:f,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",width:"100%"},magnifier:{color:f,fontSize:20,padding:"14px 8px"},close:{position:"absolute",right:0},searchForm:{mainStyle:{backgroundColor:"transparent",height:48,border:0},completeMenuStyle:{width:"100%"},inputStyle:{fontSize:18},hintStyle:{fontSize:18},magnifierStyle:{fontSize:20,color:"rgba(0,0,0,0.73)",marginRight:10},filterButton:{padding:"7px 6px 0px",color:"#03a9f4",fontSize:22},filterButtonActive:{top:10,padding:"3px 8px",fontSize:16}}};return v.default.createElement(b.Paper,{style:y,zDepth:m,className:"vertical-layout home-center-paper",rounded:!1},v.default.createElement(b.Paper,{zDepth:e?1:0,style:f.textFieldContainer,ref:"container",className:"home-search-form"},v.default.createElement(C,{style:{flex:1},active:e,pydio:h,formStyles:f.searchForm,values:t,setValues:o,history:c,savedSearches:u,clearSavedSearch:d,saveSearch:p,onRequestOpen:function(){return g(!0)},onRequestClose:function(){return g(!1)}}),i&&v.default.createElement("div",{style:{marginTop:14,marginRight:8}},v.default.createElement(b.CircularProgress,{size:20,thickness:2}))),e&&v.default.createElement(b.IconButton,{iconClassName:"mdi mdi-close",style:f.close,onClick:function(){return g(!1)},tooltipPosition:"bottom-left",tooltip:h.MessageHash[86]}),!s&&e&&r&&v.default.createElement(O.default,{facets:r,selected:n,pydio:h,onSelectFacet:a}),e&&v.default.createElement(PydioComponents.NodeListCustomProvider,{ref:"results",containerStyle:{width:"86%",maxWidth:650,marginTop:e?75:20},className:"files-list vertical_fit",elementHeight:_.HEIGHT_TWO_LINES,entryRenderIcon:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return v.default.createElement(E,{loadThumbnail:!t.parentIsScrolling,node:e})},entryRenderActions:function(){return null},entryRenderSecondLine:function(e){var t=e.getPath(),o=e.getMetadata(),r=new Date;r.setTime(1e3*parseInt(o.get("ajxp_modiftime")));o=P(r).fromNow(),r=void 0;parseInt(e.getMetadata().get("bytesize"))&&(r=w.default.roundFileSize(parseInt(e.getMetadata().get("bytesize"))));e=void 0;return w.default.getDirname(t)&&(e=h.MessageHash["user_home.search.result.location"]+": "+w.default.getDirname(t)||"/"),v.default.createElement("div",null,o," ",r?v.default.createElement("span",null,"• ",r):""," ",e?v.default.createElement("span",null,"• ",e):null)},entryRenderGroupHeader:function(e,t){return v.default.createElement("div",{style:{fontSize:13,color:"#93a8b2",fontWeight:500,cursor:"pointer"},onClick:function(){return h.triggerRepositoryChange(e)}},t)},presetDataModel:l,presetRootNode:l.getSearchNode(),openCollection:function(e){h.goTo(e)},nodeClicked:function(e){h.goTo(e)},defaultGroupBy:"repository_id",groupByLabel:"repository_display",emptyStateProps:{iconClassName:"",primaryTextId:i?"searchengine.searching":478,style:{backgroundColor:"transparent"}}}),!e&&this.props.children&&v.default.createElement("div",{style:{display:s?"block":"none",flex:1,overflowY:"auto",marginTop:40},id:"history-block"},this.props.children))}}]),p);function p(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),a(Object.getPrototypeOf(p.prototype),"constructor",this).call(this,e)}o.default=r=s(r,"home","all"),o.default=r=e(r),o.default=r=(0,c.muiThemeable)()(r),o.default=r,t.exports=o.default},{"./Facets":6,"material-ui":"material-ui","material-ui/styles":"material-ui/styles",pydio:"pydio","pydio/util/path":"pydio/util/path",react:"react"}],9:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});o.default=["#E53935","#D81B60","#7b1fa2","#3f51b5","#2196f3"],t.exports=o.default},{}],10:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o,r=arguments[t];for(o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},n=function(e,t,o){return t&&a(e.prototype,t),o&&a(e,o),e};function a(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(e,t,o){for(var r=!0;r;){var n=e,a=t,i=o,r=!1;null===n&&(n=Function.prototype);var l=Object.getOwnPropertyDescriptor(n,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;return void 0===s?void 0:s.call(i)}n=Object.getPrototypeOf(n);if(null===n)return;e=n,t=a,o=i,r=!0,l=void 0}};function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c,u=e("react"),p=e("pydio"),e=((c=p)&&c.__esModule?c:{default:c}).default.requireLib("boot"),d=e.AsyncComponent,e=e.PydioContextConsumer,f=(s(y,u.Component),n(y,[{key:"render",value:function(){var e={position:"relative",fontSize:24,width:this.props.dimension||100,height:this.props.dimension||100,backgroundColor:"#ECEFF1",color:"#607d8b",borderRadius:"50%",margin:"0 auto"};return React.createElement("div",{style:r({},e,this.props.style)},this.props.children)}}]),y);function y(){l(this,y),i(Object.getPrototypeOf(y.prototype),"constructor",this).apply(this,arguments)}function m(e){function t(e){return React.createElement("div",{style:{position:"absolute",top:52,left:20,width:80,display:"flex",transformOrigin:"left",transform:"rotate("+-e+"deg)"}},React.createElement("span",{style:{flex:1}}),React.createElement("span",{className:"mdi mdi-dots-horizontal",style:{opacity:.5,marginRight:5}}),React.createElement("span",{style:{display:"inline-block",transform:"rotate("+e+"deg)"},className:"mdi mdi-account"}))}return React.createElement("div",null,React.createElement("p",null,e.message("workspaces.1")),React.createElement(f,{dimension:130},React.createElement("span",{style:{position:"absolute",top:52,left:20},className:"mdi mdi-network"}),t(30),t(0),t(-30)),React.createElement("p",null,e.message("workspaces.2")),React.createElement(f,{dimension:130},React.createElement("span",{className:"mdi mdi-account",style:{position:"absolute",left:54,top:32}}),React.createElement("div",{style:{position:"absolute",top:60,left:30}},React.createElement("span",{className:"mdi mdi-folder"}),React.createElement("span",{className:"mdi mdi-arrow-right"}),React.createElement("span",{className:"mdi mdi-network"}))))}function h(e){return React.createElement("div",null,React.createElement("p",null,e.message("globsearch.1")),React.createElement(f,{style:{fontSize:10,padding:25},dimension:130},React.createElement("div",{style:{boxShadow:"2px 2px 0px #CFD8DC"}},React.createElement("div",{style:{backgroundColor:"#03a9f4",color:"white",borderRadius:"3px 3px 0 0"}},React.createElement("span",{className:"mdi mdi-magnify"}),e.message("infopanel.search"),"..."),React.createElement("div",{style:{backgroundColor:"white"}},React.createElement("div",null,React.createElement("span",{className:"mdi mdi-folder"})," ",e.message("infopanel.folder")," 1 "),React.createElement("div",null,React.createElement("span",{className:"mdi mdi-folder"}),"  ",e.message("infopanel.file")," 2"),React.createElement("div",null,React.createElement("span",{className:"mdi mdi-file"})," ",e.message("infopanel.file")," 3")))),React.createElement("p",null,e.message("globsearch.2")))}s(g,u.Component),n(g,[{key:"componentDidMount",value:function(){var t=this;this.state.started||pydio.UI.openComponentInModal("UserAccount","WelcomeModal",{onRequestStart:function(e){e?t.discard(!0):(t.discard(!1),t.setState({started:!0}))}})}},{key:"discard",value:function(){var e=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],t=this.props,o=t.pydio,r=t.onFinish,t=o.user,o=t.getPreference("gui_preferences",!0);o["UserAccount.WelcomeModal.Shown"]=!0,e&&(o["WelcomeComponent.Pydio8.TourGuide.Welcome"]=!0,r&&r()),t.setPreference("gui_preferences",o,!0),t.savePreference("gui_preferences")}},{key:"render",value:function(){var t=this;if(!this.state.started)return null;function e(e){return r("ajax_gui.tour."+e)}var o,r=this.props.getMessage,n=[{title:e("workspaces.title"),text:React.createElement(m,{message:e}),selector:".user-workspaces-list",position:"right"},{title:e("globsearch.title"),text:React.createElement(h,{message:e}),selector:".home-search-form",position:"bottom"}];this.props.pydio.user&&(o=!1,this.props.pydio.user.getRepositoriesList().forEach(function(e){"gateway"===e.accessType&&(o=!0)}),o&&n.push({title:e("openworkspace.title"),text:e("openworkspace"),selector:".workspace-entry",position:"right"}));return React.createElement(d,{namespace:"PydioWorkspaces",componentName:"TourGuide",ref:"joyride",steps:n,run:!0,autoStart:!0,debug:!1,callback:function(e){"step:after"===e.type&&e.index===n.length-1&&t.discard(!0)},type:"continuous"})}}]),n=g;function g(e,t){l(this,g),i(Object.getPrototypeOf(g.prototype),"constructor",this).call(this,e,t),this.state={started:!(e.pydio.user&&!e.pydio.user.getPreference("gui_preferences",!0)["UserAccount.WelcomeModal.Shown"])}}o.default=n=e(n),o.default=n,t.exports=o.default},{pydio:"pydio",react:"react"}],11:[function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(o,"__esModule",{value:!0});var n=r(e("./apps/DlAppsCard")),a=r(e("./apps/QRCodeCard")),i=r(e("./quicksend/QuickSendCard")),l=r(e("./quicksend/WorkspacePickerDialog")),s=r(e("./videos/VideoCard")),c=r(e("./workspaces/WorkspacesListCard")),e=r(e("./board/HomeDashboard"));o.DlAppsCard=n.default,o.QRCodeCard=a.default,o.QuickSendCard=i.default,o.WorkspacePickerDialog=l.default,o.VideoCard=s.default,o.WorkspacesListCard=c.default,o.HomeDashboard=e.default},{"./apps/DlAppsCard":1,"./apps/QRCodeCard":3,"./board/HomeDashboard":7,"./quicksend/QuickSendCard":12,"./quicksend/WorkspacePickerDialog":13,"./videos/VideoCard":15,"./workspaces/WorkspacesListCard":17}],12:[function(m,h,g){!function(n){"use strict";Object.defineProperty(g,"__esModule",{value:!0});var t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o,r=arguments[t];for(o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},e=function(e,t,o){return t&&r(e.prototype,t),o&&r(e,o),e};function r(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(e,t,o){for(var r=!0;r;){var n=e,a=t,i=o,r=!1;null===n&&(n=Function.prototype);var l=Object.getOwnPropertyDescriptor(n,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;return void 0===s?void 0:s.call(i)}n=Object.getPrototypeOf(n);if(null===n)return;e=n,t=a,o=i,r=!0,l=void 0}};var a,i=m("../board/ColorPaper"),l=(a=i)&&a.__esModule?a:{default:a},s=m("react"),c=m("material-ui"),u=c.CardTitle,p=c.CircularProgress,d=m("pydio").requireLib("components").asGridItem,c=m("pydio").requireLib("form").FileDropZone,f=(0,m("pydio").requireLib("hoc").NativeFileDropProvider)(c,function(e,t,o){}),e=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(y,s.Component),e(y,[{key:"render",value:function(){s.createElement(u,{title:"Quick Upload"});var e=this.state&&this.state.working;return s.createElement(l.default,t({zDepth:1},this.props,{paletteIndex:0,closeButton:this.props.closeButton}),s.createElement("div",{style:{display:"flex",alignItems:"center",height:"100%"}},s.createElement("div",{style:{padding:16,fontSize:16,width:100}},this.props.pydio.MessageHash["user_home.88"]),s.createElement("div",{style:{textAlign:"center",padding:18,flex:1}},e&&s.createElement(p,{size:80,thickness:4,color:"white"}),!e&&s.createElement(f,{ref:"dropzone",multiple:!0,enableFolders:!1,supportClick:!0,onDrop:this.onDrop,style:{width:"100%",borderWidth:0,height:"auto",borderRadius:"50%",border:"4px solid white",fontSize:56,padding:20},dragActiveStyle:{border:"4px dashed white"}},s.createElement("span",{className:"mdi mdi-cloud-upload"})))))}}]),y);function y(){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),o(Object.getPrototypeOf(y.prototype),"constructor",this).apply(this,arguments),this.fileDroppedOrPicked=function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1],o=void 0,r=void 0;t?(t=t.getItem().dataTransfer).items.length&&t.items[0]&&(t.items[0].getAsEntry||t.items[0].webkitGetAsEntry)&&(o=t.items):e.dataTransfer?(o=e.dataTransfer.items||[],r=e.dataTransfer.files):e.target&&(r=e.target.files);e=[];return window.UploaderModel&&n.pydio.getController().getActionByName("upload")&&UploaderModel.Store.getInstance().handleDropEventResults(o,r,new AjxpNode("/"),e),e},this.onDrop=function(e,t,o){t=r.fileDroppedOrPicked(t);r.setState({uploadItems:t}),r.props.pydio.UI.openComponentInModal("WelcomeComponents","WorkspacePickerDialog",{onWorkspaceTouchTap:r.targetWorkspaceSelected.bind(r),legend:e&&e[0]?s.createElement("div",{style:{fontSize:13,padding:16,backgroundColor:"#FFEBEE"}},r.props.pydio.MessageHash["user_home.89"],": ",e[0].name):void 0})},this.targetWorkspaceSelected=function(t){new AjxpNode("/").getMetadata().set("repository_id",t);var o,e=r.state.uploadItems;window.UploaderModel&&n.pydio.getController().getActionByName("upload")&&(o=UploaderModel.Store.getInstance(),e.forEach(function(e){e.updateRepositoryId(t),e.observe("status",function(){r.setState({working:"loading"===e.getStatus()})}),o.pushFile(e)}),o.processNext())}}g.default=e=d(e,n.pydio.MessageHash["user_home.93"],{gridWidth:2,gridHeight:10},[]),g.default=e,h.exports=g.default}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../board/ColorPaper":4,"material-ui":"material-ui",pydio:"pydio",react:"react"}],13:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=e("react"),n=e("create-react-class"),a=e("pydio").requireLib("boot"),i=a.ActionDialogMixin,a=a.CancelButtonProviderMixin,l=e("pydio").requireLib("workspaces").WorkspacesListMaterial,a=n({displayName:"WorkspacePickerDialog",mixins:[i,a],getDefaultProps:function(){return{dialogTitleId:"user_home.90",dialogSize:"sm",dialogPadding:!1,dialogIsModal:!0,dialogScrollBody:!0}},submit:function(){this.dismiss()},workspaceTouchTap:function(e){this.dismiss(),this.props.onWorkspaceTouchTap(e)},render:function(){var e=this.props.pydio;return r.createElement("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column"}},this.props.legend,r.createElement(l,{pydio:e,workspaces:e.user?e.user.getRepositoriesList():[],showTreeForWorkspace:!1,onWorkspaceTouchTap:this.workspaceTouchTap,filterByType:"entries",sectionTitleStyle:{display:"none"},style:{flex:1,overflowY:"auto",maxHeight:400}}))}});o.default=a,t.exports=o.default},{"create-react-class":"create-react-class",pydio:"pydio",react:"react"}],14:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o,r=arguments[t];for(o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},r=function(e,t,o){for(var r=!0;r;){var n=e,a=t,i=o,r=!1;null===n&&(n=Function.prototype);var l=Object.getOwnPropertyDescriptor(n,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;return void 0===s?void 0:s.call(i)}n=Object.getPrototypeOf(n);if(null===n)return;e=n,t=a,o=i,r=!0,l=void 0}},n=function(e,t,o){return t&&a(e.prototype,t),o&&a(e,o),e};function a(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e){return e&&e.__esModule?e:{default:e}}function s(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var p=i(e("react")),d=i(e("pydio")),f=e("material-ui"),y=i(e("pydio/model/node")),m=i(e("pydio/util/path")),h=i(e("pydio/model/meta-node-provider")),g=i(e("pydio/http/api")),v=e("cells-sdk"),b=d.default.requireLib("boot"),e=b.PydioContextConsumer,w=b.moment,O=d.default.requireLib("workspaces").FilePreview,_=d.default.requireLib("PydioActivityStreams").ASClient,d=d.default.requireLib("hoc"),P=d.PlaceHolder,C=d.PhTextRow,E=d.PhRoundShape,k=(n(x,[{key:"load",value:function(){var o=this,e=[this.loadActivities(),this.loadBookmarks(),this.workspacesAsNodes()];return Promise.all(e).then(function(e){var t=[];return e.map(function(e){t=[].concat(s(t),s(e))}),o.resolveNext(t,[],{},8)})}},{key:"resolveNext",value:function(t,o,r){var n=this,a=arguments.length<=3||void 0===arguments[3]?8:arguments[3];if(o.length>a||!t.length)return Promise.resolve(o);var e=t.shift();return new Promise(e).then(function(e){return e&&!r[e.getMetadata().get("uuid")]&&(o.push(e),r[e.getMetadata().get("uuid")]=e.getMetadata().get("uuid"),n.stater.setState({nodes:[].concat(s(o)),loading:!1})),n.resolveNext(t,o,r,a)})}},{key:"loadBookmarks",value:function(){var n=this,e=new v.UserMetaServiceApi(g.default.getRestClient());return new Promise(function(o){e.userBookmarks(new v.RestUserBookmarksRequest).then(function(e){var t=[];e.Nodes?(e.Nodes.slice(0,4).forEach(function(o){var e,r;o.AppearsIn&&(e=(e=o.AppearsIn[0].Path)||"/",(r=new y.default(e,"LEAF"===o.Type)).getMetadata().set("repository_id",o.AppearsIn[0].WsUuid),t.push(function(t){n.metaProvider.refreshNodeAndReplace(r,function(e){e.getMetadata().set("card_legend","Bookmarked"),e.getMetadata().set("repository_id",o.AppearsIn[0].WsUuid),t(e)},function(){t(null)})}))}),o(t)):o([])})})}},{key:"loadActivities",value:function(){var i=this;return new Promise(function(o){_.loadActivityStreams("USER_ID",i.pydio.user.id,"outbox","ACTOR",0,20).then(function(e){var t;e.items?(t=[],e.items.filter(function(e){return!!e.object}).forEach(function(e){var n=w(e.updated),a=i.nodeFromActivityObject(e.object);a&&t.push(function(t){var o=a.getMetadata().get("repository_id"),r=a.getMetadata().get("repository_label");i.metaProvider.refreshNodeAndReplace(a,function(e){e.getMetadata().set("repository_id",o),""!==e.getPath()&&"/"!==e.getPath()||e.setLabel(r),e.getMetadata().set("card_legend",n.fromNow()),t(e)},function(){t(null)})})}),o(t)):o([])}).catch(function(e){o([])})})}},{key:"workspacesAsNodes",value:function(){var a=this,t=[],o=[];return this.pydio.user.getRepositoriesList().forEach(function(e){o.push(e)}),o.slice(0,10).forEach(function(o){var e,r,n;"homepage"!==o.getId()&&"settings"!==o.getId()&&(e=new y.default("/",!1,o.getLabel()),r="folder",n="Workspace","workspace-personal"===o.getRepositoryType()?r="folder-account":"cell"===o.getRepositoryType()&&(r="icomoon-cells",n="Cell"),t.push(function(t){e.getMetadata().set("repository_id",o.getId()),a.metaProvider.refreshNodeAndReplace(e,function(e){e.setLabel(o.getLabel()),e.getMetadata().set("repository_id",o.getId()),e.getMetadata().set("card_legend",n),e.getMetadata().set("fonticon",r),t(e)},function(){t(null)})}))}),Promise.resolve(t)}},{key:"nodeFromActivityObject",value:function(e){if(!e.partOf||!e.partOf.items||!e.partOf.items.length)return null;for(var t=0;t<e.partOf.items.length;t++){var o=e.partOf.items[t],r=o.rel.split("/");r.shift();var n=r.join("/"),a=!1,r=m.default.getBasename(n);n||(a=!0,n="/",r=o.name);r=new y.default(n,"Document"===e.type,r);return a&&r.setRoot(!0),r.getMetadata().set("repository_id",o.id),r.getMetadata().set("repository_label",o.name),r}return null}}]),x);function x(e,t){u(this,x),this.pydio=e,this.stater=t,this.metaProvider=new h.default}var j=(c(S,p["default"].Component),n(S,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.setState({opacity:1})},200)}},{key:"render",value:function(){var e={paper:{width:120,height:140,margin:16,display:"flex",flexDirection:"column",cursor:"pointer",alignItems:"center",textAlign:"center",opacity:this.state.opacity,transition:"all 1000ms cubic-bezier(0.23, 1, 0.32, 1) 0ms"},preview:{boxShadow:"rgba(0, 0, 0, 0.12) 0px 1px 6px, rgba(0, 0, 0, 0.12) 0px 1px 4px",borderRadius:"50%",width:90,flex:1,alignItems:"center",justifyContent:"center",display:"flex"},label:{fontSize:14,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",width:"100%"},title:{fontSize:14,marginTop:10},legend:{fontSize:11,fontWeight:500,color:"#9E9E9E"}},t=this.props,o=t.title,r=t.legend,n=t.node,a=t.pydio;return p.default.createElement(f.Paper,{zDepth:0,style:e.paper,onClick:function(){a.goTo(n)}},n&&p.default.createElement(O,{node:n,style:e.preview,mimeFontStyle:{fontSize:40},loadThumbnail:!0}),p.default.createElement("div",{style:l({},e.label,e.title)},o),p.default.createElement("div",{style:l({},e.label,e.legend)},r))}}]),S);function S(e){u(this,S),r(Object.getPrototypeOf(S.prototype),"constructor",this).call(this,e),this.state={opacity:0}}c(M,p["default"].Component),n(M,[{key:"componentDidMount",value:function(){var t=this;this.setState({loading:!0}),this.loader.load().then(function(e){t.setState({nodes:e,loading:!1})}).catch(function(){t.setState({loading:!1})})}},{key:"render",value:function(){var e=p.default.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},[0,1,2,3,4,5,6,7].map(function(){return p.default.createElement("div",{style:{margin:16,width:120,height:140,display:"flex",flexDirection:"column",alignItems:"center"}},p.default.createElement(E,{style:{width:90,height:90}}),p.default.createElement(C,null),p.default.createElement(C,null))})),t=this.props,o=t.pydio,r=t.style,n=this.state,t=n.nodes,n=n.loading;if(!o.user||o.user.lock)return p.default.createElement("div",null);var a={},i=[];return t.forEach(function(e){var t=e.getMetadata().get("uuid");a[t]||8<=i.length||(a[t]=t,i.push(p.default.createElement(j,{key:t,pydio:o,node:e,title:e.getLabel(),legend:e.getMetadata().get("card_legend")})))}),p.default.createElement("div",{style:l({display:"flex",flexWrap:"wrap",justifyContent:"center"},r)},p.default.createElement(P,{ready:!n,showLoadingAnimation:!0,customPlaceholder:e},i))}}]),n=M;function M(e){u(this,M),r(Object.getPrototypeOf(M.prototype),"constructor",this).call(this,e),this.loader=new k(e.pydio,this),this.state={nodes:[],loading:!1}}o.default=n=e(n),o.default=n,t.exports=o.default},{"cells-sdk":"cells-sdk","material-ui":"material-ui",pydio:"pydio","pydio/http/api":"pydio/http/api","pydio/model/meta-node-provider":"pydio/model/meta-node-provider","pydio/model/node":"pydio/model/node","pydio/util/path":"pydio/util/path",react:"react"}],15:[function(g,v,b){!function(e){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o,r=arguments[t];for(o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},t=function(e,t,o){return t&&r(e.prototype,t),o&&r(e,o),e};function r(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(e,t,o){for(var r=!0;r;){var n=e,a=t,i=o,r=!1;null===n&&(n=Function.prototype);var l=Object.getOwnPropertyDescriptor(n,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;return void 0===s?void 0:s.call(i)}n=Object.getPrototypeOf(n);if(null===n)return;e=n,t=a,o=i,r=!0,l=void 0}};function n(e){return e&&e.__esModule?e:{default:e}}var a=n(g("prop-types")),i=n(g("./VideoPlayer")),s=n(g("../board/Palette")),c=n(g("../board/ColorPaper")),u=g("react"),p=g("react-dom"),d=g("pydio").requireLib("components").asGridItem,f=g("material-ui"),y=f.MenuItem,m=f.IconMenu,t=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(h,u.Component),t(h,null,[{key:"propTypes",value:{youtubeId:a.default.string,contentMessageId:a.default.string},enumerable:!0}]),t(h,[{key:"render",value:function(){var e=this,t=this.props.pydio.MessageHash,o=this._videos.map(function(e,t){var o=this;return u.createElement(y,{key:"videoCardMenuItem_"+t,primaryText:this.getTitle(e[1]),onClick:function(){o.setState({youtubeId:e[0],contentMessageId:e[1],videoIndex:t})}})}.bind(this)),r=l({},this.props),n=this.state,a=n.youtubeId,i=n.contentMessageId;r.className+=" video-card";n=MaterialUI.Color(s.default[4]).alpha(.8).toString();return u.createElement(c.default,l({},r,{paletteIndex:4,getCloseButton:function(){return e.props.closeButton}}),u.createElement("div",{className:"tutorial_legend"},u.createElement("div",{className:"tutorial_video_thumb",style:{backgroundImage:'url("https://img.youtube.com/vi/'+a+'/0.jpg")'}},u.createElement("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:n}}),u.createElement("div",{className:"tutorial_prev mdi mdi-arrow-left",onClick:this.browse.bind(this,"previous")}),u.createElement("div",{className:"tutorial_play mdi mdi-play",onClick:this.launchVideo}),u.createElement("div",{className:"tutorial_next mdi mdi-arrow-right",onClick:this.browse.bind(this,"next")}),u.createElement("div",{className:"tutorial_title"},u.createElement("span",{dangerouslySetInnerHTML:{__html:t[i]}}),u.createElement(m,{style:{position:"absolute",bottom:0,right:0,backgroundColor:"rgba(0,0,0,0.43)",padding:2,borderRadius:"0 0 2px 0"},iconStyle:{color:"white"},iconButtonElement:u.createElement(MaterialUI.IconButton,{iconClassName:"mdi mdi-dots-vertical"}),anchorOrigin:{horizontal:"right",vertical:"top"},targetOrigin:{horizontal:"right",vertical:"top"}},o)))))}}]),h);function h(e){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),o(Object.getPrototypeOf(h.prototype),"constructor",this).call(this,e),this.launchVideo=function(){var e="//www.youtube.com/embed/"+n.state.youtubeId+"?list=PLxzQJCqzktEbYm3U_O1EqFru0LsEFBca5&autoplay=1";n._videoDiv=document.createElement("div"),document.body.appendChild(n._videoDiv),p.render(u.createElement(i.default,{videoSrc:e,closePlayer:n.closePlayer}),n._videoDiv)},this.closePlayer=function(){p.unmountComponentAtNode(n._videoDiv),document.body.removeChild(n._videoDiv)},this.getTitle=function(e){return n.props.pydio.MessageHash[e].split("\n").shift().replace("<h2>","").replace("</h2>","")},this.browse=function(e,t){void 0===e&&(e="next");var o=void 0,r=n.state.videoIndex,o="next"===e?r<n._videos.length-1?r+1:0:0<r?r-1:n._videos.length-1,r=n._videos[o];n.setState({videoIndex:o,youtubeId:r[0],contentMessageId:r[1]})},this._videos=[["qvsSeLXr-T4","user_home.63"],["HViCWPpyZ6k","user_home.79"],["jBRNqwannJM","user_home.80"],["2jl1EsML5v8","user_home.81"],["28-t4dvhE6c","user_home.82"],["fP0MVejnVZE","user_home.83"],["TXFz4w4trlQ","user_home.84"],["OjHtgnL_L7Y","user_home.85"],["ot2Nq-RAnYE","user_home.66"]];var t=Math.floor(Math.random()*this._videos.length),e=this._videos[t];this.state={videoIndex:t,youtubeId:e[0],contentMessageId:e[1]}}b.default=t=d(t,e.pydio.MessageHash["user_home.94"],{gridWidth:2,gridHeight:12},[]),b.default=t,v.exports=b.default}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../board/ColorPaper":4,"../board/Palette":9,"./VideoPlayer":16,"material-ui":"material-ui","prop-types":"prop-types",pydio:"pydio",react:"react","react-dom":"react-dom"}],16:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e};function n(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(e,t,o){for(var r=!0;r;){var n=e,a=t,i=o,r=!1;null===n&&(n=Function.prototype);var l=Object.getOwnPropertyDescriptor(n,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;return void 0===s?void 0:s.call(i)}n=Object.getPrototypeOf(n);if(null===n)return;e=n,t=a,o=i,r=!0,l=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}var l=i(e("react")),e=i(e("prop-types")),r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,l["default"].Component),r(s,[{key:"render",value:function(){return l.default.createElement("div",{className:"video-player",style:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:2e5}},l.default.createElement("div",{className:"overlay",style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"black",opacity:.4},onClick:this.props.closePlayer}),l.default.createElement("div",{style:{position:"absolute",top:"10%",left:"10%",width:"80%",height:"80%",minWidth:420,minHeight:600,boxShadow:"rgba(0, 0, 0, 0.156863) 0px 3px 10px, rgba(0, 0, 0, 0.227451) 0px 3px 10px"}},l.default.createElement("iframe",{src:this.props.videoSrc,style:{width:"100%",height:"100%",border:0}})),l.default.createElement("a",{className:"mdi mdi-close",style:{position:"absolute",right:"8%",top:"7%",color:"white",textDecoration:"none",fontSize:24},onClick:this.props.closePlayer}))}}]),s);function s(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),a(Object.getPrototypeOf(s.prototype),"constructor",this).apply(this,arguments)}r.propTypes={videoSrc:e.default.string,closePlayer:e.default.func},o.default=r,t.exports=o.default},{"prop-types":"prop-types",react:"react"}],17:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o,r=arguments[t];for(o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},n=function(e,t,o){return t&&a(e.prototype,t),o&&a(e,o),e};function a(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(e,t,o){for(var r=!0;r;){var n=e,a=t,i=o,r=!1;null===n&&(n=Function.prototype);var l=Object.getOwnPropertyDescriptor(n,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;return void 0===s?void 0:s.call(i)}n=Object.getPrototypeOf(n);if(null===n)return;e=n,t=a,o=i,r=!0,l=void 0}};function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=e("react"),u=(e("pydio").requireLib("components").asGridItem,s(p,c.Component),n(p,[{key:"render",value:function(){var e=this.props,t=e.pydio,o=e.filterByType,e=e.muiTheme,t=t.MessageHash,e="entries"===o?e.palette.primary1Color:MaterialUI.Style.colors.teal500,o=t["entries"===o?468:469],e={backgroundColor:e,color:"white",padding:16,fontSize:24,lineHeight:"36px"};return c.createElement(MaterialUI.Paper,{zDepth:0,rounded:!1,style:e},o)}}]),p);function p(){l(this,p),i(Object.getPrototypeOf(p.prototype),"constructor",this).apply(this,arguments)}u=MaterialUI.Style.muiThemeable()(u),s(d,c.Component),n(d,[{key:"render",value:function(){var e=this.props,t=e.pydio,o=e.filterByType,e=r({},this.props);e.style&&(e.style=r({},e.style,{overflowY:"auto",zIndex:1}));c.createElement(MaterialUI.CardTitle,{title:t.MessageHash["entries"===o?468:469]}),c.createElement(u,this.props);return c.createElement(MaterialUI.Paper,r({zDepth:1},e,{transitionEnabled:!1,rounded:!1}),this.props.closeButton,c.createElement("div",{style:{height:"100%",display:"flex",flexDirection:"column"}},c.createElement(PydioWorkspaces.WorkspacesListMaterial,{className:"vertical_fit filter-"+o,pydio:t,workspaces:t.user?t.user.getRepositoriesList():[],showTreeForWorkspace:!1,filterByType:this.props.filterByType,sectionTitleStyle:{display:"none"},style:{flex:1,overflowY:"auto"}})))}}]),n=d;function d(){l(this,d),i(Object.getPrototypeOf(d.prototype),"constructor",this).apply(this,arguments)}o.default=n,t.exports=o.default},{pydio:"pydio",react:"react"}]},{},[11])(11)});