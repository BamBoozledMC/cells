!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).PydioCKEditor=e()}(function(){return function o(n,i,a){function u(r,e){if(!i[r]){if(!n[r]){var t="function"==typeof require&&require;if(!e&&t)return t(r,!0);if(l)return l(r,!0);t=new Error("Cannot find module '"+r+"'");throw t.code="MODULE_NOT_FOUND",t}t=i[r]={exports:{}};n[r][0].call(t.exports,function(e){var t=n[r][1][e];return u(t||e)},t,t.exports,o,n,i,a)}return i[r].exports}for(var l="function"==typeof require&&require,e=0;e<a.length;e++)u(a[e]);return u}({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e};function n(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var i=function(e,t,r){for(var o=!0;o;){var n=e,i=t,a=r,o=!1;null===n&&(n=Function.prototype);var u=Object.getOwnPropertyDescriptor(n,i);if(void 0!==u){if("value"in u)return u.value;var l=u.get;return void 0===l?void 0:l.call(a)}n=Object.getPrototypeOf(n);if(null===n)return;e=n,t=i,r=a,o=!0,u=void 0}};function a(e){return e&&e.__esModule?e:{default:e}}var u=e("react"),l=a(u),e=a(e("prop-types")),o=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,u.Component),o(c,[{key:"componentDidMount",value:function(){var e=this.props,t=(e.pydio,e.url,e.content),r=e.config,o=e.onChange;this.textarea.id;this.textarea.value=t,CKEDITOR.replace(this.textarea,r).on("change",function(e){e=e.editor;return o(e.getData())})}},{key:"componentWillUnmount",value:function(){var e=this.textarea.id;CKEDITOR.instances[e]&&(this.textarea.value=CKEDITOR.instances[e].getData(),CKEDITOR.instances[e].destroy())}},{key:"render",value:function(){var t=this,e=this.props.url,r=c.styles.textarea,e=LangUtils.computeStringSlug(e);return l.default.createElement("textarea",{ref:function(e){return t.textarea=e},key:e,style:r})}}],[{key:"styles",get:function(){return{textarea:{width:"100%"}}}}]),c);function c(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),i(Object.getPrototypeOf(c.prototype),"constructor",this).apply(this,arguments)}o.propTypes={url:e.default.string.isRequired},r.default=o,t.exports=r.default},{"prop-types":"prop-types",react:"react"}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o,n=e("pydio"),i=(o=n)&&o.__esModule?o:{default:o},a=i.default.requireLib("hoc").EditorActions;r.onSave=function(e){var t=e.tab,r=e.dispatch;return function(){return i.default.getInstance().ApiClient.postPlainTextContent(t.url,t.content,function(e){e||r(a.tabModify({id:t.id,error:"There was an error while saving"}))})}}},{pydio:"pydio"}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e};function n(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,o=arguments[t];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e};function a(e){return e&&e.__esModule?e:{default:e}}var u=a(e("pydio")),l=a(e("react")),c=a(e("prop-types")),s=e("react-redux"),f=(e("redux"),a(e("./CKEditor"))),p=u.default.requireLib("hoc").EditorActions,u=function(){function u(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,r){for(var o=!0;o;){var n=e,i=t,a=r,o=!1;null===n&&(n=Function.prototype);var u=Object.getOwnPropertyDescriptor(n,i);if(void 0!==u){if("value"in u)return u.value;var l=u.get;return void 0===l?void 0:l.call(a)}n=Object.getPrototypeOf(n);if(null===n)return;e=n,t=i,r=a,o=!0,u=void 0}}(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(u,l["default"].Component),o(u,[{key:"componentDidMount",value:function(){var e=this.props,t=e.pydio,r=e.node,o=e.tab,n=e.dispatch,i=o.id,o=this.props.editorModify;o&&this.props.isActive&&o({fixedToolbar:!0}),t.ApiClient.getPlainContent(r,function(e){n(p.tabModify({id:i,editable:!0,content:e}))})}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.editorModify;t&&e.isActive&&t({fixedToolbar:!0})}},{key:"render",value:function(){var e=this.props,t=e.pydio,r=e.node,o=e.tab,n=e.dispatch,i=u.config,e=i.desktop,i=i.mobile,a=o.id,o=o.content;return o?l.default.createElement(f.default,{url:r.getPath(),content:o,config:t.UI.MOBILE_EXTENSIONS?i:e,onChange:function(e){return n(p.tabModify({id:a,content:e}))}}):null}}],[{key:"propTypes",get:function(){return{showControls:c.default.bool.isRequired}}},{key:"defaultProps",get:function(){return{showControls:!1}}},{key:"base",get:function(){return{resize_enabled:!1,toolbar:"Ajxp",contentsCss:"../../res/ckeditor.css",filebrowserBrowseUrl:"index.php?external_selector_type=ckeditor",filebrowserImageBrowseUrl:"index.php?external_selector_type=ckeditor",filebrowserFlashBrowseUrl:"index.php?external_selector_type=ckeditor",language:pydio.currentLanguage,fullPage:!0}}},{key:"config",get:function(){return{basePath:DOMUtils.getUrlFromBase()+"plug/editor.ckeditor/res/dist/ckeditor/",desktop:i({},u.base,{toolbar_Ajxp:[["Source","Preview","Templates"],["Undo","Redo","-","Cut","Copy","Paste","PasteText","PasteFromWord","-","Print","SpellChecker","Scayt"],["Find","Replace","-","SelectAll","RemoveFormat"],["Form","Checkbox","Radio","TextField","Textarea","Select","Button","ImageButton","HiddenField"],"/",["Bold","Italic","Underline","Strike","-","Subscript","Superscript"],["NumberedList","BulletedList","-","Outdent","Indent","Blockquote"],["JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"],["Link","Unlink","Anchor"],["Image","Flash","Table","HorizontalRule","Smiley","SpecialChar","PageBreak"],"/",["Styles","Format","Font","FontSize"],["TextColor","BGColor"],["Maximize","ShowBlocks","-","About"]]}),mobile:i({},u.base,{toolbar_Ajxp:[["Bold","Italic","Underline","-","NumberedList","BulletedList"],["JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"]]})}}}]);var e=u;return u=(0,s.connect)(null,p)(u)||u}();CKEDITOR.basePath=u.config.basePath,CKEDITOR.contentsCss=u.config.basePath+"../../res/css/ckeditor.css",r.default=(0,s.connect)(function(e,r){e=e.tabs.filter(function(e){var t=e.editorData,e=e.node;return(!t||t.id===r.editorData.id)&&e.getPath()===r.node.getPath()})[0]||{};return i({id:e.id,tab:e},r)})(u),t.exports=r.default},{"./CKEditor":1,"prop-types":"prop-types",pydio:"pydio",react:"react","react-redux":"react-redux",redux:"redux"}],4:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o,n=e("./editor"),i=(o=n)&&o.__esModule?o:{default:o},e=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("./actions"));r.Editor=i.default,r.Actions=e},{"./actions":2,"./editor":3}]},{},[4])(4)});